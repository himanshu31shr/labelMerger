const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdf-vendor-BVWGQTu2.js","assets/react-vendor-DYr15v6v.js","assets/dashboard.page-CYDD-Bvi.js","assets/mui-vendor-tGclxw8b.js","assets/FormattedCurrency-BQf40NSG.js","assets/generateCategoricalChart-3wwmbAAY.js","assets/redux-vendor-CLOwJCHO.js","assets/firebase-vendor-yCdHbQaA.js","assets/utils-vendor-CFocuF-S.js","assets/home.page-CXcHpjHv.js","assets/pdfStorageService-CLDArnMX.js","assets/transactionAnalytics.page-gj6uv7X1.js","assets/DataTable-DEz7wYai.js","assets/products.page-B3GoPx47.js","assets/ProductTableToolbar-DPibuSKQ.js","assets/ActionButtons-D6QB-2Vj.js","assets/todaysOrder.page-5zWL0q7q.js","assets/hidden-products.page-BaXvTSCV.js","assets/categories.page-DhLIySax.js","assets/index-BuGQ78U8.js","assets/endOfMonth-D_6NHXpV.js","assets/uncategorized-products.page-COqJCxg1.js","assets/storage-management.page-DuBNvfMR.js","assets/health.page-h7klUjhq.js","assets/monitoring-dashboard.page-CPPT-Xmy.js","assets/deployment-status.page-Deebhqf3.js"])))=>i.map(i=>d[i]);
var ki=Object.defineProperty;var Oi=(r,e,t)=>e in r?ki(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var $e=(r,e,t)=>Oi(r,typeof e!="symbol"?e+"":e,t);import{j as jsxRuntimeExports,B as Box,C as CircularProgress,s as styled,A as AppBar$1,T as Toolbar,I as IconButton,M as MenuIcon,a as ChevronLeftIcon,b as Typography,S as Switch,c as Button,L as LogoutIcon,d as ListItemButton,e as alpha,f as ListItemIcon,g as ListItemText,u as useTheme,h as useMediaQuery,D as Divider,i as List,k as Link,l as ListItem,m as DashboardIcon,n as ShoppingCartIcon,E as ExpandLess,o as ExpandMore,p as Collapse,q as LabelIcon,r as InventoryIcon,V as VisibilityOffIcon,W as Warning,t as InventoryManagementIcon,v as CategoryIcon,w as Storage,x as Analytics,y as Drawer,z as Container,F as ErrorOutline,G as Card,H as LockOutlinedIcon,J as TextField,K as InputAdornment,N as EmailOutlinedIcon,O as VisibilityOffOutlinedIcon,P as VisibilityOutlined,Q as FormControlLabel,R as Checkbox,U as Alert,X as Paper,Y as BugReportOutlined,Z as RefreshOutlined,_ as createTheme,$ as ThemeProvider,a0 as CssBaseline}from"./mui-vendor-tGclxw8b.js";import{e as requireReactDom,a as reactExports,g as getDefaultExportFromCjs,f as commonjsGlobal,h as getAugmentedNamespace,u as useLocation,N as Navigate,i as useNavigate,b as React,L as Link$1,j as Routes,k as Route,B as BrowserRouter}from"./react-vendor-DYr15v6v.js";import{i as isAction,a as isPlainObject$1,c as combineReducers,b as applyMiddleware,d as compose,e as createStore,u as useDispatch,f as useSelector,P as Provider_default}from"./redux-vendor-CLOwJCHO.js";import{_ as _registerComponent,C as Component,r as registerVersion,S as SDK_VERSION,a as _isFirebaseServerApp,F as FirebaseError,g as getApp,b as getModularInstance,c as _getProvider,d as getDefaultEmulatorHostnameAndPort,e as createMockUserToken,i as initializeApp,f as getAuth,h as initializeFirestore,j as enableIndexedDbPersistence,k as rn,l as collection,q as query,m as getDocs,n as doc,o as getDoc,s as setDoc,p as addDoc,u as updateDoc,T as Timestamp,t as deleteDoc,w as writeBatch,v as where,x as orderBy,y as runTransaction,z as limit,A as createUserWithEmailAndPassword,B as setPersistence,D as browserLocalPersistence,E as browserSessionPersistence,G as signInWithEmailAndPassword,H as signOut,I as sendPasswordResetEmail,J as onAuthStateChanged}from"./firebase-vendor-yCdHbQaA.js";import{r as requirePapaparse_min,a as readSync,u as utils}from"./utils-vendor-CFocuF-S.js";import{_ as __vitePreload}from"./pdf-vendor-BVWGQTu2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var client={},hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var r=requireReactDom();return client.createRoot=r.createRoot,client.hydrateRoot=r.hydrateRoot,client}var clientExports=requireClient();function _typeof$1(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(t){return typeof t}:_typeof$1=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(r)}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function _createClass(r,e,t){return e&&_defineProperties(r.prototype,e),r}function _possibleConstructorReturn(r,e){return e&&(_typeof$1(e)==="object"||typeof e=="function")?e:_assertThisInitialized(r)}function _getPrototypeOf(r){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(r)}function _assertThisInitialized(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _inherits(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&_setPrototypeOf(r,e)}function _setPrototypeOf(r,e){return _setPrototypeOf=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},_setPrototypeOf(r,e)}function _defineProperty$3(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var PersistGate=function(r){_inherits(e,r);function e(){var t,n;_classCallCheck(this,e);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=_possibleConstructorReturn(this,(t=_getPrototypeOf(e)).call.apply(t,[this].concat(s))),_defineProperty$3(_assertThisInitialized(n),"state",{bootstrapped:!1}),_defineProperty$3(_assertThisInitialized(n),"_unsubscribe",void 0),_defineProperty$3(_assertThisInitialized(n),"handlePersistorState",function(){var u=n.props.persistor,p=u.getState(),h=p.bootstrapped;h&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return _createClass(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(reactExports.PureComponent);_defineProperty$3(PersistGate,"defaultProps",{children:null,loading:null});var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(r){return!!r&&!!r[DRAFT_STATE]}function isDraftable(r){var e;return r?isPlainObject(r)||Array.isArray(r)||!!r[DRAFTABLE]||!!((e=r.constructor)!=null&&e[DRAFTABLE])||isMap(r)||isSet(r):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(r){if(!r||typeof r!="object")return!1;const e=getPrototypeOf(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===objectCtorString}function each(r,e){getArchtype(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,n)=>e(n,t,r))}function getArchtype(r){const e=r[DRAFT_STATE];return e?e.type_:Array.isArray(r)?1:isMap(r)?2:isSet(r)?3:0}function has(r,e){return getArchtype(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function set(r,e,t){const n=getArchtype(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function is(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function isMap(r){return r instanceof Map}function isSet(r){return r instanceof Set}function latest(r){return r.copy_||r.base_}function shallowCopy(r,e){if(isMap(r))return new Map(r);if(isSet(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=isPlainObject(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[DRAFT_STATE];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],u=n[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:r[o]})}return Object.create(getPrototypeOf(r),n)}else{const n=getPrototypeOf(r);if(n!==null&&t)return{...r};const a=Object.create(n);return Object.assign(a,r)}}function freeze(r,e=!1){return isFrozen(r)||isDraft(r)||!isDraftable(r)||(getArchtype(r)>1&&(r.set=r.add=r.clear=r.delete=dontMutateFrozenCollections),Object.freeze(r),e&&Object.entries(r).forEach(([t,n])=>freeze(n,!0))),r}function dontMutateFrozenCollections(){die(2)}function isFrozen(r){return Object.isFrozen(r)}var plugins={};function getPlugin(r){const e=plugins[r];return e||die(0,r),e}var currentScope;function getCurrentScope(){return currentScope}function createScope(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(r,e){e&&(getPlugin("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function revokeScope(r){leaveScope(r),r.drafts_.forEach(revokeDraft),r.drafts_=null}function leaveScope(r){r===currentScope&&(currentScope=r.parent_)}function enterScope(r){return currentScope=createScope(currentScope,r)}function revokeDraft(r){const e=r[DRAFT_STATE];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function processResult(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[DRAFT_STATE].modified_&&(revokeScope(e),die(4)),isDraftable(r)&&(r=finalize(e,r),e.parent_||maybeFreeze(e,r)),e.patches_&&getPlugin("Patches").generateReplacementPatches_(t[DRAFT_STATE].base_,r,e.patches_,e.inversePatches_)):r=finalize(e,t,[]),revokeScope(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==NOTHING?r:void 0}function finalize(r,e,t){if(isFrozen(e))return e;const n=e[DRAFT_STATE];if(!n)return each(e,(a,s)=>finalizeProperty(r,n,e,a,s,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return maybeFreeze(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),each(s,(u,p)=>finalizeProperty(r,n,a,u,p,t,o)),maybeFreeze(r,a,!1),t&&r.patches_&&getPlugin("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function finalizeProperty(r,e,t,n,a,s,o){if(isDraft(a)){const u=s&&e&&e.type_!==3&&!has(e.assigned_,n)?s.concat(n):void 0,p=finalize(r,a,u);if(set(t,n,p),isDraft(p))r.canAutoFreeze_=!1;else return}else o&&t.add(a);if(isDraftable(a)&&!isFrozen(a)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;finalize(r,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&maybeFreeze(r,a)}}function maybeFreeze(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&freeze(e,t)}function createProxyProxy(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=objectTraps;t&&(a=[n],s=arrayTraps);const{revoke:o,proxy:u}=Proxy.revocable(a,s);return n.draft_=u,n.revoke_=o,u}var objectTraps={get(r,e){if(e===DRAFT_STATE)return r;const t=latest(r);if(!has(t,e))return readPropFromProto(r,t,e);const n=t[e];return r.finalized_||!isDraftable(n)?n:n===peek(r.base_,e)?(prepareCopy(r),r.copy_[e]=createProxy(n,r)):n},has(r,e){return e in latest(r)},ownKeys(r){return Reflect.ownKeys(latest(r))},set(r,e,t){const n=getDescriptorFromProto(latest(r),e);if(n!=null&&n.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const a=peek(latest(r),e),s=a==null?void 0:a[DRAFT_STATE];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(is(t,a)&&(t!==void 0||has(r.base_,e)))return!0;prepareCopy(r),markChanged(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return peek(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,prepareCopy(r),markChanged(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=latest(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){die(11)},getPrototypeOf(r){return getPrototypeOf(r.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(r,e)=>{arrayTraps[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});arrayTraps.deleteProperty=function(r,e){return arrayTraps.set.call(this,r,e,void 0)};arrayTraps.set=function(r,e,t){return objectTraps.set.call(this,r[0],e,t,r[0])};function peek(r,e){const t=r[DRAFT_STATE];return(t?latest(t):r)[e]}function readPropFromProto(r,e,t){var a;const n=getDescriptorFromProto(e,t);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(r.draft_):void 0}function getDescriptorFromProto(r,e){if(!(e in r))return;let t=getPrototypeOf(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=getPrototypeOf(t)}}function markChanged(r){r.modified_||(r.modified_=!0,r.parent_&&markChanged(r.parent_))}function prepareCopy(r){r.copy_||(r.copy_=shallowCopy(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const o=this;return function(p=s,...h){return o.produce(p,f=>t.call(this,f,...h))}}typeof t!="function"&&die(6),n!==void 0&&typeof n!="function"&&die(7);let a;if(isDraftable(e)){const s=enterScope(this),o=createProxy(e,void 0);let u=!0;try{a=t(o),u=!1}finally{u?revokeScope(s):leaveScope(s)}return usePatchesInScope(s,n),processResult(a,s)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===NOTHING&&(a=void 0),this.autoFreeze_&&freeze(a,!0),n){const s=[],o=[];getPlugin("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else die(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(o,...u)=>this.produceWithPatches(o,p=>e(p,...u));let n,a;return[this.produce(e,t,(o,u)=>{n=o,a=u}),n,a]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){isDraftable(r)||die(8),isDraft(r)&&(r=current(r));const e=enterScope(this),t=createProxy(r,void 0);return t[DRAFT_STATE].isManual_=!0,leaveScope(e),t}finishDraft(r,e){const t=r&&r[DRAFT_STATE];(!t||!t.isManual_)&&die(9);const{scope_:n}=t;return usePatchesInScope(n,e),processResult(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}t>-1&&(e=e.slice(t+1));const n=getPlugin("Patches").applyPatches_;return isDraft(r)?n(r,e):this.produce(r,a=>n(a,e))}};function createProxy(r,e){const t=isMap(r)?getPlugin("MapSet").proxyMap_(r,e):isSet(r)?getPlugin("MapSet").proxySet_(r,e):createProxyProxy(r,e);return(e?e.scope_:getCurrentScope()).drafts_.push(t),t}function current(r){return isDraft(r)||die(10,r),currentImpl(r)}function currentImpl(r){if(!isDraftable(r)||isFrozen(r))return r;const e=r[DRAFT_STATE];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=shallowCopy(r,e.scope_.immer_.useStrictShallowCopy_)}else t=shallowCopy(r,!0);return each(t,(n,a)=>{set(t,n,currentImpl(a))}),e&&(e.finalized_=!1),t}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function assertIsFunction(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function assertIsObject(r,e=`expected an object, instead received ${typeof r}`){if(typeof r!="object")throw new TypeError(e)}function assertIsArrayOfFunctions(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${t}]`)}}var ensureIsArray=r=>Array.isArray(r)?r:[r];function getDependencies(r){const e=Array.isArray(r[0])?r[0]:r;return assertIsArrayOfFunctions(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function collectInputSelectorResults(r,e){const t=[],{length:n}=r;for(let a=0;a<n;a++)t.push(r[a].apply(null,e));return t}var StrongRef=class{constructor(r){this.value=r}deref(){return this.value}},Ref=typeof WeakRef<"u"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(r,e={}){let t=createCacheNode();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var E;let u=t;const{length:p}=arguments;for(let m=0,w=p;m<w;m++){const I=arguments[m];if(typeof I=="function"||typeof I=="object"&&I!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const T=S.get(I);T===void 0?(u=createCacheNode(),S.set(I,u)):u=T}else{let S=u.p;S===null&&(u.p=S=new Map);const T=S.get(I);T===void 0?(u=createCacheNode(),S.set(I,u)):u=T}}const h=u;let f;if(u.s===TERMINATED)f=u.v;else if(f=r.apply(null,arguments),s++,n){const m=((E=a==null?void 0:a.deref)==null?void 0:E.call(a))??a;m!=null&&n(m,f)&&(f=m,s!==0&&s--),a=typeof f=="object"&&f!==null||typeof f=="function"?new Ref(f):f}return h.s=TERMINATED,h.v=f,f}return o.clearCache=()=>{t=createCacheNode(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function createSelectorCreator(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r,n=(...a)=>{let s=0,o=0,u,p={},h=a.pop();typeof h=="object"&&(p=h,h=a.pop()),assertIsFunction(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const f={...t,...p},{memoize:E,memoizeOptions:m=[],argsMemoize:w=weakMapMemoize,argsMemoizeOptions:I=[]}=f,S=ensureIsArray(m),T=ensureIsArray(I),F=getDependencies(a),y=E(function(){return s++,h.apply(null,arguments)},...S),b=w(function(){o++;const l=collectInputSelectorResults(F,arguments);return u=y.apply(null,l),u},...T);return Object.assign(b,{resultFunc:h,memoizedResultFunc:y,dependencies:F,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:E,argsMemoize:w})};return Object.assign(n,{withTypes:()=>n}),n}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((r,e=createSelector)=>{assertIsObject(r,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof r}`);const t=Object.keys(r),n=t.map(s=>r[s]);return e(n,(...s)=>s.reduce((o,u,p)=>(o[t[p]]=u,o),{}))},{withTypes:()=>createStructuredSelector});function createThunkMiddleware(r){return({dispatch:t,getState:n})=>a=>s=>typeof s=="function"?s(t,n,r):a(s)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)},hasMatchFunction=r=>r&&typeof r.match=="function";function createAction(r,e){function t(...n){if(e){let a=e(...n);if(!a)throw new Error(formatProdErrorMessage(0));return{type:r,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:r,payload:n[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=n=>isAction(n)&&n.type===r,t}var Tuple=class or extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,or.prototype)}static get[Symbol.species](){return or}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new or(...e[0].concat(this)):new or(...e.concat(this))}};function freezeDraftable(r){return isDraftable(r)?produce(r,()=>{}):r}function getOrInsertComputed(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function isBoolean(r){return typeof r=="boolean"}var buildGetDefaultMiddleware=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new Tuple;return t&&(isBoolean(t)?o.push(thunk):o.push(withExtraArgument(t.extraArgument))),o},SHOULD_AUTOBATCH="RTK_autoBatch",createQueueWithTimer=r=>e=>{setTimeout(e,r)},autoBatchEnhancer=(r={type:"raf"})=>e=>(...t)=>{const n=e(...t);let a=!0,s=!1,o=!1;const u=new Set,p=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):r.type==="callback"?r.queueNotification:createQueueWithTimer(r.timeout),h=()=>{o=!1,s&&(s=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const E=()=>a&&f(),m=n.subscribe(E);return u.add(f),()=>{m(),u.delete(f)}},dispatch(f){var E;try{return a=!((E=f==null?void 0:f.meta)!=null&&E[SHOULD_AUTOBATCH]),s=!a,s&&(o||(o=!0,p(h))),n.dispatch(f)}finally{a=!0}}})},buildGetDefaultEnhancers=r=>function(t){const{autoBatch:n=!0}=t??{};let a=new Tuple(r);return n&&a.push(autoBatchEnhancer(typeof n=="object"?n:void 0)),a};function configureStore(r){const e=buildGetDefaultMiddleware(),{reducer:t=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=r||{};let u;if(typeof t=="function")u=t;else if(isPlainObject$1(t))u=combineReducers(t);else throw new Error(formatProdErrorMessage(1));let p;typeof n=="function"?p=n(e):p=e();let h=compose;a&&(h=composeWithDevTools({trace:!1,...typeof a=="object"&&a}));const f=applyMiddleware(...p),E=buildGetDefaultEnhancers(f);let m=typeof o=="function"?o(E):E();const w=h(...m);return createStore(u,s,w)}function executeReducerBuilderCallback(r){const e={},t=[];let n;const a={addCase(s,o){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(formatProdErrorMessage(28));if(u in e)throw new Error(formatProdErrorMessage(29));return e[u]=o,a},addMatcher(s,o){return t.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return r(a),[e,t,n]}function isStateFunction(r){return typeof r=="function"}function createReducer(r,e){let[t,n,a]=executeReducerBuilderCallback(e),s;if(isStateFunction(r))s=()=>freezeDraftable(r());else{const u=freezeDraftable(r);s=()=>u}function o(u=s(),p){let h=[t[p.type],...n.filter(({matcher:f})=>f(p)).map(({reducer:f})=>f)];return h.filter(f=>!!f).length===0&&(h=[a]),h.reduce((f,E)=>{if(E)if(isDraft(f)){const w=E(f,p);return w===void 0?f:w}else{if(isDraftable(f))return produce(f,m=>E(m,p));{const m=E(f,p);if(m===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return f},u)}return o.getInitialState=s,o}var matches=(r,e)=>hasMatchFunction(r)?r.match(e):r(e);function isAnyOf(...r){return e=>r.some(t=>matches(t,e))}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(r=21)=>{let e="",t=r;for(;t--;)e+=urlAlphabet[Math.random()*64|0];return e},commonProperties=["name","message","stack","code"],RejectWithValue=class{constructor(r,e){$e(this,"_type");this.payload=r,this.meta=e}},FulfillWithMeta=class{constructor(r,e){$e(this,"_type");this.payload=r,this.meta=e}},miniSerializeError=r=>{if(typeof r=="object"&&r!==null){const e={};for(const t of commonProperties)typeof r[t]=="string"&&(e[t]=r[t]);return e}return{message:String(r)}},externalAbortMessage="External signal was aborted",createAsyncThunk=(()=>{function r(e,t,n){const a=createAction(e+"/fulfilled",(p,h,f,E)=>({payload:p,meta:{...E||{},arg:f,requestId:h,requestStatus:"fulfilled"}})),s=createAction(e+"/pending",(p,h,f)=>({payload:void 0,meta:{...f||{},arg:h,requestId:p,requestStatus:"pending"}})),o=createAction(e+"/rejected",(p,h,f,E,m)=>({payload:E,error:(n&&n.serializeError||miniSerializeError)(p||"Rejected"),meta:{...m||{},arg:f,requestId:h,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function u(p,{signal:h}={}){return(f,E,m)=>{const w=n!=null&&n.idGenerator?n.idGenerator(p):nanoid(),I=new AbortController;let S,T;function F(b){T=b,I.abort()}h&&(h.aborted?F(externalAbortMessage):h.addEventListener("abort",()=>F(externalAbortMessage),{once:!0}));const y=async function(){var l,d;let b;try{let _=(l=n==null?void 0:n.condition)==null?void 0:l.call(n,p,{getState:E,extra:m});if(isThenable(_)&&(_=await _),_===!1||I.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((C,L)=>{S=()=>{L({name:"AbortError",message:T||"Aborted"})},I.signal.addEventListener("abort",S)});f(s(w,p,(d=n==null?void 0:n.getPendingMeta)==null?void 0:d.call(n,{requestId:w,arg:p},{getState:E,extra:m}))),b=await Promise.race([A,Promise.resolve(t(p,{dispatch:f,getState:E,extra:m,requestId:w,signal:I.signal,abort:F,rejectWithValue:(C,L)=>new RejectWithValue(C,L),fulfillWithValue:(C,L)=>new FulfillWithMeta(C,L)})).then(C=>{if(C instanceof RejectWithValue)throw C;return C instanceof FulfillWithMeta?a(C.payload,w,p,C.meta):a(C,w,p)})])}catch(_){b=_ instanceof RejectWithValue?o(null,w,p,_.payload,_.meta):o(_,w,p)}finally{S&&I.signal.removeEventListener("abort",S)}return n&&!n.dispatchConditionRejection&&o.match(b)&&b.meta.condition||f(b),b}();return Object.assign(y,{abort:F,requestId:w,arg:p,unwrap(){return y.then(unwrapResult)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:a,settled:isAnyOf(o,a),typePrefix:e})}return r.withTypes=()=>r,r})();function unwrapResult(r){if(r.meta&&r.meta.rejectedWithValue)throw r.payload;if(r.error)throw r.error;return r.payload}function isThenable(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(r,e){return`${r}/${e}`}function buildCreateSlice({creators:r}={}){var t;const e=(t=r==null?void 0:r.asyncThunk)==null?void 0:t[asyncThunkSymbol];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(formatProdErrorMessage(11));const u=(typeof a.reducers=="function"?a.reducers(buildReducerCreators()):a.reducers)||{},p=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(g,l){const d=typeof g=="string"?g:g.type;if(!d)throw new Error(formatProdErrorMessage(12));if(d in h.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return h.sliceCaseReducersByType[d]=l,f},addMatcher(g,l){return h.sliceMatchers.push({matcher:g,reducer:l}),f},exposeAction(g,l){return h.actionCreators[g]=l,f},exposeCaseReducer(g,l){return h.sliceCaseReducersByName[g]=l,f}};p.forEach(g=>{const l=u[g],d={reducerName:g,type:getType(s,g),createNotation:typeof a.reducers=="function"};isAsyncThunkSliceReducerDefinition(l)?handleThunkCaseReducerDefinition(d,l,f,e):handleNormalReducerDefinition(d,l,f)});function E(){const[g={},l=[],d=void 0]=typeof a.extraReducers=="function"?executeReducerBuilderCallback(a.extraReducers):[a.extraReducers],_={...g,...h.sliceCaseReducersByType};return createReducer(a.initialState,A=>{for(let C in _)A.addCase(C,_[C]);for(let C of h.sliceMatchers)A.addMatcher(C.matcher,C.reducer);for(let C of l)A.addMatcher(C.matcher,C.reducer);d&&A.addDefaultCase(d)})}const m=g=>g,w=new Map,I=new WeakMap;let S;function T(g,l){return S||(S=E()),S(g,l)}function F(){return S||(S=E()),S.getInitialState()}function y(g,l=!1){function d(A){let C=A[g];return typeof C>"u"&&l&&(C=getOrInsertComputed(I,d,F)),C}function _(A=m){const C=getOrInsertComputed(w,l,()=>new WeakMap);return getOrInsertComputed(C,A,()=>{const L={};for(const[M,V]of Object.entries(a.selectors??{}))L[M]=wrapSelector(V,A,()=>getOrInsertComputed(I,A,F),l);return L})}return{reducerPath:g,getSelectors:_,get selectors(){return _(d)},selectSlice:d}}const b={name:s,reducer:T,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:F,...y(o),injectInto(g,{reducerPath:l,...d}={}){const _=l??o;return g.inject({reducerPath:_,reducer:T},d),{...b,...y(_,!0)}}};return b}}function wrapSelector(r,e,t,n){function a(s,...o){let u=e(s);return typeof u>"u"&&n&&(u=t()),r(u,...o)}return a.unwrapped=r,a}var createSlice=buildCreateSlice();function buildReducerCreators(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function handleNormalReducerDefinition({type:r,reducerName:e,createNotation:t},n,a){let s,o;if("reducer"in n){if(t&&!isCaseReducerWithPrepareDefinition(n))throw new Error(formatProdErrorMessage(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(r,s).exposeCaseReducer(e,s).exposeAction(e,o?createAction(r,o):createAction(r))}function isAsyncThunkSliceReducerDefinition(r){return r._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(r){return r._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:r,reducerName:e},t,n,a){if(!a)throw new Error(formatProdErrorMessage(18));const{payloadCreator:s,fulfilled:o,pending:u,rejected:p,settled:h,options:f}=t,E=a(r,s,f);n.exposeAction(e,E),o&&n.addCase(E.fulfilled,o),u&&n.addCase(E.pending,u),p&&n.addCase(E.rejected,p),h&&n.addMatcher(E.settled,h),n.exposeCaseReducer(e,{fulfilled:o||noop,pending:u||noop,rejected:p||noop,settled:h||noop})}function noop(){}function formatProdErrorMessage(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var KEY_PREFIX="persist:",FLUSH="persist/FLUSH",REHYDRATE="persist/REHYDRATE",PAUSE="persist/PAUSE",PERSIST="persist/PERSIST",PURGE="persist/PURGE",REGISTER="persist/REGISTER",DEFAULT_VERSION=-1;function _typeof(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(t){return typeof t}:_typeof=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(r)}function ownKeys$2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function _objectSpread$2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(t,!0).forEach(function(n){_defineProperty$2(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys$2(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _defineProperty$2(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function autoMergeLevel1(r,e,t,n){n.debug;var a=_objectSpread$2({},t);return r&&_typeof(r)==="object"&&Object.keys(r).forEach(function(s){s!=="_persist"&&e[s]===t[s]&&(a[s]=r[s])}),a}function createPersistoid(r){var e=r.blacklist||null,t=r.whitelist||null,n=r.transforms||[],a=r.throttle||0,s="".concat(r.keyPrefix!==void 0?r.keyPrefix:KEY_PREFIX).concat(r.key),o=r.storage,u;r.serialize===!1?u=function(l){return l}:typeof r.serialize=="function"?u=r.serialize:u=defaultSerialize;var p=r.writeFailHandler||null,h={},f={},E=[],m=null,w=null,I=function(l){Object.keys(l).forEach(function(d){F(d)&&h[d]!==l[d]&&E.indexOf(d)===-1&&E.push(d)}),Object.keys(h).forEach(function(d){l[d]===void 0&&F(d)&&E.indexOf(d)===-1&&h[d]!==void 0&&E.push(d)}),m===null&&(m=setInterval(S,a)),h=l};function S(){if(E.length===0){m&&clearInterval(m),m=null;return}var g=E.shift(),l=n.reduce(function(d,_){return _.in(d,g,h)},h[g]);if(l!==void 0)try{f[g]=u(l)}catch(d){console.error("redux-persist/createPersistoid: error serializing state",d)}else delete f[g];E.length===0&&T()}function T(){Object.keys(f).forEach(function(g){h[g]===void 0&&delete f[g]}),w=o.setItem(s,u(f)).catch(y)}function F(g){return!(t&&t.indexOf(g)===-1&&g!=="_persist"||e&&e.indexOf(g)!==-1)}function y(g){p&&p(g)}var b=function(){for(;E.length!==0;)S();return w||Promise.resolve()};return{update:I,flush:b}}function defaultSerialize(r){return JSON.stringify(r)}function getStoredState(r){var e=r.transforms||[],t="".concat(r.keyPrefix!==void 0?r.keyPrefix:KEY_PREFIX).concat(r.key),n=r.storage;r.debug;var a;return r.deserialize===!1?a=function(o){return o}:typeof r.deserialize=="function"?a=r.deserialize:a=defaultDeserialize,n.getItem(t).then(function(s){if(s)try{var o={},u=a(s);return Object.keys(u).forEach(function(p){o[p]=e.reduceRight(function(h,f){return f.out(h,p,u)},a(u[p]))}),o}catch(p){throw p}else return})}function defaultDeserialize(r){return JSON.parse(r)}function purgeStoredState(r){var e=r.storage,t="".concat(r.keyPrefix!==void 0?r.keyPrefix:KEY_PREFIX).concat(r.key);return e.removeItem(t,warnIfRemoveError)}function warnIfRemoveError(r){}function ownKeys$1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function _objectSpread$1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(t,!0).forEach(function(n){_defineProperty$1(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys$1(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _defineProperty$1(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _objectWithoutProperties(r,e){if(r==null)return{};var t=_objectWithoutPropertiesLoose(r,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function _objectWithoutPropertiesLoose(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}var DEFAULT_TIMEOUT=5e3;function persistReducer(r,e){var t=r.version!==void 0?r.version:DEFAULT_VERSION;r.debug;var n=r.stateReconciler===void 0?autoMergeLevel1:r.stateReconciler,a=r.getStoredState||getStoredState,s=r.timeout!==void 0?r.timeout:DEFAULT_TIMEOUT,o=null,u=!1,p=!0,h=function(E){return E._persist.rehydrated&&o&&!p&&o.update(E),E};return function(f,E){var m=f||{},w=m._persist,I=_objectWithoutProperties(m,["_persist"]),S=I;if(E.type===PERSIST){var T=!1,F=function(A,C){T||(E.rehydrate(r.key,A,C),T=!0)};if(s&&setTimeout(function(){!T&&F(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(r.key,'"')))},s),p=!1,o||(o=createPersistoid(r)),w)return _objectSpread$1({},e(S,E),{_persist:w});if(typeof E.rehydrate!="function"||typeof E.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return E.register(r.key),a(r).then(function(_){var A=r.migrate||function(C,L){return Promise.resolve(C)};A(_,t).then(function(C){F(C)},function(C){F(void 0,C)})},function(_){F(void 0,_)}),_objectSpread$1({},e(S,E),{_persist:{version:t,rehydrated:!1}})}else{if(E.type===PURGE)return u=!0,E.result(purgeStoredState(r)),_objectSpread$1({},e(S,E),{_persist:w});if(E.type===FLUSH)return E.result(o&&o.flush()),_objectSpread$1({},e(S,E),{_persist:w});if(E.type===PAUSE)p=!0;else if(E.type===REHYDRATE){if(u)return _objectSpread$1({},S,{_persist:_objectSpread$1({},w,{rehydrated:!0})});if(E.key===r.key){var y=e(S,E),b=E.payload,g=n!==!1&&b!==void 0?n(b,f,y,r):y,l=_objectSpread$1({},g,{_persist:_objectSpread$1({},w,{rehydrated:!0})});return h(l)}}}if(!w)return e(f,E);var d=e(S,E);return d===S?f:h(_objectSpread$1({},d,{_persist:w}))}}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(r){if(Symbol.iterator in Object(r)||Object.prototype.toString.call(r)==="[object Arguments]")return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r)){for(var e=0,t=new Array(r.length);e<r.length;e++)t[e]=r[e];return t}}function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(t,!0).forEach(function(n){_defineProperty(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _defineProperty(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var initialState$b={registry:[],bootstrapped:!1},persistorReducer=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:initialState$b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case REGISTER:return _objectSpread({},e,{registry:[].concat(_toConsumableArray(e.registry),[t.key])});case REHYDRATE:var n=e.registry.indexOf(t.key),a=_toConsumableArray(e.registry);return a.splice(n,1),_objectSpread({},e,{registry:a,bootstrapped:a.length===0});default:return e}};function persistStore(r,e,t){var n=createStore(persistorReducer,initialState$b,void 0),a=function(p){n.dispatch({type:REGISTER,key:p})},s=function(p,h,f){var E={type:REHYDRATE,payload:h,err:f,key:p};r.dispatch(E),n.dispatch(E)},o=_objectSpread({},n,{purge:function(){var p=[];return r.dispatch({type:PURGE,result:function(f){p.push(f)}}),Promise.all(p)},flush:function(){var p=[];return r.dispatch({type:FLUSH,result:function(f){p.push(f)}}),Promise.all(p)},pause:function(){r.dispatch({type:PAUSE})},persist:function(){r.dispatch({type:PERSIST,register:a,rehydrate:s})}});return o.persist(),o}var storage$2={},createWebStorage={},getStorage$1={},hasRequiredGetStorage;function requireGetStorage(){if(hasRequiredGetStorage)return getStorage$1;hasRequiredGetStorage=1,getStorage$1.__esModule=!0,getStorage$1.default=a;function r(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(u){return typeof u}:r=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},r(s)}function e(){}var t={getItem:e,setItem:e,removeItem:e};function n(s){if((typeof self>"u"?"undefined":r(self))!=="object"||!(s in self))return!1;try{var o=self[s],u="redux-persist ".concat(s," test");o.setItem(u,"test"),o.getItem(u),o.removeItem(u)}catch{return!1}return!0}function a(s){var o="".concat(s,"Storage");return n(o)?self[o]:t}return getStorage$1}var hasRequiredCreateWebStorage;function requireCreateWebStorage(){if(hasRequiredCreateWebStorage)return createWebStorage;hasRequiredCreateWebStorage=1,createWebStorage.__esModule=!0,createWebStorage.default=t;var r=e(requireGetStorage());function e(n){return n&&n.__esModule?n:{default:n}}function t(n){var a=(0,r.default)(n);return{getItem:function(o){return new Promise(function(u,p){u(a.getItem(o))})},setItem:function(o,u){return new Promise(function(p,h){p(a.setItem(o,u))})},removeItem:function(o){return new Promise(function(u,p){u(a.removeItem(o))})}}}return createWebStorage}var hasRequiredStorage;function requireStorage(){if(hasRequiredStorage)return storage$2;hasRequiredStorage=1,storage$2.__esModule=!0,storage$2.default=void 0;var r=e(requireCreateWebStorage());function e(n){return n&&n.__esModule?n:{default:n}}var t=(0,r.default)("local");return storage$2.default=t,storage$2}var storageExports=requireStorage();const storage$1=getDefaultExportFromCjs(storageExports);var papaparse_minExports=requirePapaparse_min();const Papa=getDefaultExportFromCjs(papaparse_minExports),DEFAULT_PRODUCT_PRICES=[{sku:"6L-BCRX-3KUF",description:"Labdhi Ashtagandha Chandan Tilak Paste, Pack of 2",costPrice:40},{sku:"KK-X2KQ-2DRV",description:"Kashi Ashtagandh Chandan Powder 500 Gm, 100% Pure And Organic, For Spiritual Ceremonies And Daily Pooja Yellow",costPrice:72},{sku:"VO-DG2M-QSM8",description:"Bhojpatra Sheet Original, Bhoj Pattar, 5 Pieces, 13 x 10 cm, for Yantra and Mantra Writing",costPrice:25},{sku:"IT-03N3-4B25",description:"Bhojpatra Sheet Original, Bhoj Pattar, 5 Pieces, 12 x 18 cm, for Yantra and Mantra Writing",costPrice:25},{sku:"SSGKKG001011",description:"Yelook Rakt Gunja, Goamti Chakra, Kamal Gatta, Kodi - 11 Pieces for Pooja, Laxmi Pooja, Puja, Diwali Pooja",costPrice:50},{sku:"SSKG0011000",description:"Sacred Sutra Kamal Gatta Seed, Water Lotus Flower Plant seeds (25 Grams) for Pooja, Laxmi Havan, Home Gardening, Live Water plant for Pond, Rosary of",costPrice:12},{sku:"SSKG0011000",description:"KTC Kamal Gatta 1kg",costPrice:260},{sku:"CM-CRGW-X5BM",description:"Bhojpatra Sheet Original, Bhoj Pattar (5 pieces), Bhoj Patra for Yantra and Mantra Writing (12 * 18 cms) Multicolour",costPrice:25},{sku:"SSHF001001",description:"Sacred Sutra Hanuman Ji Flag for Home and Temple, Red and Yellow, 61 x 111 cm",costPrice:35},{sku:"L2-89JP-QYM0",description:"Govinda Elite Kashi Tulsi Ashtagandha Pure Chandan Tilak Powder (500)",costPrice:72},{sku:"SSSSY001001",description:"Sacred Sutra Shri Yantra/Shree Yantra- Powerful Yantra for Wealth, Prosperity, and Spiritual Growth | 3x3 Inch",costPrice:16},{sku:"SSWK001021",description:"WHITE KAUDI 21 PCS",costPrice:47},{sku:"SS003005",description:"BHOJPATRA BIG x 5",costPrice:25},{sku:"SS001011",description:"BHOJPATRA BIG x 5",costPrice:25},{sku:"SSBP001010",description:"BHOJPATRA SMALL x 10",costPrice:43},{sku:"SSBP001012",description:"BHOJPATRA SMALL x 12",costPrice:50},{sku:"SSBP002003",description:"BHOJPATRA SMALL x 3",costPrice:17},{sku:"SSBP001003",description:"BHOJPATRA SMALL x 3",costPrice:17},{sku:"SSBP003005",description:"BHOJPATRA SMALL x 5",costPrice:25},{sku:"SSBP003002",description:"BHOJPATRA SMALL x 5",costPrice:25},{sku:"SSBP002002",description:"BHOJPATRA SMALL x 5",costPrice:25},{sku:"SSBP002005",description:"BHOJPATRA SMALL x 5",costPrice:25},{sku:"SSBP001005",description:"BHOJPATRA SMALL x 5",costPrice:25},{sku:"SSBK004011",description:"BLACK KAUDI 11 PCS",costPrice:60},{sku:"SSBK001011",description:"BLACK KAUDI 11 PCS",costPrice:60},{sku:"SSK003002",description:"BLACK KAUDI 11 PCS",costPrice:60},{sku:"SSBK003011",description:"BLACK KAUDI 11 PCS",costPrice:60},{sku:"SSBC001100",description:"Bheemseni CAMPHOR 100GM",costPrice:130},{sku:"SSCP001002",description:"CHANDAN PASTE 1 PC",costPrice:19},{sku:"SSACP001001",description:"CHANDAN PASTE 2 PC",costPrice:38},{sku:"SSAC003125",description:"CHANDAN POWDER 125GM",costPrice:28},{sku:"SSAC001125",description:"CHANDAN POWDER 125GM",costPrice:28},{sku:"SSAC004125",description:"CHANDAN POWDER 125GM",costPrice:28},{sku:"SSAC002125",description:"CHANDAN POWDER 125GM",costPrice:28},{sku:"SSSC001500",description:"CHANDAN POWDER 250GM",costPrice:47},{sku:"SSAC001250",description:"CHANDAN POWDER 250GM",costPrice:47},{sku:"SSAC002500",description:"CHANDAN POWDER 500GM",costPrice:72},{sku:"SSAC001500",description:"CHANDAN POWDER 500GM",costPrice:72},{sku:"JMGAC001500",description:"CHANDAN POWDER 500GM",costPrice:72},{sku:"SSAC001060",description:"CHANDAN POWDER 60GM",costPrice:16},{sku:"SSEN001002",description:"EKANSH NARIYAL 2 PCS",costPrice:26},{sku:"SSHF001002",description:"FLAG LARGE",costPrice:62},{sku:"SSHF001001",description:"FLAG MEDIUM",costPrice:30},{sku:"SSHF001003",description:"FLAG SMALL",costPrice:12},{sku:"SSGC001108",description:"GOMTI CHAKRA 108 PCS",costPrice:168},{sku:"SSGC001011",description:"GOMTI CHAKRA 11 PCS",costPrice:20},{sku:"SSGC002011",description:"GOMTI CHAKRA 11 PCS",costPrice:20},{sku:"SSGC003011",description:"GOMTI CHAKRA 11 PCS",costPrice:20},{sku:"SSGC002021",description:"GOMTI CHAKRA 21 PCS",costPrice:35},{sku:"SSGC003021",description:"GOMTI CHAKRA 21 PCS",costPrice:35},{sku:"SSGC",description:"GOMTI CHAKRA 21 PCS",costPrice:35},{sku:"SSGC001021",description:"GOMTI CHAKRA 21 PCS",costPrice:35},{sku:"SSGC001030",description:"GOMTI CHAKRA 30 PCS",costPrice:50},{sku:"SSGC004005",description:"GOMTI CHAKRA 5 PCS",costPrice:12},{sku:"SSGC001051",description:"GOMTI CHAKRA 51PCS",costPrice:85},{sku:"SSKY001003",description:"HARCOG KUBER 3iin",costPrice:14},{sku:"SSHS001400",description:"HAWAN SAMAGRI 400GM",costPrice:40},{sku:"SSGN001003",description:"HORSE NAIL",costPrice:22},{sku:"SSGN001001",description:"HORSE NAIL",costPrice:22},{sku:"SSGN001002",description:"HORSE NAIL",costPrice:22},{sku:"SSHS002002",description:"HORSE NAIL",costPrice:22},{sku:"SSHS001002",description:"HORSE NAIL",costPrice:22},{sku:"SSKG001108",description:"KAMAL GATTA MALA",costPrice:43},{sku:"SSKG002108",description:"KAMAL GATTA MALA",costPrice:43},{sku:"SSKM001001",description:"KAMAL GATTA MALA",costPrice:43},{sku:"SSKG002001",description:"KAMAL GATTA SEED 50PCS",costPrice:20},{sku:"SSGY001002",description:"SHREE YANTRA 6in",costPrice:10},{sku:"SSTM001002",description:"TULSI MALA",costPrice:50},{sku:"SSK004001",description:"WHITE KAUDI 51 PCS",costPrice:110},{sku:"SSKD001011",description:"YELLOW KAUDI 11 PCS",costPrice:25},{sku:"SSYK001021",description:"YELLOW KAUDI 21 PCS",costPrice:45},{sku:"SSYK002021",description:"YELLOW KAUDI 21 PCS",costPrice:45},{sku:"SSYC001021",description:"YELLOW KAUDI 21 PCS",costPrice:45},{sku:"SSKGK001011",description:"YELLOW KAUDI 11 PCS",costPrice:25},{sku:"SSBM001001",description:"TULSI MALA",costPrice:50},{sku:"SSRM001001",description:"RUDRAKSHA MALA",costPrice:60},{sku:"SSSY003001",description:"MERU SHREE YANTRA",costPrice:30},{sku:"SSPS002005",description:"BHOG THALI",costPrice:70},{sku:"SSSSY001001",description:"FRAMED YANTRA",costPrice:70},{sku:"SSCM004001",description:"CHOPAD",costPrice:90},{sku:"SSKY002002",description:"FRAMED YANTRA",costPrice:70},{sku:"SSSH001002",description:"FRAMED YANTRA",costPrice:70},{sku:"SSK002001",description:"WHITE KAUDI 21 PCS",costPrice:45},{sku:"SSLN001011",description:"SHREE PHAL",costPrice:70},{sku:"SSRM001108",description:"RUDRAKSHA MALA",costPrice:60},{sku:"SSBP010005",description:"Bhoj Patra 5",costPrice:25},{sku:"SSKG0011000",description:"Kamal Gatta Seeds 1 KG",costPrice:260},{sku:"SSGG0101000",description:"Guggal 1 KG",costPrice:100},{sku:"SSAC004250",description:"Chanan Powder 250g",costPrice:45},{sku:"SSHF003001",description:"Hanuman Flag Big",costPrice:60},{sku:"SSSY005001",description:"SHREE YANTRA 6in",costPrice:10},{sku:"SSACP002001",description:"CHANDAN PASTE 2 PC",costPrice:37},{sku:"SSGD001500",description:"Guggal 500g",costPrice:50},{sku:"SSYK012022",description:"Yellow Kaudi 22",costPrice:47},{sku:"SSGD001300",description:"Guggal 300g",costPrice:30},{sku:"SSNS001001",description:"Navagrah Samidha",costPrice:22},{sku:"SSKGM009108",description:"Kamal Gatta Mala",costPrice:43},{sku:"SSKGS001150",description:"Kamal Gatta Seeds 150g",costPrice:50},{sku:"SSGC004021",description:"Gomti Chakra 21",costPrice:35},{sku:"SSGG0051000",description:"Guggal 1 Kg",costPrice:100},{sku:"SSBP009005",description:"Bhoj patra 5",costPrice:25},{sku:"SSYK003021",description:"Yellow Kaudi 21",costPrice:45},{sku:"SSKGM005108",description:"Kamal Gatta Mala",costPrice:43},{sku:"SSHF004002",description:"Hanuman Flag Medium Orange",costPrice:35},{sku:"SSSY006001",description:"SHREE YANTRA 6in",costPrice:10},{sku:"SSBPL001005",description:"Bhoj Patra Large 5",costPrice:25},{sku:"SSSK001100",description:"Saraswati Camphor 100g",costPrice:85},{sku:"SSBK001250",description:"Normal Camphor 250g",costPrice:300},{sku:"SSGD001250",description:"Guggla 250 g",costPrice:27},{sku:"SSGG006100",description:"Guggal 100g",costPrice:15},{sku:"SSHP002001",description:"Pataka large",costPrice:80},{sku:"SSGC006011",description:"Gomti Chakra 11",costPrice:20},{sku:"SSKGM004108",description:"Kamal Gatta Mala",costPrice:43},{sku:"SSKG001250",description:"Kamal Gatta Seeds 250g",costPrice:70},{sku:"SSKGM008108",description:"Kamal Gatta Mala",costPrice:43},{sku:"SSGC007021",description:"Gomti Chakra 21",costPrice:35},{sku:"SSAC004500",description:"Chandan Powder 500g",costPrice:72},{sku:"SSEN001003",description:"Ekakshi Nariyal 1",costPrice:15},{sku:"SSGN001005",description:"HORSE NAIL",costPrice:22},{sku:"SSBP006008",description:"Bhoj Patra 8",costPrice:35},{sku:"SSGN001004",description:"HORSE NAIL",costPrice:22},{sku:"SSKG001006",description:"6 Kamal Gatta Seed with bag",costPrice:15},{sku:"SSKKG002011",description:"Kaudi Kamal Gatta Gomti Chakra 11 each",costPrice:45},{sku:"SSKMG001001",description:"Kamal Gatta Mala and Gomukhi",costPrice:55},{sku:"SSAC0021000",description:"Chandan Powder 1 kg",costPrice:140},{sku:"SSGC001012",description:"Gomti Chakra 12",costPrice:22},{sku:"SSYK008051",description:"Yellow Kaudi 51",costPrice:100},{sku:"SSYK009021",description:"Yellow Kaudi 21",costPrice:45},{sku:"SSKY004001",description:"Kuber Yantra 6in",costPrice:10},{sku:"SSAC0011000",description:"Chandan Powder 1 KG",costPrice:140},{sku:"SSHF002001",description:"Hanuman Flag Large",costPrice:70},{sku:"KGM001001",description:"Kamal Gatta Mala",costPrice:43},{sku:"SSHF002002",description:"Hanuman Flag Medium",costPrice:45},{sku:"SSAC005125",description:"Chandan Powder 125g",costPrice:27},{sku:"SSHS002400",description:"Havan Samagri",costPrice:40},{sku:"SSHM001108",description:"Haldi Mala",costPrice:50},{sku:"SSKGM010108",description:"Kamal Gatta Mala",costPrice:43},{sku:"SSGN006001",description:"Horse Shoe Nail",costPrice:22}];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3,DEFAULT_MIN_SLEEP_TIME_MILLIS=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(e,t,n=0){super(prependCode(e),`Firebase Storage: ${t} (${prependCode(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(r){return"storage/"+r}function unknown(){const r="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,r)}function objectNotFound(r){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function quotaExceeded(r){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,r)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(r){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(r){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+r+"'.")}function invalidDefaultBucket(r){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function serverFileWrongSize(){return new StorageError(StorageErrorCode.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(r){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(r){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,r)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(r){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(r,e){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function internalError(r){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Location.makeFromUrl(e,t)}catch{return new Location(e,"")}if(n.path==="")return n;throw invalidDefaultBucket(e)}static makeFromUrl(e,t){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(g){g.path.charAt(g.path.length-1)==="/"&&(g.path_=g.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+a+o,"i"),p={bucket:1,path:3};function h(g){g.path_=decodeURIComponent(g.path)}const f="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${f}/b/${a}/o${m}`,"i"),I={bucket:1,path:3},S=t===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",F=new RegExp(`^https?://${S}/${a}/${T}`,"i"),b=[{regex:u,indices:p,postModify:s},{regex:w,indices:I,postModify:h},{regex:F,indices:{bucket:1,path:2},postModify:h}];for(let g=0;g<b.length;g++){const l=b[g],d=l.regex.exec(e);if(d){const _=d[l.indices.bucket];let A=d[l.indices.path];A||(A=""),n=new Location(_,A),l.postModify(n);break}}if(n==null)throw invalidUrl(e);return n}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(r,e,t){let n=1,a=null,s=null,o=!1,u=0;function p(){return u===2}let h=!1;function f(...T){h||(h=!0,e.apply(null,T))}function E(T){a=setTimeout(()=>{a=null,r(w,p())},T)}function m(){s&&clearTimeout(s)}function w(T,...F){if(h){m();return}if(T){m(),f.call(null,T,...F);return}if(p()||o){m(),f.call(null,T,...F);return}n<64&&(n*=2);let b;u===1?(u=2,b=0):b=(n+Math.random())*1e3,E(b)}let I=!1;function S(T){I||(I=!0,m(),!h&&(a!==null?(T||(u=2),clearTimeout(a),E(0)):T||(u=1)))}return E(0),s=setTimeout(()=>{o=!0,S(!0)},t),S}function stop(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(r){return r!==void 0}function isFunction(r){return typeof r=="function"}function isNonArrayObject(r){return typeof r=="object"&&!Array.isArray(r)}function isString(r){return typeof r=="string"||r instanceof String}function isNativeBlob(r){return isNativeBlobDefined()&&r instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(r,e,t,n){if(n<e)throw invalidArgument(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw invalidArgument(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function makeQueryString(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const a=e(n)+"="+e(r[n]);t=t+a+"&"}return t=t.slice(0,-1),t}var ErrorCode;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,s=e.indexOf(r)!==-1;return t||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(e,t,n,a,s,o,u,p,h,f,E,m=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=p,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=E,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,I)=>{this.resolve_=w,this.reject_=I,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new RequestEndStatus(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=u=>{const p=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const u=s.getErrorCode()===ErrorCode.NO_ERROR,p=s.getStatus();if(!u||isRetryStatusCode(p,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===ErrorCode.ABORT;n(!1,new RequestEndStatus(!1,null,f));return}const h=this.successCodes_.indexOf(p)!==-1;n(!0,new RequestEndStatus(h,s))})},t=(n,a)=>{const s=this.resolve_,o=this.reject_,u=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(u,u.getResponse());isJustDef(p)?s(p):s()}catch(p){o(p)}else if(u!==null){const p=unknown();p.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,p)):o(p)}else if(a.canceled){const p=this.appDelete_?appDeleted():canceled();o(p)}else{const p=retryLimitExceeded();o(p)}};this.canceled_?t(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function addAuthHeader_(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function addVersionHeader_(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(r,e){e&&(r["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function makeRequest(r,e,t,n,a,s,o=!0){const u=makeQueryString(r.urlParams),p=r.url+u,h=Object.assign({},r.headers);return addGmpidHeader_(h,e),addAuthHeader_(h,t),addVersionHeader_(h,s),addAppCheckHeader_(h,n),new NetworkRequest(p,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...r){const e=getBlobBuilder();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(isNativeBlobDefined())return new Blob(r);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(r){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(e,t){this.data=e,this.contentType=t||null}}function dataFromString(r,e){switch(r){case StringFormat.RAW:return new StringData(utf8Bytes_(e));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(r,e));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(e),dataURLContentType_(e))}throw unknown()}function utf8Bytes_(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=n,o=r.charCodeAt(++t);n=65536|(s&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function percentEncodedBytes_(r){let e;try{e=decodeURIComponent(r)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(e)}function base64Bytes_(r,e){switch(r){case StringFormat.BASE64:{const a=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(a||s)throw invalidFormat(r,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const a=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(a||s)throw invalidFormat(r,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=decodeBase64(e)}catch(a){throw a.message.includes("polyfill")?a:invalidFormat(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}class DataURLParts{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=endsWith(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function dataURLBytes_(r){const e=new DataURLParts(r);return e.base64?base64Bytes_(StringFormat.BASE64,e.rest):percentEncodedBytes_(e.rest)}function dataURLContentType_(r){return new DataURLParts(r).contentType}function endsWith(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(e,t){let n=0,a="";isNativeBlob(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(isNativeBlob(this.data_)){const n=this.data_,a=sliceBlob(n,e,t);return a===null?null:new FbsBlob(a)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new FbsBlob(n,!0)}}static getBlob(...e){if(isNativeBlobDefined()){const t=e.map(n=>n instanceof FbsBlob?n.data_:n);return new FbsBlob(getBlob$1.apply(null,t))}else{const t=e.map(o=>isString(o)?dataFromString(StringFormat.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return t.forEach(o=>{for(let u=0;u<o.length;u++)a[s++]=o[u]}),new FbsBlob(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(r){let e;try{e=JSON.parse(r)}catch{return null}return isNonArrayObject(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function child(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function lastComponent(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(r,e){return e}class Mapping{constructor(e,t,n,a){this.server=e,this.local=t||e,this.writable=!!n,this.xform=a||noXform_}}let mappings_=null;function xformPath(r){return!isString(r)||r.length<2?r:lastComponent(r)}function getMappings(){if(mappings_)return mappings_;const r=[];r.push(new Mapping("bucket")),r.push(new Mapping("generation")),r.push(new Mapping("metageneration")),r.push(new Mapping("name","fullPath",!0));function e(s,o){return xformPath(o)}const t=new Mapping("name");t.xform=e,r.push(t);function n(s,o){return o!==void 0?Number(o):o}const a=new Mapping("size");return a.xform=n,r.push(a),r.push(new Mapping("timeCreated")),r.push(new Mapping("updated")),r.push(new Mapping("md5Hash",null,!0)),r.push(new Mapping("cacheControl",null,!0)),r.push(new Mapping("contentDisposition",null,!0)),r.push(new Mapping("contentEncoding",null,!0)),r.push(new Mapping("contentLanguage",null,!0)),r.push(new Mapping("contentType",null,!0)),r.push(new Mapping("metadata","customMetadata",!0)),mappings_=r,mappings_}function addRef(r,e){function t(){const n=r.bucket,a=r.fullPath,s=new Location(n,a);return e._makeStorageReference(s)}Object.defineProperty(r,"ref",{get:t})}function fromResource(r,e,t){const n={};n.type="file";const a=t.length;for(let s=0;s<a;s++){const o=t[s];n[o.local]=o.xform(n,e[o.server])}return addRef(n,r),n}function fromResourceString(r,e,t){const n=jsonObjectOrNull(e);return n===null?null:fromResource(r,n,t)}function downloadUrlFromResourceString(r,e,t,n){const a=jsonObjectOrNull(e);if(a===null||!isString(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const f=r.bucket,E=r.fullPath,m="/b/"+o(f)+"/o/"+o(E),w=makeUrl(m,t,n),I=makeQueryString({alt:"media",token:h});return w+I})[0]}function toResourceString(r,e){const t={},n=e.length;for(let a=0;a<n;a++){const s=e[a];s.writable&&(t[s.server]=r[s.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PREFIXES_KEY="prefixes",ITEMS_KEY="items";function fromBackendResponse(r,e,t){const n={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[PREFIXES_KEY])for(const a of t[PREFIXES_KEY]){const s=a.replace(/\/$/,""),o=r._makeStorageReference(new Location(e,s));n.prefixes.push(o)}if(t[ITEMS_KEY])for(const a of t[ITEMS_KEY]){const s=r._makeStorageReference(new Location(e,a.name));n.items.push(s)}return n}function fromResponseString(r,e,t){const n=jsonObjectOrNull(t);return n===null?null:fromBackendResponse(r,e,n)}class RequestInfo{constructor(e,t,n,a){this.url=e,this.method=t,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(r){if(!r)throw unknown()}function metadataHandler(r,e){function t(n,a){const s=fromResourceString(r,a,e);return handlerCheck(s!==null),s}return t}function listHandler(r,e){function t(n,a){const s=fromResponseString(r,e,a);return handlerCheck(s!==null),s}return t}function downloadUrlHandler(r,e){function t(n,a){const s=fromResourceString(r,a,e);return handlerCheck(s!==null),downloadUrlFromResourceString(s,a,r.host,r._protocol)}return t}function sharedErrorHandler(r){function e(t,n){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=unauthorizedApp():a=unauthenticated():t.getStatus()===402?a=quotaExceeded(r.bucket):t.getStatus()===403?a=unauthorized(r.path):a=n,a.status=t.getStatus(),a.serverResponse=n.serverResponse,a}return e}function objectErrorHandler(r){const e=sharedErrorHandler(r);function t(n,a){let s=e(n,a);return n.getStatus()===404&&(s=objectNotFound(r.path)),s.serverResponse=a.serverResponse,s}return t}function getMetadata$2(r,e,t){const n=e.fullServerUrl(),a=makeUrl(n,r.host,r._protocol),s="GET",o=r.maxOperationRetryTime,u=new RequestInfo(a,s,metadataHandler(r,t),o);return u.errorHandler=objectErrorHandler(e),u}function list$2(r,e,t,n,a){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t.length>0&&(s.delimiter=t),n&&(s.pageToken=n),a&&(s.maxResults=a);const o=e.bucketOnlyServerUrl(),u=makeUrl(o,r.host,r._protocol),p="GET",h=r.maxOperationRetryTime,f=new RequestInfo(u,p,listHandler(r,e.bucket),h);return f.urlParams=s,f.errorHandler=sharedErrorHandler(e),f}function getDownloadUrl(r,e,t){const n=e.fullServerUrl(),a=makeUrl(n,r.host,r._protocol),s="GET",o=r.maxOperationRetryTime,u=new RequestInfo(a,s,downloadUrlHandler(r,t),o);return u.errorHandler=objectErrorHandler(e),u}function updateMetadata$2(r,e,t,n){const a=e.fullServerUrl(),s=makeUrl(a,r.host,r._protocol),o="PATCH",u=toResourceString(t,n),p={"Content-Type":"application/json; charset=utf-8"},h=r.maxOperationRetryTime,f=new RequestInfo(s,o,metadataHandler(r,n),h);return f.headers=p,f.body=u,f.errorHandler=objectErrorHandler(e),f}function deleteObject$2(r,e){const t=e.fullServerUrl(),n=makeUrl(t,r.host,r._protocol),a="DELETE",s=r.maxOperationRetryTime;function o(p,h){}const u=new RequestInfo(n,a,o,s);return u.successCodes=[200,204],u.errorHandler=objectErrorHandler(e),u}function determineContentType_(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function metadataForUpload_(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=determineContentType_(null,e)),n}function multipartUpload(r,e,t,n,a){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function u(){let b="";for(let g=0;g<2;g++)b=b+Math.random().toString().slice(2);return b}const p=u();o["Content-Type"]="multipart/related; boundary="+p;const h=metadataForUpload_(e,n,a),f=toResourceString(h,t),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+p+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+p+"--",w=FbsBlob.getBlob(E,n,m);if(w===null)throw cannotSliceBlob();const I={name:h.fullPath},S=makeUrl(s,r.host,r._protocol),T="POST",F=r.maxUploadRetryTime,y=new RequestInfo(S,T,metadataHandler(r,t),F);return y.urlParams=I,y.headers=o,y.body=w.uploadData(),y.errorHandler=sharedErrorHandler(e),y}class ResumableUploadStatus{constructor(e,t,n,a){this.current=e,this.total=t,this.finalized=!!n,this.metadata=a||null}}function checkResumeHeader_(r,e){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch{handlerCheck(!1)}return handlerCheck(!!t&&(e||["active"]).indexOf(t)!==-1),t}function createResumableUpload(r,e,t,n,a){const s=e.bucketOnlyServerUrl(),o=metadataForUpload_(e,n,a),u={name:o.fullPath},p=makeUrl(s,r.host,r._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},E=toResourceString(o,t),m=r.maxUploadRetryTime;function w(S){checkResumeHeader_(S);let T;try{T=S.getResponseHeader("X-Goog-Upload-URL")}catch{handlerCheck(!1)}return handlerCheck(isString(T)),T}const I=new RequestInfo(p,h,w,m);return I.urlParams=u,I.headers=f,I.body=E,I.errorHandler=sharedErrorHandler(e),I}function getResumableUploadStatus(r,e,t,n){const a={"X-Goog-Upload-Command":"query"};function s(h){const f=checkResumeHeader_(h,["active","final"]);let E=null;try{E=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{handlerCheck(!1)}E||handlerCheck(!1);const m=Number(E);return handlerCheck(!isNaN(m)),new ResumableUploadStatus(m,n.size(),f==="final")}const o="POST",u=r.maxUploadRetryTime,p=new RequestInfo(t,o,s,u);return p.headers=a,p.errorHandler=sharedErrorHandler(e),p}const RESUMABLE_UPLOAD_CHUNK_SIZE=256*1024;function continueResumableUpload(r,e,t,n,a,s,o,u){const p=new ResumableUploadStatus(0,0);if(o?(p.current=o.current,p.total=o.total):(p.current=0,p.total=n.size()),n.size()!==p.total)throw serverFileWrongSize();const h=p.total-p.current;let f=h;a>0&&(f=Math.min(f,a));const E=p.current,m=E+f;let w="";f===0?w="finalize":h===f?w="upload, finalize":w="upload";const I={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${p.current}`},S=n.slice(E,m);if(S===null)throw cannotSliceBlob();function T(g,l){const d=checkResumeHeader_(g,["active","final"]),_=p.current+f,A=n.size();let C;return d==="final"?C=metadataHandler(e,s)(g,l):C=null,new ResumableUploadStatus(_,A,d==="final",C)}const F="POST",y=e.maxUploadRetryTime,b=new RequestInfo(t,F,T,y);return b.headers=I,b.body=S.uploadData(),b.progressCallback=u||null,b.errorHandler=sharedErrorHandler(r),b}const TaskState={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function taskStateFromInternalTaskState(r){switch(r){case"running":case"pausing":case"canceling":return TaskState.RUNNING;case"paused":return TaskState.PAUSED;case"success":return TaskState.SUCCESS;case"canceled":return TaskState.CANCELED;case"error":return TaskState.ERROR;default:return TaskState.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Observer{constructor(e,t,n){if(isFunction(e)||t!=null||n!=null)this.next=e,this.error=t??void 0,this.complete=n??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function async(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,a){if(this.sent_)throw internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UploadTask{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=getMappings(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(StorageErrorCode.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(isRetryStatusCode(a.status,[]))if(s)a=retryLimitExceeded();else{this.sleepTime=Math.max(this.sleepTime*2,DEFAULT_MIN_SLEEP_TIME_MILLIS),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(StorageErrorCode.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const n=createResumableUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,newTextConnection,e,t);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const a=getResumableUploadStatus(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(a,newTextConnection,t,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier,t=new ResumableUploadStatus(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let o;try{o=continueResumableUpload(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){this._error=p,this._transition("error");return}const u=this._ref.storage._makeRequest(o,newTextConnection,a,s,!1);this._request=u,u.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=getMetadata$2(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,newTextConnection,e,t);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=multipartUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,newTextConnection,e,t);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=canceled(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=taskStateFromInternalTaskState(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,a){const s=new Observer(t||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(taskStateFromInternalTaskState(this._state)){case TaskState.SUCCESS:async(this._resolve.bind(null,this.snapshot))();break;case TaskState.CANCELED:case TaskState.ERROR:const t=this._reject;async(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(taskStateFromInternalTaskState(this._state)){case TaskState.RUNNING:case TaskState.PAUSED:e.next&&async(e.next.bind(e,this.snapshot))();break;case TaskState.SUCCESS:e.complete&&async(e.complete.bind(e))();break;case TaskState.CANCELED:case TaskState.ERROR:e.error&&async(e.error.bind(e,this._error))();break;default:e.error&&async(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,t){this._service=e,t instanceof Location?this._location=t:this._location=Location.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Reference(e,t)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const t=new Location(this._location.bucket,e);return new Reference(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function uploadBytesResumable$1(r,e,t){return r._throwIfRoot("uploadBytesResumable"),new UploadTask(r,new FbsBlob(e),t)}function listAll$1(r){const e={prefixes:[],items:[]};return listAllHelper(r,e).then(()=>e)}async function listAllHelper(r,e,t){const a=await list$1(r,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),a.nextPageToken!=null&&await listAllHelper(r,e,a.nextPageToken)}function list$1(r,e){e!=null&&typeof e.maxResults=="number"&&validateNumber("options.maxResults",1,1e3,e.maxResults);const t=e||{},n=list$2(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(n,newTextConnection)}function getMetadata$1(r){r._throwIfRoot("getMetadata");const e=getMetadata$2(r.storage,r._location,getMappings());return r.storage.makeRequestWithTokens(e,newTextConnection)}function updateMetadata$1(r,e){r._throwIfRoot("updateMetadata");const t=updateMetadata$2(r.storage,r._location,e,getMappings());return r.storage.makeRequestWithTokens(t,newTextConnection)}function getDownloadURL$1(r){r._throwIfRoot("getDownloadURL");const e=getDownloadUrl(r.storage,r._location,getMappings());return r.storage.makeRequestWithTokens(e,newTextConnection).then(t=>{if(t===null)throw noDownloadURL();return t})}function deleteObject$1(r){r._throwIfRoot("deleteObject");const e=deleteObject$2(r.storage,r._location);return r.storage.makeRequestWithTokens(e,newTextConnection)}function _getChild$1(r,e){const t=child(r._location.path,e),n=new Location(r._location.bucket,t);return new Reference(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(r){return/^[A-Za-z]+:\/\//.test(r)}function refFromURL(r,e){return new Reference(r,e)}function refFromPath(r,e){if(r instanceof FirebaseStorageImpl){const t=r;if(t._bucket==null)throw noDefaultBucket();const n=new Reference(t,t._bucket);return e!=null?refFromPath(n,e):n}else return e!==void 0?_getChild$1(r,e):r}function ref$1(r,e){if(e&&isUrl(e)){if(r instanceof FirebaseStorageImpl)return refFromURL(r,e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(r,e)}function extractBucket(r,e){const t=e==null?void 0:e[CONFIG_STORAGE_BUCKET_KEY];return t==null?null:Location.makeFromBucketSpec(t,r)}function connectStorageEmulator$1(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:a}=n;a&&(r._overrideAuthToken=typeof a=="string"?a:createMockUserToken(a,r.app.options.projectId))}class FirebaseStorageImpl{constructor(e,t,n,a,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,a!=null?this._bucket=Location.makeFromBucketSpec(a,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,t,n,a,s=!0){if(this._deleted)return new FailRequest(appDeleted());{const o=makeRequest(e,this._appId,n,a,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,a).getPromise()}}const name="@firebase/storage",version="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytesResumable(r,e,t){return r=getModularInstance(r),uploadBytesResumable$1(r,e,t)}function getMetadata(r){return r=getModularInstance(r),getMetadata$1(r)}function updateMetadata(r,e){return r=getModularInstance(r),updateMetadata$1(r,e)}function listAll(r){return r=getModularInstance(r),listAll$1(r)}function getDownloadURL(r){return r=getModularInstance(r),getDownloadURL$1(r)}function deleteObject(r){return r=getModularInstance(r),deleteObject$1(r)}function ref(r,e){return r=getModularInstance(r),ref$1(r,e)}function getStorage(r=getApp(),e){r=getModularInstance(r);const n=_getProvider(r,STORAGE_TYPE).getImmediate({identifier:e}),a=getDefaultEmulatorHostnameAndPort("storage");return a&&connectStorageEmulator(n,...a),n}function connectStorageEmulator(r,e,t,n={}){connectStorageEmulator$1(r,e,t,n)}function factory(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new FirebaseStorageImpl(t,n,a,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version,""),registerVersion(name,version,"esm2017")}registerStorage();const firebaseConfig={apiKey:"AIzaSyCDgtC4qaL0cqSjEu7GS4CkTHtneuoz_TI",authDomain:"sacred-sutra.firebaseapp.com",projectId:"sacred-sutra",storageBucket:"sacred-sutra.firebasestorage.app",messagingSenderId:"676199421158",appId:"1:676199421158:web:ed2e9164f94a2e51165727",measurementId:"test-measurement-id"};let app,auth,db,storage;app=initializeApp(firebaseConfig),auth=getAuth(app),db=initializeFirestore(app,{cacheSizeBytes:rn,experimentalForceLongPolling:!0}),storage=getStorage(app),(async()=>{try{await enableIndexedDbPersistence(db,{forceOwnership:!1})}catch(e){if(typeof e=="object"&&e!==null&&"code"in e){const t=e;t.code==="failed-precondition"||t.code}}})();const lr=class lr{constructor(){$e(this,"db");this.db=db,this.enableOfflinePersistence()}async enableOfflinePersistence(){if(!lr.persistenceEnabled)try{await enableIndexedDbPersistence(this.db),lr.persistenceEnabled=!0}catch(e){e.code==="failed-precondition"||e.code}}handleError(e){throw e instanceof FirebaseError&&(e.code==="failed-precondition"||e.code),e}validateFirestoreData(e){const t=(n,a)=>{if(n===void 0)throw new Error(`Undefined value not allowed in Firestore at path: ${a}`);if(typeof n=="function")throw new Error(`Function values not allowed in Firestore at path: ${a}`);if(n&&typeof n=="object"){if(n.constructor&&n.constructor.name==="Timestamp"||n instanceof Date)return;if(!n.constructor||n.constructor===Object){const u=n;Object.keys(u).forEach(p=>{t(u[p],`${a}.${p}`)});return}const s=n.constructor.name;if(["GeoPoint","DocumentReference","Blob"].includes(s))return}Array.isArray(n)&&n.forEach((s,o)=>{t(s,`${a}[${o}]`)})};Object.keys(e).forEach(n=>{t(e[n],n)})}async getDocuments(e,t=[]){try{const n=collection(this.db,e),a=query(n,...t);return(await getDocs(a)).docs.map(o=>({...o.data(),id:o.id}))}catch(n){this.handleError(n)}}async getDocument(e,t){try{const n=doc(this.db,e,t),a=await getDoc(n);return a.exists()?a.data():void 0}catch(n){this.handleError(n)}}async setDocument(e,t,n){try{const a=doc(this.db,e,t);await setDoc(a,n,{merge:!0})}catch(a){this.handleError(a)}}async addDocument(e,t){try{return this.validateFirestoreData(t),{id:(await addDoc(collection(this.db,e),t)).id}}catch(n){throw this.handleError(n),n}}async updateDocument(e,t,n){try{const a=doc(this.db,e,t);await updateDoc(a,{...n,updatedAt:Timestamp.now()})}catch(a){this.handleError(a)}}async deleteDocument(e,t){try{const n=doc(this.db,e,t);await deleteDoc(n)}catch(n){this.handleError(n)}}async batchOperation(e,t,n,a){const s=writeBatch(this.db);return e.forEach(o=>{const u=doc(this.db,t,a(o));switch(n){case"create":s.set(u,{...o,updatedAt:Timestamp.now(),createdAt:Timestamp.now()});break;case"update":s.update(u,{...o,updatedAt:Timestamp.now()});break;case"delete":s.delete(u);break}}),this.processBatchWithRetry(s)}async processBatchWithRetry(e,t=3,n=0){try{await e.commit()}catch(a){if(a instanceof FirebaseError&&a.code==="unavailable"&&n<t)return await new Promise(s=>setTimeout(s,Math.pow(2,n)*1e3)),this.processBatchWithRetry(e,t,n+1);throw new Error("Service temporarily unavailable")}}};$e(lr,"persistenceEnabled",!1);let FirebaseService=lr;class CostPriceResolutionService extends FirebaseService{constructor(){super(...arguments);$e(this,"PRODUCTS_COLLECTION","products");$e(this,"CATEGORIES_COLLECTION","categories");$e(this,"DEFAULT_COST_PRICE",0);$e(this,"categoryCostPrices",new Map)}createDefaultResolution(t,n=null){return{value:this.DEFAULT_COST_PRICE,source:"default",categoryId:n,sku:t}}async initializeCostPrices(t){const n=[...new Set(t.map(u=>u.categoryId).filter(u=>u!==void 0))],a=n.map(async u=>{try{return await this.getDocument(this.CATEGORIES_COLLECTION,u)}catch(p){return console.error(`Error fetching category ${u}:`,p),null}}),s=await Promise.all(a);this.categoryCostPrices.clear(),s.forEach((u,p)=>{u&&u.costPrice!==null&&u.costPrice!==void 0&&this.categoryCostPrices.set(n[p],u.costPrice)});const o=new Map;return t.forEach(u=>{o.set(u.sku,this.resolveCostPriceFromMemory(u))}),o}resolveCostPriceFromMemory(t){return t.customCostPrice!==null&&t.customCostPrice!==void 0?{value:t.customCostPrice,source:"product",categoryId:t.categoryId||null,sku:t.sku}:t.categoryId&&this.categoryCostPrices.has(t.categoryId)?{value:this.categoryCostPrices.get(t.categoryId),source:"category",categoryId:t.categoryId,sku:t.sku}:this.createDefaultResolution(t.sku,t.categoryId||null)}async getProductCostPrice(t){try{const n=await this.getDocuments(this.PRODUCTS_COLLECTION,[where("sku","==",t)]);if(!n||n.length===0)return this.createDefaultResolution(t);const a=n[0];if(!a.categoryId)return this.createDefaultResolution(t);try{const s=await this.getDocument(this.CATEGORIES_COLLECTION,a.categoryId);return s?a.customCostPrice!==null&&a.customCostPrice!==void 0?{value:a.customCostPrice,source:"product",categoryId:a.categoryId,sku:a.sku}:s.costPrice!==null&&s.costPrice!==void 0?{value:s.costPrice,source:"category",categoryId:a.categoryId,sku:a.sku}:this.createDefaultResolution(t,a.categoryId):this.createDefaultResolution(t)}catch(s){return console.error(`Error fetching category for product ${t}:`,s),this.createDefaultResolution(t)}}catch(n){return console.error(`Error fetching product ${t}:`,n),this.createDefaultResolution(t)}}async getCategoryCostPrice(t){const n=await this.getDocument(this.CATEGORIES_COLLECTION,t);if(!n)throw new Error(`Category not found: ${t}`);return{value:n.costPrice??this.DEFAULT_COST_PRICE,source:n.costPrice!==null&&n.costPrice!==void 0?"category":"default",categoryId:t,sku:""}}async updateCategoryCostPrice(t,n){await this.updateDocument(this.CATEGORIES_COLLECTION,t,{costPrice:n});const a=await this.getDocuments(this.PRODUCTS_COLLECTION,[where("categoryId","==",t),where("customCostPrice","==",null)]);console.log(`Updated cost price for category ${t}, affecting ${a.length} products`)}async migrateProductCostPrices(t){const n=await this.getDocuments(this.PRODUCTS_COLLECTION,[where("categoryId","==",t)]);if(n.length===0)return;const a=n.map(u=>u.customCostPrice).filter(u=>u!==null);if(a.length===0)return;const s=a.reduce((u,p)=>u+p,0)/a.length;await this.updateDocument(this.CATEGORIES_COLLECTION,t,{costPrice:s});const o=n.map(u=>({...u,customCostPrice:null}));await this.batchOperation(o,this.PRODUCTS_COLLECTION,"update",u=>u.sku)}async getProductsInheritingCost(t){return this.getDocuments(this.PRODUCTS_COLLECTION,[where("categoryId","==",t),where("customCostPrice","==",null)])}}class ProductService extends FirebaseService{constructor(){super();$e(this,"COLLECTION_NAME","products");$e(this,"costPriceService");this.costPriceService=new CostPriceResolutionService}async parseProducts(t){if(this.isAmazonFormat(t))return this.parseAmazonProducts(t);if(this.isFlipkartFormat(t))return this.processFlipkartProducts(t);throw new Error("Unsupported file format")}async parseAmazonProducts(t){const n=await new Promise((a,s)=>{t||s(new Error("File is not set")),Papa.parse(t,{header:!0,complete:async o=>{const u=o.data;if(!Array.isArray(u)||u.length===0)throw new Error("File is empty");return a(u.filter(p=>p["seller-sku"]))},error:o=>{s(o)}})});return this.amazonAdapter(n)}async processFlipkartProducts(t){const n=await t.arrayBuffer(),a=readSync(n),s=a.Sheets[a.SheetNames[0]],o=utils.sheet_to_json(s);if(o.shift(),!Array.isArray(o)||o.length===0)throw new Error("File is empty");return this.flipkartAdapter(o)}isAmazonFormat(t){return t.type==="text/plain"}isFlipkartFormat(t){return t.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||t.type==="application/vnd.ms-excel"}amazonAdapter(t){const n=new Map(DEFAULT_PRODUCT_PRICES.map(a=>[a.sku,a]));return t.map(a=>{var s;return{sku:a["seller-sku"],name:a["item-name"],description:((s=n.get(a["seller-sku"]))==null?void 0:s.description)??a["item-description"],customCostPrice:null,platform:"amazon",sellingPrice:Number(a.price)||0,metadata:{listingStatus:"active",moq:"1",amazonSerialNumber:a.asin1},visibility:"visible"}})}flipkartAdapter(t){const n=new Map(DEFAULT_PRODUCT_PRICES.map(a=>[a.sku,a]));return t.map(a=>{var s;return{sku:a["Seller SKU Id"],name:a["Product Title"],description:((s=n.get(a["Seller SKU Id"]))==null?void 0:s.description)??a["Product Name"]??"",sellingPrice:Number(a["Your Selling Price"])||0,customCostPrice:null,platform:"flipkart",metadata:{listingStatus:a["Listing Status"],moq:a["Minimum Order Quantity"]||"1",flipkartSerialNumber:a["Flipkart Serial Number"]},visibility:"visible"}})}async saveProducts(t){const n=await this.getDocuments(this.COLLECTION_NAME),a=t.filter(s=>n.filter(o=>o.sku===s.sku&&o.platform===s.platform).length===0);return this.batchOperation(a,this.COLLECTION_NAME,"create",s=>s.sku)}async saveOrUpdateProducts(t,n=!1){const a=await this.getDocuments(this.COLLECTION_NAME),s=new Map;a.forEach(h=>{const f=`${h.sku}-${h.platform}`;s.set(f,h)});const o=[],u=[];t.forEach(h=>{const f=`${h.sku}-${h.platform}`,E=s.get(f);if(E){if(n){const m={sellingPrice:h.sellingPrice,metadata:{...E.metadata,listingStatus:h.metadata.listingStatus,moq:h.metadata.moq,updatedAt:Timestamp.now(),lastImportedFrom:h.platform==="amazon"?"Amazon Import":"Flipkart Import"}};h.platform==="amazon"&&h.metadata.amazonSerialNumber?m.metadata.amazonSerialNumber=h.metadata.amazonSerialNumber:h.platform==="flipkart"&&h.metadata.flipkartSerialNumber&&(m.metadata.flipkartSerialNumber=h.metadata.flipkartSerialNumber),(!E.description||E.description===E.name)&&(m.name=h.name),u.push({sku:h.sku,updateData:m})}}else o.push({...h,metadata:{...h.metadata,createdAt:Timestamp.now(),updatedAt:Timestamp.now(),lastImportedFrom:h.platform==="amazon"?"Amazon Import":"Flipkart Import"}})});const p=[];if(o.length>0&&p.push(this.batchOperation(o,this.COLLECTION_NAME,"create",h=>h.sku)),u.length>0){const h=u.map(({sku:f,updateData:E})=>this.updateDocument(this.COLLECTION_NAME,f,E));p.push(...h)}return await Promise.all(p),{created:o.length,updated:u.length}}async updateProduct(t,n){return this.updateDocument(this.COLLECTION_NAME,t,n)}async getProducts(t){const n=[];return t!=null&&t.platform&&n.push(where("platform","==",t.platform)),t!=null&&t.search&&(n.push(where("name",">=",t.search)),n.push(where("name","<=",t.search+""))),t!=null&&t.visibility&&n.push(where("visibility","==",t.visibility)),t!=null&&t.categoryId&&n.push(where("categoryId","==",t.categoryId)),(await this.getDocuments(this.COLLECTION_NAME,n)).map(s=>({...s,sku:s.id??s.sku}))}async mapTransactionToProduct(t){return(await this.getDocuments(this.COLLECTION_NAME,[where("sku","==",t)]))[0]||null}async deleteProduct(t){return this.deleteDocument(this.COLLECTION_NAME,t)}async getProductDetails(t){const n=await this.getDocument(this.COLLECTION_NAME,t);if(!n)throw new Error(`Product with SKU ${t} not found`);return n}async updateInventory(t,n){try{const a=await this.getProductDetails(t);if(!a.inventory)await this.updateDocument(this.COLLECTION_NAME,t,{inventory:{quantity:n,lowStockThreshold:5,lastUpdated:Timestamp.now()}});else{const s=a.inventory.quantity+n;await this.updateDocument(this.COLLECTION_NAME,t,{inventory:{...a.inventory,quantity:s,lastUpdated:Timestamp.now()}})}return this.getProductDetails(t)}catch{return this.getProductDetails(t)}}async reduceInventoryForOrder(t,n){return this.updateInventory(t,-Math.abs(n))}async hasSufficientInventory(t,n){try{const a=await this.getProductDetails(t);return a.inventory?a.inventory.quantity>=n:n<=0}catch{return!1}}async getLowInventoryProducts(){try{return(await this.getProducts()).filter(n=>n.inventory&&n.inventory.quantity<=n.inventory.lowStockThreshold)}catch{return[]}}async checkInventory(t){var n;try{const a=await this.getProductDetails(t);return((n=a==null?void 0:a.inventory)==null?void 0:n.quantity)||0}catch{return 0}}async getProductCostPrice(t){try{return(await this.costPriceService.getProductCostPrice(t)).value}catch(n){return console.error(`Error getting cost price for product ${t}:`,n),0}}async getProductsInheritingCost(t){return this.getDocuments(this.COLLECTION_NAME,[where("categoryId","==",t)])}}class CategoryService extends FirebaseService{constructor(){super(...arguments);$e(this,"COLLECTION_NAME","categories")}async getCategories(){return this.getDocuments(this.COLLECTION_NAME,[orderBy("name","asc")])}async getCategory(t){return this.getDocument(this.COLLECTION_NAME,t)}async createCategory(t){const n={name:t.name,description:t.description||"",tag:t.tag||"",costPrice:t.costPrice??null,createdAt:Timestamp.now(),updatedAt:Timestamp.now()};return(await this.addDocument(this.COLLECTION_NAME,n)).id}async updateCategory(t,n){const a={updatedAt:Timestamp.now()};n.name!==void 0&&(a.name=n.name),n.description!==void 0&&(a.description=n.description||""),n.tag!==void 0&&(a.tag=n.tag||""),n.costPrice!==void 0&&(a.costPrice=n.costPrice??null),await this.updateDocument(this.COLLECTION_NAME,t,a)}async deleteCategory(t){await this.deleteDocument(this.COLLECTION_NAME,t)}async isCategoryInUse(t){return(await this.getDocuments("products",[where("categoryId","==",t),orderBy("id","asc")])).length>0}}const initialState$a={items:[],filteredItems:[],loading:!1,error:null,filters:{},lastFetched:null,detailsCache:{},categories:[],categoriesLoading:!1,categoriesError:null,categoryProducts:[],categoryProductsLoading:!1,categoryProductsError:null},productService$1=new ProductService,categoryService$1=new CategoryService,fetchProducts=createAsyncThunk("products/fetchProducts",async r=>await productService$1.getProducts(r)),fetchProductDetails=createAsyncThunk("products/fetchDetails",async(r,{getState:e})=>{const t=e(),{detailsCache:n}=t.products;if(n[r])return{sku:r,details:n[r]};const a=await productService$1.getProductDetails(r);return{sku:r,details:a}}),importProducts=createAsyncThunk("products/importProducts",async({file:r,updateExisting:e=!1})=>{const t=await productService$1.parseProducts(r),n=await productService$1.saveOrUpdateProducts(t,e);return{products:t,summary:n,updateExisting:e}}),updateProduct=createAsyncThunk("products/updateProduct",async({sku:r,data:e})=>(await productService$1.updateProduct(r,e),{sku:r,data:e})),bulkUpdateProducts=createAsyncThunk("products/bulkUpdateProducts",async({skus:r,data:e})=>{const t=r.map(n=>productService$1.updateProduct(n,e));return await Promise.all(t),{skus:r,data:e}}),fetchCategories$1=createAsyncThunk("products/fetchCategories",async()=>await categoryService$1.getCategories()),addCategory=createAsyncThunk("products/addCategory",async r=>await categoryService$1.createCategory({name:r.name,description:r.description||"",tag:r.tag||"",costPrice:r.costPrice??null})),fetchProductsByCategory=createAsyncThunk("products/fetchProductsByCategory",async r=>await productService$1.getProducts({categoryId:r})),productsSlice=createSlice({name:"products",initialState:initialState$a,reducers:{setFilters:(r,e)=>{r.filters={...r.filters,...e.payload},r.filteredItems=r.items.filter(t=>{if(r.filters.platform&&t.platform!==r.filters.platform)return!1;if(r.filters.search){const a=r.filters.search.toLowerCase();return t.sku.toLowerCase().includes(a)||t.name.toLowerCase().includes(a)||t.description&&t.description.toLowerCase().includes(a)}const n=r.filters;return!(n.categoryId&&t.categoryId!==n.categoryId)})},clearFilters:r=>{r.filters={},r.filteredItems=r.items},setOptimisticUpdate:(r,e)=>{r.items=e.payload,r.filteredItems=e.payload},clearCategoryProducts:r=>{r.categoryProducts=[],r.categoryProductsError=null}},extraReducers:r=>{r.addCase(fetchProducts.pending,e=>{e.loading=!0,e.error=null}).addCase(fetchProducts.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload,e.filteredItems=t.payload.filter(n=>{if(e.filters.platform&&n.platform!==e.filters.platform)return!1;if(e.filters.search){const s=e.filters.search.toLowerCase();if(!n.sku.toLowerCase().includes(s)&&!n.name.toLowerCase().includes(s)&&!(n.description&&n.description.toLowerCase().includes(s)))return!1}const a=e.filters;return!(a.categoryId&&n.categoryId!==a.categoryId)}),e.lastFetched=Date.now()}).addCase(fetchProducts.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch products"}).addCase(fetchProductDetails.fulfilled,(e,t)=>{const{sku:n,details:a}=t.payload;e.detailsCache[n]=a}).addCase(importProducts.pending,e=>{e.loading=!0,e.error=null}).addCase(importProducts.fulfilled,(e,t)=>{e.loading=!1;const{products:n,updateExisting:a}=t.payload;if(a){const s=new Set(n.map(u=>`${u.sku}-${u.platform}`)),o=e.items.filter(u=>!s.has(`${u.sku}-${u.platform}`));e.items=[...o,...n]}else e.items=[...e.items,...n];e.filteredItems=e.items.filter(s=>{if(e.filters.platform&&s.platform!==e.filters.platform)return!1;if(e.filters.search){const u=e.filters.search.toLowerCase();if(!s.sku.toLowerCase().includes(u)&&!s.name.toLowerCase().includes(u)&&!(s.description&&s.description.toLowerCase().includes(u)))return!1}const o=e.filters;return!(o.categoryId&&s.categoryId!==o.categoryId)})}).addCase(importProducts.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to import products"}).addCase(updateProduct.fulfilled,(e,t)=>{const{sku:n,data:a}=t.payload,s=e.items.findIndex(o=>o.sku===n);s!==-1&&(e.items[s]={...e.items[s],...a},e.filteredItems=e.items.filter(o=>{if(e.filters.platform&&o.platform!==e.filters.platform)return!1;if(e.filters.search){const p=e.filters.search.toLowerCase();if(!o.sku.toLowerCase().includes(p)&&!o.name.toLowerCase().includes(p)&&!(o.description&&o.description.toLowerCase().includes(p)))return!1}const u=e.filters;return!(u.categoryId&&o.categoryId!==u.categoryId)}))}).addCase(bulkUpdateProducts.fulfilled,(e,t)=>{const{skus:n,data:a}=t.payload;e.items=e.items.map(s=>n.includes(s.sku)?{...s,...a}:s),e.filteredItems=e.items.filter(s=>{if(e.filters.platform&&s.platform!==e.filters.platform)return!1;if(e.filters.search){const u=e.filters.search.toLowerCase();if(!s.sku.toLowerCase().includes(u)&&!s.name.toLowerCase().includes(u)&&!(s.description&&s.description.toLowerCase().includes(u)))return!1}const o=e.filters;return!(o.categoryId&&s.categoryId!==o.categoryId)})}).addCase(fetchCategories$1.pending,e=>{e.categoriesLoading=!0,e.categoriesError=null}).addCase(fetchCategories$1.fulfilled,(e,t)=>{e.categoriesLoading=!1,e.categories=t.payload}).addCase(fetchCategories$1.rejected,(e,t)=>{e.categoriesLoading=!1,e.categoriesError=t.error.message||"Failed to fetch categories"}).addCase(addCategory.pending,e=>{e.categoriesLoading=!0,e.categoriesError=null}).addCase(addCategory.fulfilled,e=>{e.categoriesLoading=!1}).addCase(addCategory.rejected,(e,t)=>{e.categoriesLoading=!1,e.categoriesError=t.error.message||"Failed to add category"}).addCase(fetchProductsByCategory.pending,e=>{e.categoryProductsLoading=!0,e.categoryProductsError=null}).addCase(fetchProductsByCategory.fulfilled,(e,t)=>{e.categoryProductsLoading=!1,e.categoryProducts=t.payload}).addCase(fetchProductsByCategory.rejected,(e,t)=>{e.categoryProductsLoading=!1,e.categoryProductsError=t.error.message||"Failed to fetch products for category"})}}),{setFilters,clearFilters,setOptimisticUpdate:setOptimisticUpdate$1,clearCategoryProducts}=productsSlice.actions,productsReducer=productsSlice.reducer,selectCategories=r=>r.products.categories,selectCategoryProducts=r=>r.products.categoryProducts,selectCategoryProductsLoading=r=>r.products.categoryProductsLoading,selectCategoryProductsError=r=>r.products.categoryProductsError,millisecondsInWeek=6048e5,millisecondsInDay=864e5,millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3,minutesInMonth=43200,minutesInDay=1440,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&constructFromSymbol in r?r[constructFromSymbol](e):r instanceof Date?new r.constructor(e):new Date(e)}function toDate(r,e){return constructFrom(e||r,r)}let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(r,e){var u,p,h,f;const t=getDefaultOptions(),n=(e==null?void 0:e.weekStartsOn)??((p=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:p.weekStartsOn)??t.weekStartsOn??((f=(h=t.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,a=toDate(r,e==null?void 0:e.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function startOfISOWeek(r,e){return startOfWeek(r,{...e,weekStartsOn:1})}function getISOWeekYear(r,e){const t=toDate(r,e==null?void 0:e.in),n=t.getFullYear(),a=constructFrom(t,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=startOfISOWeek(a),o=constructFrom(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const u=startOfISOWeek(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}function getTimezoneOffsetInMilliseconds(r){const e=toDate(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function normalizeDates(r,...e){const t=constructFrom.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function startOfDay(r,e){const t=toDate(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function differenceInCalendarDays(r,e,t){const[n,a]=normalizeDates(t==null?void 0:t.in,r,e),s=startOfDay(n),o=startOfDay(a),u=+s-getTimezoneOffsetInMilliseconds(s),p=+o-getTimezoneOffsetInMilliseconds(o);return Math.round((u-p)/millisecondsInDay)}function startOfISOWeekYear(r,e){const t=getISOWeekYear(r,e),n=constructFrom(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),startOfISOWeek(n)}function isDate(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function isValid(r){return!(!isDate(r)&&typeof r!="number"||isNaN(+toDate(r)))}function startOfYear(r,e){const t=toDate(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(r,e,t)=>{let n;const a=formatDistanceLocale[r];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function buildFormatLongFn(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(r,e,t,n)=>formatRelativeLocale[r];function buildLocalizeFn(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let a;if(n==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,u=t!=null&&t.width?String(t.width):o;a=r.formattingValues[u]||r.formattingValues[o]}else{const o=r.defaultWidth,u=t!=null&&t.width?String(t.width):r.defaultWidth;a=r.values[u]||r.values[o]}const s=r.argumentCallback?r.argumentCallback(e):e;return a[s]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:r=>r-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(r){return(e,t={})=>{const n=t.width,a=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],p=Array.isArray(u)?findIndex(u,E=>E.test(o)):findKey(u,E=>E.test(o));let h;h=r.valueCallback?r.valueCallback(p):p,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function findKey(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function findIndex(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function buildMatchPatternFn(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const a=n[0],s=e.match(r.parsePattern);if(!s)return null;let o=r.valueCallback?r.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const u=e.slice(a.length);return{value:o,rest:u}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:r=>parseInt(r,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:r=>r+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(r,e){const t=toDate(r,e==null?void 0:e.in);return differenceInCalendarDays(t,startOfYear(t))+1}function getISOWeek(r,e){const t=toDate(r,e==null?void 0:e.in),n=+startOfISOWeek(t)-+startOfISOWeekYear(t);return Math.round(n/millisecondsInWeek)+1}function getWeekYear(r,e){var f,E,m,w;const t=toDate(r,e==null?void 0:e.in),n=t.getFullYear(),a=getDefaultOptions(),s=(e==null?void 0:e.firstWeekContainsDate)??((E=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((w=(m=a.locale)==null?void 0:m.options)==null?void 0:w.firstWeekContainsDate)??1,o=constructFrom((e==null?void 0:e.in)||r,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const u=startOfWeek(o,e),p=constructFrom((e==null?void 0:e.in)||r,0);p.setFullYear(n,0,s),p.setHours(0,0,0,0);const h=startOfWeek(p,e);return+t>=+u?n+1:+t>=+h?n:n-1}function startOfWeekYear(r,e){var u,p,h,f;const t=getDefaultOptions(),n=(e==null?void 0:e.firstWeekContainsDate)??((p=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:p.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(h=t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,a=getWeekYear(r,e),s=constructFrom((e==null?void 0:e.in)||r,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),startOfWeek(s,e)}function getWeek(r,e){const t=toDate(r,e==null?void 0:e.in),n=+startOfWeek(t,e)-+startOfWeekYear(t,e);return Math.round(n/millisecondsInWeek)+1}function addLeadingZeros(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const lightFormatters={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return addLeadingZeros(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):addLeadingZeros(t+1,2)},d(r,e){return addLeadingZeros(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return addLeadingZeros(r.getHours()%12||12,e.length)},H(r,e){return addLeadingZeros(r.getHours(),e.length)},m(r,e){return addLeadingZeros(r.getMinutes(),e.length)},s(r,e){return addLeadingZeros(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),a=Math.trunc(n*Math.pow(10,t-3));return addLeadingZeros(a,e.length)}},dayPeriodEnum={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return lightFormatters.y(r,e)},Y:function(r,e,t,n){const a=getWeekYear(r,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return addLeadingZeros(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):addLeadingZeros(s,e.length)},R:function(r,e){const t=getISOWeekYear(r);return addLeadingZeros(t,e.length)},u:function(r,e){const t=r.getFullYear();return addLeadingZeros(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return addLeadingZeros(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return addLeadingZeros(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return lightFormatters.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return addLeadingZeros(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const a=getWeek(r,n);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):addLeadingZeros(a,e.length)},I:function(r,e,t){const n=getISOWeek(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):addLeadingZeros(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):lightFormatters.d(r,e)},D:function(r,e,t){const n=getDayOfYear(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):addLeadingZeros(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const a=r.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return addLeadingZeros(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const a=r.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return addLeadingZeros(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return addLeadingZeros(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let a;switch(n===12?a=dayPeriodEnum.noon:n===0?a=dayPeriodEnum.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let a;switch(n>=17?a=dayPeriodEnum.evening:n>=12?a=dayPeriodEnum.afternoon:n>=4?a=dayPeriodEnum.morning:a=dayPeriodEnum.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return lightFormatters.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):lightFormatters.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):lightFormatters.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):lightFormatters.s(r,e)},S:function(r,e){return lightFormatters.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return formatTimezoneWithOptionalMinutes(n);case"XXXX":case"XX":return formatTimezone(n);case"XXXXX":case"XXX":default:return formatTimezone(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return formatTimezoneWithOptionalMinutes(n);case"xxxx":case"xx":return formatTimezone(n);case"xxxxx":case"xxx":default:return formatTimezone(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(n,":");case"OOOO":default:return"GMT"+formatTimezone(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(n,":");case"zzzz":default:return"GMT"+formatTimezone(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return addLeadingZeros(n,e.length)},T:function(r,e,t){return addLeadingZeros(+r,e.length)}};function formatTimezoneShort(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=Math.trunc(n/60),s=n%60;return s===0?t+String(a):t+String(a)+e+addLeadingZeros(s,2)}function formatTimezoneWithOptionalMinutes(r,e){return r%60===0?(r>0?"-":"+")+addLeadingZeros(Math.abs(r)/60,2):formatTimezone(r,e)}function formatTimezone(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=addLeadingZeros(Math.trunc(n/60),2),s=addLeadingZeros(n%60,2);return t+a+e+s}const dateLongFormatter=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},timeLongFormatter=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dateTimeLongFormatter=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return dateLongFormatter(r,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",dateLongFormatter(n,e)).replace("{{time}}",timeLongFormatter(a,e))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(r){return dayOfYearTokenRE.test(r)}function isProtectedWeekYearToken(r){return weekYearTokenRE.test(r)}function warnOrThrowProtectedError(r,e,t){const n=message(r,e,t);if(console.warn(n),throwTokens.includes(r))throw new RangeError(n)}function message(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(r,e,t){var f,E,m,w,I,S,T,F;const n=getDefaultOptions(),a=(t==null?void 0:t.locale)??n.locale??enUS,s=(t==null?void 0:t.firstWeekContainsDate)??((E=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:E.firstWeekContainsDate)??n.firstWeekContainsDate??((w=(m=n.locale)==null?void 0:m.options)==null?void 0:w.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((S=(I=t==null?void 0:t.locale)==null?void 0:I.options)==null?void 0:S.weekStartsOn)??n.weekStartsOn??((F=(T=n.locale)==null?void 0:T.options)==null?void 0:F.weekStartsOn)??0,u=toDate(r,t==null?void 0:t.in);if(!isValid(u))throw new RangeError("Invalid time value");let p=e.match(longFormattingTokensRegExp).map(y=>{const b=y[0];if(b==="p"||b==="P"){const g=longFormatters[b];return g(y,a.formatLong)}return y}).join("").match(formattingTokensRegExp).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:cleanEscapedString(y)};if(formatters[b])return{isToken:!0,value:y};if(b.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(p=a.localize.preprocessor(u,p));const h={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return p.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(b)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(b))&&warnOrThrowProtectedError(b,e,String(r));const g=formatters[b[0]];return g(u,b,a.localize,h)}).join("")}function cleanEscapedString(r){const e=r.match(escapedStringRegExp);return e?e[1].replace(doubleQuoteRegExp,"'"):r}class CategoryInventoryService{constructor(){$e(this,"categoriesCollection","categories");$e(this,"inventoryOperationsCollection","inventoryOperations")}async getCategoryInventory(e){try{const t=await getDoc(doc(db,this.categoriesCollection,e));if(!t.exists())return null;const n=t.data();return{id:t.id,name:n.name,description:n.description,tag:n.tag,costPrice:n.costPrice??null,inventory:n.inventory||{totalQuantity:0,lowStockThreshold:5,lastUpdated:Timestamp.now(),productCount:0},createdAt:n.createdAt,updatedAt:n.updatedAt}}catch(t){throw new Error(`Failed to fetch category inventory: ${t instanceof Error?t.message:"Unknown error"}`)}}async getAllCategoriesWithInventory(){try{return(await getDocs(collection(db,this.categoriesCollection))).docs.map(t=>{const n=t.data();return{id:t.id,name:n.name,description:n.description,tag:n.tag,costPrice:n.costPrice??null,inventory:n.inventory||{totalQuantity:0,lowStockThreshold:5,lastUpdated:Timestamp.now(),productCount:0},createdAt:n.createdAt,updatedAt:n.updatedAt}})}catch(e){throw new Error(`Failed to fetch categories with inventory: ${e instanceof Error?e.message:"Unknown error"}`)}}async updateCategoryInventory(e,t,n,a){try{await runTransaction(db,async s=>{const o=doc(db,this.categoriesCollection,e),u=await s.get(o);if(!u.exists())throw new Error("Category not found");const h=u.data().inventory||{totalQuantity:0,lowStockThreshold:5,lastUpdated:Timestamp.now(),productCount:0},f=h.totalQuantity,E=Math.max(0,f+t),m={...h,totalQuantity:E,lastUpdated:Timestamp.now()};if(s.update(o,{inventory:m,updatedAt:Timestamp.now()}),a){const w=doc(collection(db,this.inventoryOperationsCollection)),I={categoryId:e,type:t>0?"add":"remove",quantity:Math.abs(t),previousQuantity:f,newQuantity:E,reason:n,performedBy:a,timestamp:Timestamp.now()};s.set(w,I)}})}catch(s){throw new Error(`Failed to update category inventory: ${s instanceof Error?s.message:"Unknown error"}`)}}async updateCategoryThreshold(e,t){try{const n=doc(db,this.categoriesCollection,e),a=await getDoc(n);if(!a.exists())throw new Error("Category not found");const u={...a.data().inventory||{totalQuantity:0,lowStockThreshold:5,lastUpdated:Timestamp.now(),productCount:0},lowStockThreshold:Math.max(1,t),lastUpdated:Timestamp.now()};await updateDoc(n,{inventory:u,updatedAt:Timestamp.now()})}catch(n){throw new Error(`Failed to update category threshold: ${n instanceof Error?n.message:"Unknown error"}`)}}async getLowStockCategories(){try{return(await this.getAllCategoriesWithInventory()).filter(t=>{const{totalQuantity:n,lowStockThreshold:a}=t.inventory;return n<=a}).map(t=>{const{totalQuantity:n,lowStockThreshold:a,productCount:s}=t.inventory;let o;return n===0?o="out-of-stock":n<=a*.5?o="critical":o="low",{categoryId:t.id,categoryName:t.name,currentQuantity:n,lowStockThreshold:a,severity:o,productCount:s}}).sort((t,n)=>{const a={"out-of-stock":0,critical:1,low:2};return a[t.severity]-a[n.severity]})}catch(e){throw new Error(`Failed to fetch low stock categories: ${e instanceof Error?e.message:"Unknown error"}`)}}async transferInventory(e,t){try{await runTransaction(db,async n=>{const a=doc(db,this.categoriesCollection,e.fromCategoryId),s=doc(db,this.categoriesCollection,e.toCategoryId),[o,u]=await Promise.all([n.get(a),n.get(s)]);if(!o.exists()||!u.exists())throw new Error("One or both categories not found");const p=o.data(),h=u.data(),f=p.inventory||{totalQuantity:0,lowStockThreshold:5,lastUpdated:Timestamp.now(),productCount:0},E=h.inventory||{totalQuantity:0,lowStockThreshold:5,lastUpdated:Timestamp.now(),productCount:0};if(f.totalQuantity<e.quantity)throw new Error("Insufficient inventory in source category");const m={...f,totalQuantity:f.totalQuantity-e.quantity,lastUpdated:Timestamp.now()},w={...E,totalQuantity:E.totalQuantity+e.quantity,lastUpdated:Timestamp.now()};n.update(a,{inventory:m,updatedAt:Timestamp.now()}),n.update(s,{inventory:w,updatedAt:Timestamp.now()});const I=doc(collection(db,this.inventoryOperationsCollection)),S={categoryId:e.fromCategoryId,type:"transfer",quantity:e.quantity,previousQuantity:f.totalQuantity,newQuantity:f.totalQuantity-e.quantity,reason:e.reason||`Transfer to ${h.name}`,performedBy:t,timestamp:Timestamp.now(),metadata:{transferTo:e.toCategoryId,transferToCategoryName:h.name,productSkus:e.productSkus}};n.set(I,S)})}catch(n){throw new Error(`Failed to transfer inventory: ${n instanceof Error?n.message:"Unknown error"}`)}}async generateInventoryReport(){try{const e=await this.getAllCategoriesWithInventory(),t=e.reduce((o,u)=>o+u.inventory.totalQuantity,0),n=e.filter(o=>o.inventory.totalQuantity<=o.inventory.lowStockThreshold&&o.inventory.totalQuantity>0).length,a=e.filter(o=>o.inventory.totalQuantity===0).length,s=e.map(o=>{const{totalQuantity:u,lowStockThreshold:p,productCount:h}=o.inventory;let f;return u===0?f="out-of-stock":u<=p?f="low-stock":f="in-stock",{id:o.id,name:o.name,quantity:u,threshold:p,status:f,productCount:h}});return{totalCategories:e.length,totalQuantity:t,lowStockCategories:n,outOfStockCategories:a,categories:s,generatedAt:Timestamp.now()}}catch(e){throw new Error(`Failed to generate inventory report: ${e instanceof Error?e.message:"Unknown error"}`)}}async getCategoryInventoryHistory(e,t=50){try{const n=query(collection(db,this.inventoryOperationsCollection),where("categoryId","==",e),orderBy("timestamp","desc"),limit(t));return(await getDocs(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw new Error(`Failed to fetch inventory history: ${n instanceof Error?n.message:"Unknown error"}`)}}async bulkUpdateCategoryInventory(e){try{const t=writeBatch(db);e.forEach(({categoryId:n,inventory:a})=>{const s=doc(db,this.categoriesCollection,n);t.update(s,{inventory:a,updatedAt:Timestamp.now()})}),await t.commit()}catch(t){throw new Error(`Failed to bulk update category inventory: ${t instanceof Error?t.message:"Unknown error"}`)}}}const categoryInventoryService=new CategoryInventoryService;class TodaysOrder extends FirebaseService{constructor(){super();$e(this,"COLLECTION_NAME","active-orders");$e(this,"productService");$e(this,"categoryInventoryService");$e(this,"categoryService");$e(this,"products",[]);$e(this,"categories",[]);this.productService=new ProductService,this.categoryInventoryService=new CategoryInventoryService,this.categoryService=new CategoryService}removeUndefinedKeys(t){const n={name:t.name,quantity:t.quantity,type:t.type};return t.SKU!==void 0&&(n.SKU=t.SKU),t.orderId!==void 0&&(n.orderId=t.orderId),t.createdAt!==void 0&&(n.createdAt=t.createdAt),t.category!==void 0&&(n.category=t.category),n}cleanOrders(t){return t.map(n=>this.removeUndefinedKeys(n))}async mapProductsToActiveOrder(){this.products=await this.productService.getProducts({}),this.categories=await this.categoryService.getCategories()}getCategoryName(t){if(!t)return;const n=this.categories.find(a=>a.id===t);return n==null?void 0:n.name}mapProductToOrder(t){const n=this.products.find(a=>a.sku===t.SKU&&a.platform===t.type);n&&(t.product=n,t.category=this.getCategoryName(n.categoryId))}async getTodaysOrders(){await this.mapProductsToActiveOrder();const t=await this.getDocument(this.COLLECTION_NAME,format(new Date,"yyyy-MM-dd"));return t&&t.orders.forEach(n=>{this.mapProductToOrder(n)}),t}async getLastThirtyDaysOrders(){await this.mapProductsToActiveOrder();const t=[];for(let n=29;n>=0;n--){const a=new Date;a.setDate(a.getDate()-n);const s=format(a,"yyyy-MM-dd");try{const o=await this.getDocument(this.COLLECTION_NAME,s);o?(o.orders.forEach(u=>{this.mapProductToOrder(u)}),t.push(o)):t.push({id:s,orders:[],date:s})}catch{t.push({id:s,orders:[],date:s})}}return t}async checkInventoryForOrders(t){for(const n of t)try{if(!n.SKU)return!0;if(!await this.productService.hasSufficientInventory(n.SKU,Number(n.quantity)||1))return!1}catch{return!0}return!0}async reduceInventoryForOrders(t){for(const n of t)try{if(!n.SKU)return;const a=Number(n.quantity)||1,s=await this.productService.reduceInventoryForOrder(n.SKU,a);if(s.categoryId)try{await this.categoryInventoryService.updateCategoryInventory(s.categoryId,-a,`Order fulfillment for SKU: ${n.SKU}`,"system")}catch{}}catch{}}async updateTodaysOrder(t){const n=await this.getTodaysOrders();if(n)await this.updateDocument(this.COLLECTION_NAME,n.id,{...t,orders:[...this.cleanOrders(n.orders),...this.cleanOrders(t.orders)]});else{const a={...t,orders:this.cleanOrders(t.orders)};await this.batchOperation([a],this.COLLECTION_NAME,"create",s=>s.id)}return await this.reduceInventoryForOrders(t.orders),await this.getTodaysOrders()}}const CACHE_DURATIONS$1={orders:1*60*1e3,transactions:15*60*1e3},shouldFetchData$1=(r,e,t,n=!0)=>n?!r||e.length===0?!0:Date.now()-r>t:!1,initialState$9={items:[],loading:!1,error:null,lastFetched:null,pendingUpdates:{}},orderService$1=new TodaysOrder,fetchOrders=createAsyncThunk("orders/fetchOrders",async(r,{getState:e})=>{const t=e(),{lastFetched:n,items:a}=t.orders,{isAuthenticated:s}=t.auth;if(!shouldFetchData$1(n,a,CACHE_DURATIONS$1.orders,s))return a;const o=await orderService$1.getTodaysOrders();return(o==null?void 0:o.orders)||[]});createAsyncThunk("orders/fetchAllOrders",async(r,{getState:e})=>{const t=e(),{lastFetched:n,items:a}=t.orders,{isAuthenticated:s}=t.auth;return shouldFetchData$1(n,a,CACHE_DURATIONS$1.orders,s)?(await orderService$1.getLastThirtyDaysOrders()).reduce((p,h)=>[...p,...h.orders.map(f=>({...f,createdAt:h.date}))],[]):a});const updateOrders=createAsyncThunk("orders/updateOrders",async({orders:r,date:e},{dispatch:t})=>{t(setPendingUpdate({date:e,orders:r}));try{return await orderService$1.updateTodaysOrder({orders:r,date:e,id:e}),{orders:r,date:e}}catch(n){throw t(clearPendingUpdate(e)),n}}),ordersSlice=createSlice({name:"orders",initialState:initialState$9,reducers:{setPendingUpdate:(r,e)=>{const{date:t,orders:n}=e.payload;r.pendingUpdates[t]=n},clearPendingUpdate:(r,e)=>{const t=e.payload;delete r.pendingUpdates[t]}},extraReducers:r=>{r.addCase(fetchOrders.pending,e=>{e.items.length===0&&(e.loading=!0),e.error=null}).addCase(fetchOrders.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload,e.lastFetched=Date.now()}).addCase(fetchOrders.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch orders"}).addCase(updateOrders.fulfilled,(e,t)=>{const{date:n}=t.payload;delete e.pendingUpdates[n],e.lastFetched=null})}}),{setPendingUpdate,clearPendingUpdate}=ordersSlice.actions,ordersReducer=ordersSlice.reducer;class TransactionService extends FirebaseService{constructor(){super(...arguments);$e(this,"COLLECTION_NAME","transactions")}async saveTransactions(t){if(t.length===0)return;const n=this.removeDuplicatesFromArray(t),a=await this.getExistingHashes(n.map(o=>o.hash)),s=n.filter(o=>!a.includes(o.hash));s.length!==0&&await this.batchOperation(s,this.COLLECTION_NAME,"create",o=>o.hash)}async getTransactions(){try{return await this.getDocuments(this.COLLECTION_NAME)}catch(t){throw this.handleError(t)}}async getExistingHashes(t){if(t.length===0)return[];try{const a=[];for(let o=0;o<t.length;o+=10)a.push(t.slice(o,o+10));return(await Promise.all(a.map(o=>this.getDocuments(this.COLLECTION_NAME,[where("hash","in",o)])))).flat().map(o=>o.hash)}catch(n){throw this.handleError(n)}}removeDuplicatesFromArray(t){const n=new Set;return t.filter(a=>n.has(a.hash)?!1:(n.add(a.hash),!0))}}const initialState$8={items:[],loading:!1,error:null,lastFetched:null,pendingTransactions:{}},transactionService=new TransactionService,fetchTransactions=createAsyncThunk("transactions/fetchTransactions",async(r,{getState:e})=>{const t=e(),{lastFetched:n,items:a}=t.transactions,{isAuthenticated:s}=t.auth;return shouldFetchData$1(n,a,CACHE_DURATIONS$1.transactions,s)?await transactionService.getTransactions():a}),saveTransactions=createAsyncThunk("transactions/saveTransactions",async(r,{dispatch:e,getState:t})=>{const a=t().transactions.items,s=[...a,...r];e(setOptimisticUpdate(s));try{return await transactionService.saveTransactions(r),r}catch(o){throw e(setOptimisticUpdate(a)),o}}),transactionsSlice=createSlice({name:"transactions",initialState:initialState$8,reducers:{setOptimisticUpdate:(r,e)=>{r.items=e.payload}},extraReducers:r=>{r.addCase(fetchTransactions.pending,e=>{e.items.length===0&&(e.loading=!0),e.error=null}).addCase(fetchTransactions.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload,e.lastFetched=Date.now()}).addCase(fetchTransactions.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch transactions"}).addCase(saveTransactions.fulfilled,(e,t)=>{e.items=[...e.items,...t.payload],e.lastFetched=Date.now()})}}),{setOptimisticUpdate}=transactionsSlice.actions,transactionsReducer=transactionsSlice.reducer;class AuthService{constructor(){$e(this,"auth");$e(this,"db");this.auth=auth,this.db=db}async signUp(e,t){try{const n=await createUserWithEmailAndPassword(this.auth,e,t);return await setDoc(doc(this.db,"users",n.user.uid),{email:e,role:"user",createdAt:new Date,lastLoginAt:new Date}),n.user}catch(n){const a=n instanceof Error?n.message:"Unknown error";throw new Error(`Sign up failed: ${a}`)}}async signIn(e,t,n=!1){try{await setPersistence(this.auth,n?browserLocalPersistence:browserSessionPersistence);const a=await signInWithEmailAndPassword(this.auth,e,t);if(a.user)for(let s=1;s<=3;s++)try{await this.updateLastLogin(a.user.uid);break}catch{if(s===3)break;await new Promise(o=>setTimeout(o,s*1e3))}return a.user}catch(a){const s=a instanceof Error?a.message:"Unknown error";throw new Error(`Sign in failed: ${s}`)}}async updateLastLogin(e,t=3){for(let n=1;n<=t;n++)try{await setDoc(doc(this.db,"users",e),{lastLoginAt:new Date},{merge:!0});return}catch{if(n===t)return;await new Promise(a=>setTimeout(a,Math.pow(2,n-1)*100))}}async signOut(){try{await signOut(this.auth)}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw new Error(`Sign out failed: ${t}`)}}async resetPassword(e){try{await sendPasswordResetEmail(this.auth,e)}catch(t){const n=t instanceof Error?t.message:"Unknown error";throw new Error(`Password reset failed: ${n}`)}}async getCurrentUser(){return this.auth.currentUser}async getUserData(e){try{const t=await getDoc(doc(this.db,"users",e));return t.exists()?t.data():null}catch(t){const n=t instanceof Error?t.message:"Unknown error";throw new Error(`Failed to get user data: ${n}`)}}onAuthStateChanged(e){return onAuthStateChanged(this.auth,e)}}const initialState$7={user:null,loading:!1,error:null,isAuthenticated:!1,authStateLoaded:!1,isLoading:!1},authService=new AuthService,initializeAuthState=createAsyncThunk("auth/initializeAuthState",async(r,{dispatch:e})=>new Promise(t=>authService.onAuthStateChanged(a=>{e(setAuthState({user:a,isAuthenticated:!!a,authStateLoaded:!0})),t(a)}))),login=createAsyncThunk("auth/login",async({email:r,password:e,rememberMe:t=!1})=>await authService.signIn(r,e,t)),logout=createAsyncThunk("auth/logout",async()=>{await authService.signOut()}),resetPassword=createAsyncThunk("auth/resetPassword",async r=>(await authService.resetPassword(r),"Password reset email sent")),authSlice=createSlice({name:"auth",initialState:initialState$7,reducers:{setUser:(r,e)=>{r.user=e.payload,r.isAuthenticated=!!e.payload},setAuthState:(r,e)=>{const{user:t,isAuthenticated:n,authStateLoaded:a}=e.payload;r.user=t,r.isAuthenticated=n,r.isLoading=!1,r.authStateLoaded=a},clearError:r=>{r.error=null},initializeAuth:r=>{r.isLoading=!0,r.authStateLoaded=!1}},extraReducers:r=>{r.addCase(initializeAuthState.fulfilled,(e,t)=>{e.user=t.payload,e.isAuthenticated=!!t.payload,e.authStateLoaded=!0}).addCase(login.pending,e=>{e.loading=!0,e.error=null}).addCase(login.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload,e.isAuthenticated=!0}).addCase(login.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to login",e.isAuthenticated=!1}).addCase(logout.fulfilled,e=>{e.user=null,e.isAuthenticated=!1}).addCase(resetPassword.pending,e=>{e.loading=!0,e.error=null}).addCase(resetPassword.fulfilled,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(resetPassword.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to send reset password email"})}}),{setUser,setAuthState,clearError:clearError$1}=authSlice.actions,authReducer=authSlice.reducer,selectIsAuthenticated=r=>r.auth.isAuthenticated,selectAuthStateLoaded=r=>r.auth.authStateLoaded;function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},dommatrix$1={exports:{}};/*!
* DOMMatrix v1.0.3 (https://thednp.github.io/dommatrix/)
* Copyright 2022 © thednp
* Licensed under MIT (https://github.com/thednp/DOMMatrix/blob/master/LICENSE)
*/var dommatrix=dommatrix$1.exports,hasRequiredDommatrix;function requireDommatrix(){return hasRequiredDommatrix||(hasRequiredDommatrix=1,function(r,e){(function(t,n){r.exports=n()})(dommatrix,function(){function t(y){var b=new I,g=Array.from(y);if(!g.every(function(z){return!Number.isNaN(z)}))throw TypeError('CSSMatrix: "'+y+'" must only have numbers.');if(g.length===16){var l=g[0],d=g[1],_=g[2],A=g[3],C=g[4],L=g[5],M=g[6],V=g[7],K=g[8],Y=g[9],X=g[10],H=g[11],W=g[12],B=g[13],N=g[14],J=g[15];b.m11=l,b.a=l,b.m21=C,b.c=C,b.m31=K,b.m41=W,b.e=W,b.m12=d,b.b=d,b.m22=L,b.d=L,b.m32=Y,b.m42=B,b.f=B,b.m13=_,b.m23=M,b.m33=X,b.m43=N,b.m14=A,b.m24=V,b.m34=H,b.m44=J}else if(g.length===6){var le=g[0],ye=g[1],Ce=g[2],q=g[3],R=g[4],O=g[5];b.m11=le,b.a=le,b.m12=ye,b.b=ye,b.m21=Ce,b.c=Ce,b.m22=q,b.d=q,b.m41=R,b.e=R,b.m42=O,b.f=O}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return b}function n(y){var b=Object.keys(new I);if(typeof y=="object"&&b.every(function(g){return g in y}))return t([y.m11,y.m12,y.m13,y.m14,y.m21,y.m22,y.m23,y.m24,y.m31,y.m32,y.m33,y.m34,y.m41,y.m42,y.m43,y.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(y)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function a(y){if(typeof y!="string")throw TypeError('CSSMatrix: "'+y+'" is not a string.');var b=String(y).replace(/\s/g,""),g=new I,l='CSSMatrix: invalid transform string "'+y+'"';return b.split(")").filter(function(d){return d}).forEach(function(d){var _=d.split("("),A=_[0],C=_[1];if(!C)throw TypeError(l);var L=C.split(",").map(function(R){return R.includes("rad")?parseFloat(R)*(180/Math.PI):parseFloat(R)}),M=L[0],V=L[1],K=L[2],Y=L[3],X=[M,V,K],H=[M,V,K,Y];if(A==="perspective"&&M&&[V,K].every(function(R){return R===void 0}))g.m34=-1/M;else if(A.includes("matrix")&&[6,16].includes(L.length)&&L.every(function(R){return!Number.isNaN(+R)})){var W=L.map(function(R){return Math.abs(R)<1e-6?0:R});g=g.multiply(t(W))}else if(A==="translate3d"&&X.every(function(R){return!Number.isNaN(+R)}))g=g.translate(M,V,K);else if(A==="translate"&&M&&K===void 0)g=g.translate(M,V||0,0);else if(A==="rotate3d"&&H.every(function(R){return!Number.isNaN(+R)})&&Y)g=g.rotateAxisAngle(M,V,K,Y);else if(A==="rotate"&&M&&[V,K].every(function(R){return R===void 0}))g=g.rotate(0,0,M);else if(A==="scale3d"&&X.every(function(R){return!Number.isNaN(+R)})&&X.some(function(R){return R!==1}))g=g.scale(M,V,K);else if(A==="scale"&&!Number.isNaN(M)&&M!==1&&K===void 0){var B=Number.isNaN(+V),N=B?M:V;g=g.scale(M,N,1)}else if(A==="skew"&&(M||!Number.isNaN(M)&&V)&&K===void 0)g=g.skew(M,V||0);else if(/[XYZ]/.test(A)&&M&&[V,K].every(function(R){return R===void 0})&&["translate","rotate","scale","skew"].some(function(R){return A.includes(R)}))if(["skewX","skewY"].includes(A))g=g[A](M);else{var J=A.replace(/[XYZ]/,""),le=A.replace(J,""),ye=["X","Y","Z"].indexOf(le),Ce=J==="scale"?1:0,q=[ye===0?M:Ce,ye===1?M:Ce,ye===2?M:Ce];g=g[J].apply(g,q)}else throw TypeError(l)}),g}function s(y,b){return b?[y.a,y.b,y.c,y.d,y.e,y.f]:[y.m11,y.m12,y.m13,y.m14,y.m21,y.m22,y.m23,y.m24,y.m31,y.m32,y.m33,y.m34,y.m41,y.m42,y.m43,y.m44]}function o(y,b,g){var l=new I;return l.m41=y,l.e=y,l.m42=b,l.f=b,l.m43=g,l}function u(y,b,g){var l=new I,d=Math.PI/180,_=y*d,A=b*d,C=g*d,L=Math.cos(_),M=-Math.sin(_),V=Math.cos(A),K=-Math.sin(A),Y=Math.cos(C),X=-Math.sin(C),H=V*Y,W=-V*X;l.m11=H,l.a=H,l.m12=W,l.b=W,l.m13=K;var B=M*K*Y+L*X;l.m21=B,l.c=B;var N=L*Y-M*K*X;return l.m22=N,l.d=N,l.m23=-M*V,l.m31=M*X-L*K*Y,l.m32=M*Y+L*K*X,l.m33=L*V,l}function p(y,b,g,l){var d=new I,_=Math.sqrt(y*y+b*b+g*g);if(_===0)return d;var A=y/_,C=b/_,L=g/_,M=l*(Math.PI/360),V=Math.sin(M),K=Math.cos(M),Y=V*V,X=A*A,H=C*C,W=L*L,B=1-2*(H+W)*Y;d.m11=B,d.a=B;var N=2*(A*C*Y+L*V*K);d.m12=N,d.b=N,d.m13=2*(A*L*Y-C*V*K);var J=2*(C*A*Y-L*V*K);d.m21=J,d.c=J;var le=1-2*(W+X)*Y;return d.m22=le,d.d=le,d.m23=2*(C*L*Y+A*V*K),d.m31=2*(L*A*Y+C*V*K),d.m32=2*(L*C*Y-A*V*K),d.m33=1-2*(X+H)*Y,d}function h(y,b,g){var l=new I;return l.m11=y,l.a=y,l.m22=b,l.d=b,l.m33=g,l}function f(y,b){var g=new I;if(y){var l=y*Math.PI/180,d=Math.tan(l);g.m21=d,g.c=d}if(b){var _=b*Math.PI/180,A=Math.tan(_);g.m12=A,g.b=A}return g}function E(y){return f(y,0)}function m(y){return f(0,y)}function w(y,b){var g=b.m11*y.m11+b.m12*y.m21+b.m13*y.m31+b.m14*y.m41,l=b.m11*y.m12+b.m12*y.m22+b.m13*y.m32+b.m14*y.m42,d=b.m11*y.m13+b.m12*y.m23+b.m13*y.m33+b.m14*y.m43,_=b.m11*y.m14+b.m12*y.m24+b.m13*y.m34+b.m14*y.m44,A=b.m21*y.m11+b.m22*y.m21+b.m23*y.m31+b.m24*y.m41,C=b.m21*y.m12+b.m22*y.m22+b.m23*y.m32+b.m24*y.m42,L=b.m21*y.m13+b.m22*y.m23+b.m23*y.m33+b.m24*y.m43,M=b.m21*y.m14+b.m22*y.m24+b.m23*y.m34+b.m24*y.m44,V=b.m31*y.m11+b.m32*y.m21+b.m33*y.m31+b.m34*y.m41,K=b.m31*y.m12+b.m32*y.m22+b.m33*y.m32+b.m34*y.m42,Y=b.m31*y.m13+b.m32*y.m23+b.m33*y.m33+b.m34*y.m43,X=b.m31*y.m14+b.m32*y.m24+b.m33*y.m34+b.m34*y.m44,H=b.m41*y.m11+b.m42*y.m21+b.m43*y.m31+b.m44*y.m41,W=b.m41*y.m12+b.m42*y.m22+b.m43*y.m32+b.m44*y.m42,B=b.m41*y.m13+b.m42*y.m23+b.m43*y.m33+b.m44*y.m43,N=b.m41*y.m14+b.m42*y.m24+b.m43*y.m34+b.m44*y.m44;return t([g,l,d,_,A,C,L,M,V,K,Y,X,H,W,B,N])}var I=function(){for(var b=[],g=arguments.length;g--;)b[g]=arguments[g];var l=this;if(l.a=1,l.b=0,l.c=0,l.d=1,l.e=0,l.f=0,l.m11=1,l.m12=0,l.m13=0,l.m14=0,l.m21=0,l.m22=1,l.m23=0,l.m24=0,l.m31=0,l.m32=0,l.m33=1,l.m34=0,l.m41=0,l.m42=0,l.m43=0,l.m44=1,b.length){var d=[16,6].some(function(_){return _===b.length})?b:b[0];return l.setMatrixValue(d)}return l},S={isIdentity:{configurable:!0},is2D:{configurable:!0}};S.isIdentity.get=function(){var y=this;return y.m11===1&&y.m12===0&&y.m13===0&&y.m14===0&&y.m21===0&&y.m22===1&&y.m23===0&&y.m24===0&&y.m31===0&&y.m32===0&&y.m33===1&&y.m34===0&&y.m41===0&&y.m42===0&&y.m43===0&&y.m44===1},S.is2D.get=function(){var y=this;return y.m31===0&&y.m32===0&&y.m33===1&&y.m34===0&&y.m43===0&&y.m44===1},I.prototype.setMatrixValue=function(b){var g=this;return typeof b=="string"&&b.length&&b!=="none"?a(b):[Array,Float64Array,Float32Array].some(function(l){return b instanceof l})?t(b):[I,DOMMatrix,Object].some(function(l){return b instanceof l})?n(b):g},I.prototype.toFloat32Array=function(b){return Float32Array.from(s(this,b))},I.prototype.toFloat64Array=function(b){return Float64Array.from(s(this,b))},I.prototype.toString=function(){var b=this,g=b.is2D,l=b.toFloat64Array(g).join(", "),d=g?"matrix":"matrix3d";return d+"("+l+")"},I.prototype.toJSON=function(){var b=this,g=b.is2D,l=b.isIdentity;return Object.assign({},b,{is2D:g,isIdentity:l})},I.prototype.multiply=function(b){return w(this,b)},I.prototype.translate=function(b,g,l){var d=b,_=g,A=l;return _===void 0&&(_=0),A===void 0&&(A=0),w(this,o(d,_,A))},I.prototype.scale=function(b,g,l){var d=b,_=g,A=l;return _===void 0&&(_=b),A===void 0&&(A=1),w(this,h(d,_,A))},I.prototype.rotate=function(b,g,l){var d=b,_=g||0,A=l||0;return typeof b=="number"&&g===void 0&&l===void 0&&(A=d,d=0,_=0),w(this,u(d,_,A))},I.prototype.rotateAxisAngle=function(b,g,l,d){if([b,g,l,d].some(function(_){return Number.isNaN(+_)}))throw new TypeError("CSSMatrix: expecting 4 values");return w(this,p(b,g,l,d))},I.prototype.skewX=function(b){return w(this,E(b))},I.prototype.skewY=function(b){return w(this,m(b))},I.prototype.skew=function(b,g){return w(this,f(b,g))},I.prototype.transformPoint=function(b){var g=this,l=g.m11*b.x+g.m21*b.y+g.m31*b.z+g.m41*b.w,d=g.m12*b.x+g.m22*b.y+g.m32*b.z+g.m42*b.w,_=g.m13*b.x+g.m23*b.y+g.m33*b.z+g.m43*b.w,A=g.m14*b.x+g.m24*b.y+g.m34*b.z+g.m44*b.w;return b instanceof DOMPoint?new DOMPoint(l,d,_,A):{x:l,y:d,z:_,w:A}},Object.defineProperties(I.prototype,S),Object.assign(I,{Translate:o,Rotate:u,RotateAxisAngle:p,Scale:h,SkewX:E,SkewY:m,Skew:f,Multiply:w,fromArray:t,fromMatrix:n,fromString:a,toArray:s});var T="1.0.3",F=T;return Object.assign(I,{Version:F}),I})}(dommatrix$1)),dommatrix$1.exports}var ponyfill$1={exports:{}};/**
 * @license
 * web-streams-polyfill v3.3.3
 * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
 * This code is released under the MIT license.
 * SPDX-License-Identifier: MIT
 */var ponyfill=ponyfill$1.exports,hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(r,e){(function(t,n){n(e)})(ponyfill,function(t){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(i){return"Symbol(".concat(i,")")};function a(i,c){var P={label:0,sent:function(){if(te[0]&1)throw te[1];return te[1]},trys:[],ops:[]},U,Q,te,fe;return fe={next:xe(0),throw:xe(1),return:xe(2)},typeof Symbol=="function"&&(fe[Symbol.iterator]=function(){return this}),fe;function xe(Pe){return function(Be){return ke([Pe,Be])}}function ke(Pe){if(U)throw new TypeError("Generator is already executing.");for(;fe&&(fe=0,Pe[0]&&(P=0)),P;)try{if(U=1,Q&&(te=Pe[0]&2?Q.return:Pe[0]?Q.throw||((te=Q.return)&&te.call(Q),0):Q.next)&&!(te=te.call(Q,Pe[1])).done)return te;switch(Q=0,te&&(Pe=[Pe[0]&2,te.value]),Pe[0]){case 0:case 1:te=Pe;break;case 4:return P.label++,{value:Pe[1],done:!1};case 5:P.label++,Q=Pe[1],Pe=[0];continue;case 7:Pe=P.ops.pop(),P.trys.pop();continue;default:if(te=P.trys,!(te=te.length>0&&te[te.length-1])&&(Pe[0]===6||Pe[0]===2)){P=0;continue}if(Pe[0]===3&&(!te||Pe[1]>te[0]&&Pe[1]<te[3])){P.label=Pe[1];break}if(Pe[0]===6&&P.label<te[1]){P.label=te[1],te=Pe;break}if(te&&P.label<te[2]){P.label=te[2],P.ops.push(Pe);break}te[2]&&P.ops.pop(),P.trys.pop();continue}Pe=c.call(i,P)}catch(Be){Pe=[6,Be],Q=0}finally{U=te=0}if(Pe[0]&5)throw Pe[1];return{value:Pe[0]?Pe[1]:void 0,done:!0}}}function s(i){var c=typeof Symbol=="function"&&Symbol.iterator,P=c&&i[c],U=0;if(P)return P.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&U>=i.length&&(i=void 0),{value:i&&i[U++],done:!i}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(i){return this instanceof o?(this.v=i,this):new o(i)}function u(i,c,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U=P.apply(i,c||[]),Q,te=[];return Q={},fe("next"),fe("throw"),fe("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function fe(qe){U[qe]&&(Q[qe]=function(st){return new Promise(function(ht,mt){te.push([qe,st,ht,mt])>1||xe(qe,st)})})}function xe(qe,st){try{ke(U[qe](st))}catch(ht){He(te[0][3],ht)}}function ke(qe){qe.value instanceof o?Promise.resolve(qe.value.v).then(Pe,Be):He(te[0][2],qe)}function Pe(qe){xe("next",qe)}function Be(qe){xe("throw",qe)}function He(qe,st){qe(st),te.shift(),te.length&&xe(te[0][0],te[0][1])}}function p(i){var c,P;return c={},U("next"),U("throw",function(Q){throw Q}),U("return"),c[Symbol.iterator]=function(){return this},c;function U(Q,te){c[Q]=i[Q]?function(fe){return(P=!P)?{value:o(i[Q](fe)),done:!1}:te?te(fe):fe}:te}}function h(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=i[Symbol.asyncIterator],P;return c?c.call(i):(i=typeof s=="function"?s(i):i[Symbol.iterator](),P={},U("next"),U("throw"),U("return"),P[Symbol.asyncIterator]=function(){return this},P);function U(te){P[te]=i[te]&&function(fe){return new Promise(function(xe,ke){fe=i[te](fe),Q(xe,ke,fe.done,fe.value)})}}function Q(te,fe,xe,ke){Promise.resolve(ke).then(function(Pe){te({value:Pe,done:xe})},fe)}}typeof SuppressedError=="function"&&SuppressedError;function f(){}function E(i){return typeof i=="object"&&i!==null||typeof i=="function"}var m=f;function w(i,c){try{Object.defineProperty(i,"name",{value:c,configurable:!0})}catch{}}var I=Promise,S=Promise.prototype.then,T=Promise.reject.bind(I);function F(i){return new I(i)}function y(i){return F(function(c){return c(i)})}function b(i){return T(i)}function g(i,c,P){return S.call(i,c,P)}function l(i,c,P){g(g(i,c,P),void 0,m)}function d(i,c){l(i,c)}function _(i,c){l(i,void 0,c)}function A(i,c,P){return g(i,c,P)}function C(i){g(i,void 0,m)}var L=function(i){if(typeof queueMicrotask=="function")L=queueMicrotask;else{var c=y(void 0);L=function(P){return g(c,P)}}return L(i)};function M(i,c,P){if(typeof i!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(i,c,P)}function V(i,c,P){try{return y(M(i,c,P))}catch(U){return b(U)}}var K=16384,Y=function(){function i(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(i.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),i.prototype.push=function(c){var P=this._back,U=P;P._elements.length===K-1&&(U={_elements:[],_next:void 0}),P._elements.push(c),U!==P&&(this._back=U,P._next=U),++this._size},i.prototype.shift=function(){var c=this._front,P=c,U=this._cursor,Q=U+1,te=c._elements,fe=te[U];return Q===K&&(P=c._next,Q=0),--this._size,this._cursor=Q,c!==P&&(this._front=P),te[U]=void 0,fe},i.prototype.forEach=function(c){for(var P=this._cursor,U=this._front,Q=U._elements;(P!==Q.length||U._next!==void 0)&&!(P===Q.length&&(U=U._next,Q=U._elements,P=0,Q.length===0));)c(Q[P]),++P},i.prototype.peek=function(){var c=this._front,P=this._cursor;return c._elements[P]},i}(),X=n("[[AbortSteps]]"),H=n("[[ErrorSteps]]"),W=n("[[CancelSteps]]"),B=n("[[PullSteps]]"),N=n("[[ReleaseSteps]]");function J(i,c){i._ownerReadableStream=c,c._reader=i,c._state==="readable"?q(i):c._state==="closed"?O(i):R(i,c._storedError)}function le(i,c){var P=i._ownerReadableStream;return vt(P,c)}function ye(i){var c=i._ownerReadableStream;c._state==="readable"?z(i,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):$(i,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),c._readableStreamController[N](),c._reader=void 0,i._ownerReadableStream=void 0}function Ce(i){return new TypeError("Cannot "+i+" a stream using a released reader")}function q(i){i._closedPromise=F(function(c,P){i._closedPromise_resolve=c,i._closedPromise_reject=P})}function R(i,c){q(i),z(i,c)}function O(i){q(i),v(i)}function z(i,c){i._closedPromise_reject!==void 0&&(C(i._closedPromise),i._closedPromise_reject(c),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0)}function $(i,c){R(i,c)}function v(i){i._closedPromise_resolve!==void 0&&(i._closedPromise_resolve(void 0),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0)}var x=Number.isFinite||function(i){return typeof i=="number"&&isFinite(i)},k=Math.trunc||function(i){return i<0?Math.ceil(i):Math.floor(i)};function D(i){return typeof i=="object"||typeof i=="function"}function j(i,c){if(i!==void 0&&!D(i))throw new TypeError("".concat(c," is not an object."))}function G(i,c){if(typeof i!="function")throw new TypeError("".concat(c," is not a function."))}function Z(i){return typeof i=="object"&&i!==null||typeof i=="function"}function re(i,c){if(!Z(i))throw new TypeError("".concat(c," is not an object."))}function ie(i,c,P){if(i===void 0)throw new TypeError("Parameter ".concat(c," is required in '").concat(P,"'."))}function ce(i,c,P){if(i===void 0)throw new TypeError("".concat(c," is required in '").concat(P,"'."))}function oe(i){return Number(i)}function ue(i){return i===0?0:i}function me(i){return ue(k(i))}function be(i,c){var P=0,U=Number.MAX_SAFE_INTEGER,Q=Number(i);if(Q=ue(Q),!x(Q))throw new TypeError("".concat(c," is not a finite number"));if(Q=me(Q),Q<P||Q>U)throw new TypeError("".concat(c," is outside the accepted range of ").concat(P," to ").concat(U,", inclusive"));return!x(Q)||Q===0?0:Q}function Ae(i,c){if(!kt(i))throw new TypeError("".concat(c," is not a ReadableStream."))}function Ee(i){return new Oe(i)}function Fe(i,c){i._reader._readRequests.push(c)}function _e(i,c,P){var U=i._reader,Q=U._readRequests.shift();P?Q._closeSteps():Q._chunkSteps(c)}function Ye(i){return i._reader._readRequests.length}function Qe(i){var c=i._reader;return!(c===void 0||!we(c))}var Oe=function(){function i(c){if(ie(c,1,"ReadableStreamDefaultReader"),Ae(c,"First parameter"),Ot(c))throw new TypeError("This stream has already been locked for exclusive reading by another reader");J(this,c),this._readRequests=new Y}return Object.defineProperty(i.prototype,"closed",{get:function(){return we(this)?this._closedPromise:b(Xe("closed"))},enumerable:!1,configurable:!0}),i.prototype.cancel=function(c){return c===void 0&&(c=void 0),we(this)?this._ownerReadableStream===void 0?b(Ce("cancel")):le(this,c):b(Xe("cancel"))},i.prototype.read=function(){if(!we(this))return b(Xe("read"));if(this._ownerReadableStream===void 0)return b(Ce("read from"));var c,P,U=F(function(te,fe){c=te,P=fe}),Q={_chunkSteps:function(te){return c({value:te,done:!1})},_closeSteps:function(){return c({value:void 0,done:!0})},_errorSteps:function(te){return P(te)}};return ae(this,Q),U},i.prototype.releaseLock=function(){if(!we(this))throw Xe("releaseLock");this._ownerReadableStream!==void 0&&ve(this)},i}();Object.defineProperties(Oe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),w(Oe.prototype.cancel,"cancel"),w(Oe.prototype.read,"read"),w(Oe.prototype.releaseLock,"releaseLock"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Oe.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function we(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_readRequests")?!1:i instanceof Oe}function ae(i,c){var P=i._ownerReadableStream;P._disturbed=!0,P._state==="closed"?c._closeSteps():P._state==="errored"?c._errorSteps(P._storedError):P._readableStreamController[B](c)}function ve(i){ye(i);var c=new TypeError("Reader was released");Me(i,c)}function Me(i,c){var P=i._readRequests;i._readRequests=new Y,P.forEach(function(U){U._errorSteps(c)})}function Xe(i){return new TypeError("ReadableStreamDefaultReader.prototype.".concat(i," can only be used on a ReadableStreamDefaultReader"))}var ge,Te,Le;function de(i){return i.slice()}function ee(i,c,P,U,Q){new Uint8Array(i).set(new Uint8Array(P,U,Q),c)}var ne=function(i){return typeof i.transfer=="function"?ne=function(c){return c.transfer()}:typeof structuredClone=="function"?ne=function(c){return structuredClone(c,{transfer:[c]})}:ne=function(c){return c},ne(i)},pe=function(i){return typeof i.detached=="boolean"?pe=function(c){return c.detached}:pe=function(c){return c.byteLength===0},pe(i)};function Ie(i,c,P){if(i.slice)return i.slice(c,P);var U=P-c,Q=new ArrayBuffer(U);return ee(Q,0,i,c,U),Q}function Ne(i,c){var P=i[c];if(P!=null){if(typeof P!="function")throw new TypeError("".concat(String(c)," is not a function"));return P}}function he(i){var c,P=(c={},c[n.iterator]=function(){return i.iterator},c),U=function(){return u(this,arguments,function(){return a(this,function(te){switch(te.label){case 0:return[5,s(p(h(P)))];case 1:return[4,o.apply(void 0,[te.sent()])];case 2:return[4,o.apply(void 0,[te.sent()])];case 3:return[2,te.sent()]}})})}(),Q=U.next;return{iterator:U,nextMethod:Q,done:!1}}var se=(Le=(ge=n.asyncIterator)!==null&&ge!==void 0?ge:(Te=n.for)===null||Te===void 0?void 0:Te.call(n,"Symbol.asyncIterator"))!==null&&Le!==void 0?Le:"@@asyncIterator";function Se(i,c,P){if(c===void 0&&(c="sync"),P===void 0)if(c==="async"){if(P=Ne(i,se),P===void 0){var U=Ne(i,n.iterator),Q=Se(i,"sync",U);return he(Q)}}else P=Ne(i,n.iterator);if(P===void 0)throw new TypeError("The object is not iterable");var te=M(P,i,[]);if(!E(te))throw new TypeError("The iterator method must return an object");var fe=te.next;return{iterator:te,nextMethod:fe,done:!1}}function Re(i){var c=M(i.nextMethod,i.iterator,[]);if(!E(c))throw new TypeError("The iterator.next() method must return an object");return c}function je(i){return!!i.done}function ze(i){return i.value}var We,Ge=(We={},We[se]=function(){return this},We);Object.defineProperty(Ge,se,{enumerable:!1});var De=function(){function i(c,P){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=c,this._preventCancel=P}return i.prototype.next=function(){var c=this,P=function(){return c._nextSteps()};return this._ongoingPromise=this._ongoingPromise?A(this._ongoingPromise,P,P):P(),this._ongoingPromise},i.prototype.return=function(c){var P=this,U=function(){return P._returnSteps(c)};return this._ongoingPromise?A(this._ongoingPromise,U,U):U()},i.prototype._nextSteps=function(){var c=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var P=this._reader,U,Q,te=F(function(xe,ke){U=xe,Q=ke}),fe={_chunkSteps:function(xe){c._ongoingPromise=void 0,L(function(){return U({value:xe,done:!1})})},_closeSteps:function(){c._ongoingPromise=void 0,c._isFinished=!0,ye(P),U({value:void 0,done:!0})},_errorSteps:function(xe){c._ongoingPromise=void 0,c._isFinished=!0,ye(P),Q(xe)}};return ae(P,fe),te},i.prototype._returnSteps=function(c){if(this._isFinished)return Promise.resolve({value:c,done:!0});this._isFinished=!0;var P=this._reader;if(!this._preventCancel){var U=le(P,c);return ye(P),A(U,function(){return{value:c,done:!0}})}return ye(P),y({value:c,done:!0})},i}(),Ve={next:function(){return Ke(this)?this._asyncIteratorImpl.next():b(Ze("next"))},return:function(i){return Ke(this)?this._asyncIteratorImpl.return(i):b(Ze("return"))}};Object.setPrototypeOf(Ve,Ge);function at(i,c){var P=Ee(i),U=new De(P,c),Q=Object.create(Ve);return Q._asyncIteratorImpl=U,Q}function Ke(i){if(!E(i)||!Object.prototype.hasOwnProperty.call(i,"_asyncIteratorImpl"))return!1;try{return i._asyncIteratorImpl instanceof De}catch{return!1}}function Ze(i){return new TypeError("ReadableStreamAsyncIterator.".concat(i," can only be used on a ReadableSteamAsyncIterator"))}var it=Number.isNaN||function(i){return i!==i};function et(i){return!(typeof i!="number"||it(i)||i<0)}function ot(i){var c=Ie(i.buffer,i.byteOffset,i.byteOffset+i.byteLength);return new Uint8Array(c)}function tt(i){var c=i._queue.shift();return i._queueTotalSize-=c.size,i._queueTotalSize<0&&(i._queueTotalSize=0),c.value}function gt(i,c,P){if(!et(P)||P===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");i._queue.push({value:c,size:P}),i._queueTotalSize+=P}function Ct(i){var c=i._queue.peek();return c.value}function ut(i){i._queue=new Y,i._queueTotalSize=0}function Dt(i){return i===DataView}function $t(i){return Dt(i.constructor)}function Mt(i){return Dt(i)?1:i.BYTES_PER_ELEMENT}var dt=function(){function i(){throw new TypeError("Illegal constructor")}return Object.defineProperty(i.prototype,"view",{get:function(){if(!Dr(this))throw Br("view");return this._view},enumerable:!1,configurable:!0}),i.prototype.respond=function(c){if(!Dr(this))throw Br("respond");if(ie(c,1,"respond"),c=be(c,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(pe(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");hr(this._associatedReadableByteStreamController,c)},i.prototype.respondWithNewView=function(c){if(!Dr(this))throw Br("respondWithNewView");if(ie(c,1,"respondWithNewView"),!ArrayBuffer.isView(c))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(pe(c.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");fr(this._associatedReadableByteStreamController,c)},i}();Object.defineProperties(dt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),w(dt.prototype.respond,"respond"),w(dt.prototype.respondWithNewView,"respondWithNewView"),typeof n.toStringTag=="symbol"&&Object.defineProperty(dt.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var wt=function(){function i(){throw new TypeError("Illegal constructor")}return Object.defineProperty(i.prototype,"byobRequest",{get:function(){if(!Lt(this))throw Zt("byobRequest");return jr(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"desiredSize",{get:function(){if(!Lt(this))throw Zt("desiredSize");return mn(this)},enumerable:!1,configurable:!0}),i.prototype.close=function(){if(!Lt(this))throw Zt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var c=this._controlledReadableByteStream._state;if(c!=="readable")throw new TypeError("The stream (in ".concat(c," state) is not in the readable state and cannot be closed"));Jt(this)},i.prototype.enqueue=function(c){if(!Lt(this))throw Zt("enqueue");if(ie(c,1,"enqueue"),!ArrayBuffer.isView(c))throw new TypeError("chunk must be an array buffer view");if(c.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(c.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var P=this._controlledReadableByteStream._state;if(P!=="readable")throw new TypeError("The stream (in ".concat(P," state) is not in the readable state and cannot be enqueued to"));dr(this,c)},i.prototype.error=function(c){if(c===void 0&&(c=void 0),!Lt(this))throw Zt("error");pt(this,c)},i.prototype[W]=function(c){sn(this),ut(this);var P=this._cancelAlgorithm(c);return ur(this),P},i.prototype[B]=function(c){var P=this._controlledReadableByteStream;if(this._queueTotalSize>0){pn(this,c);return}var U=this._autoAllocateChunkSize;if(U!==void 0){var Q=void 0;try{Q=new ArrayBuffer(U)}catch(fe){c._errorSteps(fe);return}var te={buffer:Q,bufferByteLength:U,byteOffset:0,byteLength:U,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(te)}Fe(P,c),Nt(this)},i.prototype[N]=function(){if(this._pendingPullIntos.length>0){var c=this._pendingPullIntos.peek();c.readerType="none",this._pendingPullIntos=new Y,this._pendingPullIntos.push(c)}},i}();Object.defineProperties(wt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),w(wt.prototype.close,"close"),w(wt.prototype.enqueue,"enqueue"),w(wt.prototype.error,"error"),typeof n.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Lt(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledReadableByteStream")?!1:i instanceof wt}function Dr(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_associatedReadableByteStreamController")?!1:i instanceof dt}function Nt(i){var c=oa(i);if(c){if(i._pulling){i._pullAgain=!0;return}i._pulling=!0;var P=i._pullAlgorithm();l(P,function(){return i._pulling=!1,i._pullAgain&&(i._pullAgain=!1,Nt(i)),null},function(U){return pt(i,U),null})}}function sn(i){Lr(i),i._pendingPullIntos=new Y}function Mr(i,c){var P=!1;i._state==="closed"&&(P=!0);var U=on(c);c.readerType==="default"?_e(i,U,P):fa(i,U,P)}function on(i){var c=i.bytesFilled,P=i.elementSize;return new i.viewConstructor(i.buffer,i.byteOffset,c/P)}function cr(i,c,P,U){i._queue.push({buffer:c,byteOffset:P,byteLength:U}),i._queueTotalSize+=U}function ln(i,c,P,U){var Q;try{Q=Ie(c,P,P+U)}catch(te){throw pt(i,te),te}cr(i,Q,0,U)}function cn(i,c){c.bytesFilled>0&&ln(i,c.buffer,c.byteOffset,c.bytesFilled),Gt(i)}function un(i,c){var P=Math.min(i._queueTotalSize,c.byteLength-c.bytesFilled),U=c.bytesFilled+P,Q=P,te=!1,fe=U%c.elementSize,xe=U-fe;xe>=c.minimumFill&&(Q=xe-c.bytesFilled,te=!0);for(var ke=i._queue;Q>0;){var Pe=ke.peek(),Be=Math.min(Q,Pe.byteLength),He=c.byteOffset+c.bytesFilled;ee(c.buffer,He,Pe.buffer,Pe.byteOffset,Be),Pe.byteLength===Be?ke.shift():(Pe.byteOffset+=Be,Pe.byteLength-=Be),i._queueTotalSize-=Be,dn(i,Be,c),Q-=Be}return te}function dn(i,c,P){P.bytesFilled+=c}function hn(i){i._queueTotalSize===0&&i._closeRequested?(ur(i),ir(i._controlledReadableByteStream)):Nt(i)}function Lr(i){i._byobRequest!==null&&(i._byobRequest._associatedReadableByteStreamController=void 0,i._byobRequest._view=null,i._byobRequest=null)}function Nr(i){for(;i._pendingPullIntos.length>0;){if(i._queueTotalSize===0)return;var c=i._pendingPullIntos.peek();un(i,c)&&(Gt(i),Mr(i._controlledReadableByteStream,c))}}function na(i){for(var c=i._controlledReadableByteStream._reader;c._readRequests.length>0;){if(i._queueTotalSize===0)return;var P=c._readRequests.shift();pn(i,P)}}function aa(i,c,P,U){var Q=i._controlledReadableByteStream,te=c.constructor,fe=Mt(te),xe=c.byteOffset,ke=c.byteLength,Pe=P*fe,Be;try{Be=ne(c.buffer)}catch(mt){U._errorSteps(mt);return}var He={buffer:Be,bufferByteLength:Be.byteLength,byteOffset:xe,byteLength:ke,bytesFilled:0,minimumFill:Pe,elementSize:fe,viewConstructor:te,readerType:"byob"};if(i._pendingPullIntos.length>0){i._pendingPullIntos.push(He),vn(Q,U);return}if(Q._state==="closed"){var qe=new te(He.buffer,He.byteOffset,0);U._closeSteps(qe);return}if(i._queueTotalSize>0){if(un(i,He)){var st=on(He);hn(i),U._chunkSteps(st);return}if(i._closeRequested){var ht=new TypeError("Insufficient bytes to fill elements in the given buffer");pt(i,ht),U._errorSteps(ht);return}}i._pendingPullIntos.push(He),vn(Q,U),Nt(i)}function ia(i,c){c.readerType==="none"&&Gt(i);var P=i._controlledReadableByteStream;if(Wr(P))for(;bn(P)>0;){var U=Gt(i);Mr(P,U)}}function sa(i,c,P){if(dn(i,c,P),P.readerType==="none"){cn(i,P),Nr(i);return}if(!(P.bytesFilled<P.minimumFill)){Gt(i);var U=P.bytesFilled%P.elementSize;if(U>0){var Q=P.byteOffset+P.bytesFilled;ln(i,P.buffer,Q-U,U)}P.bytesFilled-=U,Mr(i._controlledReadableByteStream,P),Nr(i)}}function fn(i,c){var P=i._pendingPullIntos.peek();Lr(i);var U=i._controlledReadableByteStream._state;U==="closed"?ia(i,P):sa(i,c,P),Nt(i)}function Gt(i){var c=i._pendingPullIntos.shift();return c}function oa(i){var c=i._controlledReadableByteStream;if(c._state!=="readable"||i._closeRequested||!i._started)return!1;if(Qe(c)&&Ye(c)>0||Wr(c)&&bn(c)>0)return!0;var P=mn(i);return P>0}function ur(i){i._pullAlgorithm=void 0,i._cancelAlgorithm=void 0}function Jt(i){var c=i._controlledReadableByteStream;if(!(i._closeRequested||c._state!=="readable")){if(i._queueTotalSize>0){i._closeRequested=!0;return}if(i._pendingPullIntos.length>0){var P=i._pendingPullIntos.peek();if(P.bytesFilled%P.elementSize!==0){var U=new TypeError("Insufficient bytes to fill elements in the given buffer");throw pt(i,U),U}}ur(i),ir(c)}}function dr(i,c){var P=i._controlledReadableByteStream;if(!(i._closeRequested||P._state!=="readable")){var U=c.buffer,Q=c.byteOffset,te=c.byteLength;if(pe(U))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");var fe=ne(U);if(i._pendingPullIntos.length>0){var xe=i._pendingPullIntos.peek();if(pe(xe.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Lr(i),xe.buffer=ne(xe.buffer),xe.readerType==="none"&&cn(i,xe)}if(Qe(P))if(na(i),Ye(P)===0)cr(i,fe,Q,te);else{i._pendingPullIntos.length>0&&Gt(i);var ke=new Uint8Array(fe,Q,te);_e(P,ke,!1)}else Wr(P)?(cr(i,fe,Q,te),Nr(i)):cr(i,fe,Q,te);Nt(i)}}function pt(i,c){var P=i._controlledReadableByteStream;P._state==="readable"&&(sn(i),ut(i),ur(i),$n(P,c))}function pn(i,c){var P=i._queue.shift();i._queueTotalSize-=P.byteLength,hn(i);var U=new Uint8Array(P.buffer,P.byteOffset,P.byteLength);c._chunkSteps(U)}function jr(i){if(i._byobRequest===null&&i._pendingPullIntos.length>0){var c=i._pendingPullIntos.peek(),P=new Uint8Array(c.buffer,c.byteOffset+c.bytesFilled,c.byteLength-c.bytesFilled),U=Object.create(dt.prototype);ca(U,i,P),i._byobRequest=U}return i._byobRequest}function mn(i){var c=i._controlledReadableByteStream._state;return c==="errored"?null:c==="closed"?0:i._strategyHWM-i._queueTotalSize}function hr(i,c){var P=i._pendingPullIntos.peek(),U=i._controlledReadableByteStream._state;if(U==="closed"){if(c!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(c===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(P.bytesFilled+c>P.byteLength)throw new RangeError("bytesWritten out of range")}P.buffer=ne(P.buffer),fn(i,c)}function fr(i,c){var P=i._pendingPullIntos.peek(),U=i._controlledReadableByteStream._state;if(U==="closed"){if(c.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(c.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(P.byteOffset+P.bytesFilled!==c.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(P.bufferByteLength!==c.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(P.bytesFilled+c.byteLength>P.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var Q=c.byteLength;P.buffer=ne(c.buffer),fn(i,Q)}function gn(i,c,P,U,Q,te,fe){c._controlledReadableByteStream=i,c._pullAgain=!1,c._pulling=!1,c._byobRequest=null,c._queue=c._queueTotalSize=void 0,ut(c),c._closeRequested=!1,c._started=!1,c._strategyHWM=te,c._pullAlgorithm=U,c._cancelAlgorithm=Q,c._autoAllocateChunkSize=fe,c._pendingPullIntos=new Y,i._readableStreamController=c;var xe=P();l(y(xe),function(){return c._started=!0,Nt(c),null},function(ke){return pt(c,ke),null})}function la(i,c,P){var U=Object.create(wt.prototype),Q,te,fe;c.start!==void 0?Q=function(){return c.start(U)}:Q=function(){},c.pull!==void 0?te=function(){return c.pull(U)}:te=function(){return y(void 0)},c.cancel!==void 0?fe=function(ke){return c.cancel(ke)}:fe=function(){return y(void 0)};var xe=c.autoAllocateChunkSize;if(xe===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");gn(i,U,Q,te,fe,P,xe)}function ca(i,c,P){i._associatedReadableByteStreamController=c,i._view=P}function Br(i){return new TypeError("ReadableStreamBYOBRequest.prototype.".concat(i," can only be used on a ReadableStreamBYOBRequest"))}function Zt(i){return new TypeError("ReadableByteStreamController.prototype.".concat(i," can only be used on a ReadableByteStreamController"))}function ua(i,c){j(i,c);var P=i==null?void 0:i.mode;return{mode:P===void 0?void 0:da(P,"".concat(c," has member 'mode' that"))}}function da(i,c){if(i="".concat(i),i!=="byob")throw new TypeError("".concat(c," '").concat(i,"' is not a valid enumeration value for ReadableStreamReaderMode"));return i}function ha(i,c){var P;j(i,c);var U=(P=i==null?void 0:i.min)!==null&&P!==void 0?P:1;return{min:be(U,"".concat(c," has member 'min' that"))}}function yn(i){return new Tt(i)}function vn(i,c){i._reader._readIntoRequests.push(c)}function fa(i,c,P){var U=i._reader,Q=U._readIntoRequests.shift();P?Q._closeSteps(c):Q._chunkSteps(c)}function bn(i){return i._reader._readIntoRequests.length}function Wr(i){var c=i._reader;return!(c===void 0||!jt(c))}var Tt=function(){function i(c){if(ie(c,1,"ReadableStreamBYOBReader"),Ae(c,"First parameter"),Ot(c))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Lt(c._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");J(this,c),this._readIntoRequests=new Y}return Object.defineProperty(i.prototype,"closed",{get:function(){return jt(this)?this._closedPromise:b(pr("closed"))},enumerable:!1,configurable:!0}),i.prototype.cancel=function(c){return c===void 0&&(c=void 0),jt(this)?this._ownerReadableStream===void 0?b(Ce("cancel")):le(this,c):b(pr("cancel"))},i.prototype.read=function(c,P){if(P===void 0&&(P={}),!jt(this))return b(pr("read"));if(!ArrayBuffer.isView(c))return b(new TypeError("view must be an array buffer view"));if(c.byteLength===0)return b(new TypeError("view must have non-zero byteLength"));if(c.buffer.byteLength===0)return b(new TypeError("view's buffer must have non-zero byteLength"));if(pe(c.buffer))return b(new TypeError("view's buffer has been detached"));var U;try{U=ha(P,"options")}catch(Pe){return b(Pe)}var Q=U.min;if(Q===0)return b(new TypeError("options.min must be greater than 0"));if($t(c)){if(Q>c.byteLength)return b(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(Q>c.length)return b(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return b(Ce("read from"));var te,fe,xe=F(function(Pe,Be){te=Pe,fe=Be}),ke={_chunkSteps:function(Pe){return te({value:Pe,done:!1})},_closeSteps:function(Pe){return te({value:Pe,done:!0})},_errorSteps:function(Pe){return fe(Pe)}};return Sn(this,c,Q,ke),xe},i.prototype.releaseLock=function(){if(!jt(this))throw pr("releaseLock");this._ownerReadableStream!==void 0&&pa(this)},i}();Object.defineProperties(Tt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),w(Tt.prototype.cancel,"cancel"),w(Tt.prototype.read,"read"),w(Tt.prototype.releaseLock,"releaseLock"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function jt(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_readIntoRequests")?!1:i instanceof Tt}function Sn(i,c,P,U){var Q=i._ownerReadableStream;Q._disturbed=!0,Q._state==="errored"?U._errorSteps(Q._storedError):aa(Q._readableStreamController,c,P,U)}function pa(i){ye(i);var c=new TypeError("Reader was released");_n(i,c)}function _n(i,c){var P=i._readIntoRequests;i._readIntoRequests=new Y,P.forEach(function(U){U._errorSteps(c)})}function pr(i){return new TypeError("ReadableStreamBYOBReader.prototype.".concat(i," can only be used on a ReadableStreamBYOBReader"))}function er(i,c){var P=i.highWaterMark;if(P===void 0)return c;if(it(P)||P<0)throw new RangeError("Invalid highWaterMark");return P}function mr(i){var c=i.size;return c||function(){return 1}}function gr(i,c){j(i,c);var P=i==null?void 0:i.highWaterMark,U=i==null?void 0:i.size;return{highWaterMark:P===void 0?void 0:oe(P),size:U===void 0?void 0:ma(U,"".concat(c," has member 'size' that"))}}function ma(i,c){return G(i,c),function(P){return oe(i(P))}}function ga(i,c){j(i,c);var P=i==null?void 0:i.abort,U=i==null?void 0:i.close,Q=i==null?void 0:i.start,te=i==null?void 0:i.type,fe=i==null?void 0:i.write;return{abort:P===void 0?void 0:ya(P,i,"".concat(c," has member 'abort' that")),close:U===void 0?void 0:va(U,i,"".concat(c," has member 'close' that")),start:Q===void 0?void 0:ba(Q,i,"".concat(c," has member 'start' that")),write:fe===void 0?void 0:Sa(fe,i,"".concat(c," has member 'write' that")),type:te}}function ya(i,c,P){return G(i,P),function(U){return V(i,c,[U])}}function va(i,c,P){return G(i,P),function(){return V(i,c,[])}}function ba(i,c,P){return G(i,P),function(U){return M(i,c,[U])}}function Sa(i,c,P){return G(i,P),function(U,Q){return V(i,c,[U,Q])}}function An(i,c){if(!Ht(i))throw new TypeError("".concat(c," is not a WritableStream."))}function _a(i){if(typeof i!="object"||i===null)return!1;try{return typeof i.aborted=="boolean"}catch{return!1}}var Aa=typeof AbortController=="function";function wa(){if(Aa)return new AbortController}var Rt=function(){function i(c,P){c===void 0&&(c={}),P===void 0&&(P={}),c===void 0?c=null:re(c,"First parameter");var U=gr(P,"Second parameter"),Q=ga(c,"First parameter");En(this);var te=Q.type;if(te!==void 0)throw new RangeError("Invalid type is specified");var fe=mr(U),xe=er(U,1);Na(this,Q,xe,fe)}return Object.defineProperty(i.prototype,"locked",{get:function(){if(!Ht(this))throw _r("locked");return qt(this)},enumerable:!1,configurable:!0}),i.prototype.abort=function(c){return c===void 0&&(c=void 0),Ht(this)?qt(this)?b(new TypeError("Cannot abort a stream that already has a writer")):yr(this,c):b(_r("abort"))},i.prototype.close=function(){return Ht(this)?qt(this)?b(new TypeError("Cannot close a stream that already has a writer")):bt(this)?b(new TypeError("Cannot close an already-closing stream")):Pn(this):b(_r("close"))},i.prototype.getWriter=function(){if(!Ht(this))throw _r("getWriter");return wn(this)},i}();Object.defineProperties(Rt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),w(Rt.prototype.abort,"abort"),w(Rt.prototype.close,"close"),w(Rt.prototype.getWriter,"getWriter"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});function wn(i){return new Et(i)}function Ea(i,c,P,U,Q,te){Q===void 0&&(Q=1),te===void 0&&(te=function(){return 1});var fe=Object.create(Rt.prototype);En(fe);var xe=Object.create(Yt.prototype);return On(fe,xe,i,c,P,U,Q,te),fe}function En(i){i._state="writable",i._storedError=void 0,i._writer=void 0,i._writableStreamController=void 0,i._writeRequests=new Y,i._inFlightWriteRequest=void 0,i._closeRequest=void 0,i._inFlightCloseRequest=void 0,i._pendingAbortRequest=void 0,i._backpressure=!1}function Ht(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_writableStreamController")?!1:i instanceof Rt}function qt(i){return i._writer!==void 0}function yr(i,c){var P;if(i._state==="closed"||i._state==="errored")return y(void 0);i._writableStreamController._abortReason=c,(P=i._writableStreamController._abortController)===null||P===void 0||P.abort(c);var U=i._state;if(U==="closed"||U==="errored")return y(void 0);if(i._pendingAbortRequest!==void 0)return i._pendingAbortRequest._promise;var Q=!1;U==="erroring"&&(Q=!0,c=void 0);var te=F(function(fe,xe){i._pendingAbortRequest={_promise:void 0,_resolve:fe,_reject:xe,_reason:c,_wasAlreadyErroring:Q}});return i._pendingAbortRequest._promise=te,Q||zr(i,c),te}function Pn(i){var c=i._state;if(c==="closed"||c==="errored")return b(new TypeError("The stream (in ".concat(c," state) is not in the writable state and cannot be closed")));var P=F(function(Q,te){var fe={_resolve:Q,_reject:te};i._closeRequest=fe}),U=i._writer;return U!==void 0&&i._backpressure&&c==="writable"&&Xr(U),ja(i._writableStreamController),P}function Pa(i){var c=F(function(P,U){var Q={_resolve:P,_reject:U};i._writeRequests.push(Q)});return c}function Ur(i,c){var P=i._state;if(P==="writable"){zr(i,c);return}$r(i)}function zr(i,c){var P=i._writableStreamController;i._state="erroring",i._storedError=c;var U=i._writer;U!==void 0&&Cn(U,c),!ka(i)&&P._started&&$r(i)}function $r(i){i._state="errored",i._writableStreamController[H]();var c=i._storedError;if(i._writeRequests.forEach(function(Q){Q._reject(c)}),i._writeRequests=new Y,i._pendingAbortRequest===void 0){vr(i);return}var P=i._pendingAbortRequest;if(i._pendingAbortRequest=void 0,P._wasAlreadyErroring){P._reject(c),vr(i);return}var U=i._writableStreamController[X](P._reason);l(U,function(){return P._resolve(),vr(i),null},function(Q){return P._reject(Q),vr(i),null})}function xa(i){i._inFlightWriteRequest._resolve(void 0),i._inFlightWriteRequest=void 0}function Ca(i,c){i._inFlightWriteRequest._reject(c),i._inFlightWriteRequest=void 0,Ur(i,c)}function Ta(i){i._inFlightCloseRequest._resolve(void 0),i._inFlightCloseRequest=void 0;var c=i._state;c==="erroring"&&(i._storedError=void 0,i._pendingAbortRequest!==void 0&&(i._pendingAbortRequest._resolve(),i._pendingAbortRequest=void 0)),i._state="closed";var P=i._writer;P!==void 0&&Mn(P)}function Ra(i,c){i._inFlightCloseRequest._reject(c),i._inFlightCloseRequest=void 0,i._pendingAbortRequest!==void 0&&(i._pendingAbortRequest._reject(c),i._pendingAbortRequest=void 0),Ur(i,c)}function bt(i){return!(i._closeRequest===void 0&&i._inFlightCloseRequest===void 0)}function ka(i){return!(i._inFlightWriteRequest===void 0&&i._inFlightCloseRequest===void 0)}function Oa(i){i._inFlightCloseRequest=i._closeRequest,i._closeRequest=void 0}function Ia(i){i._inFlightWriteRequest=i._writeRequests.shift()}function vr(i){i._closeRequest!==void 0&&(i._closeRequest._reject(i._storedError),i._closeRequest=void 0);var c=i._writer;c!==void 0&&Kr(c,i._storedError)}function Gr(i,c){var P=i._writer;P!==void 0&&c!==i._backpressure&&(c?Ha(P):Xr(P)),i._backpressure=c}var Et=function(){function i(c){if(ie(c,1,"WritableStreamDefaultWriter"),An(c,"First parameter"),qt(c))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=c,c._writer=this;var P=c._state;if(P==="writable")!bt(c)&&c._backpressure?wr(this):Ln(this),Ar(this);else if(P==="erroring")Vr(this,c._storedError),Ar(this);else if(P==="closed")Ln(this),$a(this);else{var U=c._storedError;Vr(this,U),Dn(this,U)}}return Object.defineProperty(i.prototype,"closed",{get:function(){return Bt(this)?this._closedPromise:b(Wt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"desiredSize",{get:function(){if(!Bt(this))throw Wt("desiredSize");if(this._ownerWritableStream===void 0)throw rr("desiredSize");return La(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ready",{get:function(){return Bt(this)?this._readyPromise:b(Wt("ready"))},enumerable:!1,configurable:!0}),i.prototype.abort=function(c){return c===void 0&&(c=void 0),Bt(this)?this._ownerWritableStream===void 0?b(rr("abort")):Fa(this,c):b(Wt("abort"))},i.prototype.close=function(){if(!Bt(this))return b(Wt("close"));var c=this._ownerWritableStream;return c===void 0?b(rr("close")):bt(c)?b(new TypeError("Cannot close an already-closing stream")):xn(this)},i.prototype.releaseLock=function(){if(!Bt(this))throw Wt("releaseLock");var c=this._ownerWritableStream;c!==void 0&&Tn(this)},i.prototype.write=function(c){return c===void 0&&(c=void 0),Bt(this)?this._ownerWritableStream===void 0?b(rr("write to")):Rn(this,c):b(Wt("write"))},i}();Object.defineProperties(Et.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),w(Et.prototype.abort,"abort"),w(Et.prototype.close,"close"),w(Et.prototype.releaseLock,"releaseLock"),w(Et.prototype.write,"write"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Bt(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_ownerWritableStream")?!1:i instanceof Et}function Fa(i,c){var P=i._ownerWritableStream;return yr(P,c)}function xn(i){var c=i._ownerWritableStream;return Pn(c)}function Da(i){var c=i._ownerWritableStream,P=c._state;return bt(c)||P==="closed"?y(void 0):P==="errored"?b(c._storedError):xn(i)}function Ma(i,c){i._closedPromiseState==="pending"?Kr(i,c):Ga(i,c)}function Cn(i,c){i._readyPromiseState==="pending"?Nn(i,c):qa(i,c)}function La(i){var c=i._ownerWritableStream,P=c._state;return P==="errored"||P==="erroring"?null:P==="closed"?0:In(c._writableStreamController)}function Tn(i){var c=i._ownerWritableStream,P=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Cn(i,P),Ma(i,P),c._writer=void 0,i._ownerWritableStream=void 0}function Rn(i,c){var P=i._ownerWritableStream,U=P._writableStreamController,Q=Ba(U,c);if(P!==i._ownerWritableStream)return b(rr("write to"));var te=P._state;if(te==="errored")return b(P._storedError);if(bt(P)||te==="closed")return b(new TypeError("The stream is closing or closed and cannot be written to"));if(te==="erroring")return b(P._storedError);var fe=Pa(P);return Wa(U,c,Q),fe}var kn={},Yt=function(){function i(){throw new TypeError("Illegal constructor")}return Object.defineProperty(i.prototype,"abortReason",{get:function(){if(!Hr(this))throw Yr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"signal",{get:function(){if(!Hr(this))throw Yr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),i.prototype.error=function(c){if(c===void 0&&(c=void 0),!Hr(this))throw Yr("error");var P=this._controlledWritableStream._state;P==="writable"&&Fn(this,c)},i.prototype[X]=function(c){var P=this._abortAlgorithm(c);return br(this),P},i.prototype[H]=function(){ut(this)},i}();Object.defineProperties(Yt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Yt.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Hr(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledWritableStream")?!1:i instanceof Yt}function On(i,c,P,U,Q,te,fe,xe){c._controlledWritableStream=i,i._writableStreamController=c,c._queue=void 0,c._queueTotalSize=void 0,ut(c),c._abortReason=void 0,c._abortController=wa(),c._started=!1,c._strategySizeAlgorithm=xe,c._strategyHWM=fe,c._writeAlgorithm=U,c._closeAlgorithm=Q,c._abortAlgorithm=te;var ke=qr(c);Gr(i,ke);var Pe=P(),Be=y(Pe);l(Be,function(){return c._started=!0,Sr(c),null},function(He){return c._started=!0,Ur(i,He),null})}function Na(i,c,P,U){var Q=Object.create(Yt.prototype),te,fe,xe,ke;c.start!==void 0?te=function(){return c.start(Q)}:te=function(){},c.write!==void 0?fe=function(Pe){return c.write(Pe,Q)}:fe=function(){return y(void 0)},c.close!==void 0?xe=function(){return c.close()}:xe=function(){return y(void 0)},c.abort!==void 0?ke=function(Pe){return c.abort(Pe)}:ke=function(){return y(void 0)},On(i,Q,te,fe,xe,ke,P,U)}function br(i){i._writeAlgorithm=void 0,i._closeAlgorithm=void 0,i._abortAlgorithm=void 0,i._strategySizeAlgorithm=void 0}function ja(i){gt(i,kn,0),Sr(i)}function Ba(i,c){try{return i._strategySizeAlgorithm(c)}catch(P){return tr(i,P),1}}function In(i){return i._strategyHWM-i._queueTotalSize}function Wa(i,c,P){try{gt(i,c,P)}catch(te){tr(i,te);return}var U=i._controlledWritableStream;if(!bt(U)&&U._state==="writable"){var Q=qr(i);Gr(U,Q)}Sr(i)}function Sr(i){var c=i._controlledWritableStream;if(i._started&&c._inFlightWriteRequest===void 0){var P=c._state;if(P==="erroring"){$r(c);return}if(i._queue.length!==0){var U=Ct(i);U===kn?Ua(i):za(i,U)}}}function tr(i,c){i._controlledWritableStream._state==="writable"&&Fn(i,c)}function Ua(i){var c=i._controlledWritableStream;Oa(c),tt(i);var P=i._closeAlgorithm();br(i),l(P,function(){return Ta(c),null},function(U){return Ra(c,U),null})}function za(i,c){var P=i._controlledWritableStream;Ia(P);var U=i._writeAlgorithm(c);l(U,function(){xa(P);var Q=P._state;if(tt(i),!bt(P)&&Q==="writable"){var te=qr(i);Gr(P,te)}return Sr(i),null},function(Q){return P._state==="writable"&&br(i),Ca(P,Q),null})}function qr(i){var c=In(i);return c<=0}function Fn(i,c){var P=i._controlledWritableStream;br(i),zr(P,c)}function _r(i){return new TypeError("WritableStream.prototype.".concat(i," can only be used on a WritableStream"))}function Yr(i){return new TypeError("WritableStreamDefaultController.prototype.".concat(i," can only be used on a WritableStreamDefaultController"))}function Wt(i){return new TypeError("WritableStreamDefaultWriter.prototype.".concat(i," can only be used on a WritableStreamDefaultWriter"))}function rr(i){return new TypeError("Cannot "+i+" a stream using a released writer")}function Ar(i){i._closedPromise=F(function(c,P){i._closedPromise_resolve=c,i._closedPromise_reject=P,i._closedPromiseState="pending"})}function Dn(i,c){Ar(i),Kr(i,c)}function $a(i){Ar(i),Mn(i)}function Kr(i,c){i._closedPromise_reject!==void 0&&(C(i._closedPromise),i._closedPromise_reject(c),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0,i._closedPromiseState="rejected")}function Ga(i,c){Dn(i,c)}function Mn(i){i._closedPromise_resolve!==void 0&&(i._closedPromise_resolve(void 0),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0,i._closedPromiseState="resolved")}function wr(i){i._readyPromise=F(function(c,P){i._readyPromise_resolve=c,i._readyPromise_reject=P}),i._readyPromiseState="pending"}function Vr(i,c){wr(i),Nn(i,c)}function Ln(i){wr(i),Xr(i)}function Nn(i,c){i._readyPromise_reject!==void 0&&(C(i._readyPromise),i._readyPromise_reject(c),i._readyPromise_resolve=void 0,i._readyPromise_reject=void 0,i._readyPromiseState="rejected")}function Ha(i){wr(i)}function qa(i,c){Vr(i,c)}function Xr(i){i._readyPromise_resolve!==void 0&&(i._readyPromise_resolve(void 0),i._readyPromise_resolve=void 0,i._readyPromise_reject=void 0,i._readyPromiseState="fulfilled")}function Ya(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof commonjsGlobal<"u")return commonjsGlobal}var Qr=Ya();function Ka(i){if(!(typeof i=="function"||typeof i=="object")||i.name!=="DOMException")return!1;try{return new i,!0}catch{return!1}}function Va(){var i=Qr==null?void 0:Qr.DOMException;return Ka(i)?i:void 0}function Xa(){var i=function(P,U){this.message=P||"",this.name=U||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return w(i,"DOMException"),i.prototype=Object.create(Error.prototype),Object.defineProperty(i.prototype,"constructor",{value:i,writable:!0,configurable:!0}),i}var Qa=Va()||Xa();function jn(i,c,P,U,Q,te){var fe=Ee(i),xe=wn(c);i._disturbed=!0;var ke=!1,Pe=y(void 0);return F(function(Be,He){var qe;if(te!==void 0){if(qe=function(){var Ue=te.reason!==void 0?te.reason:new Qa("Aborted","AbortError"),Je=[];U||Je.push(function(){return c._state==="writable"?yr(c,Ue):y(void 0)}),Q||Je.push(function(){return i._state==="readable"?vt(i,Ue):y(void 0)}),ft(function(){return Promise.all(Je.map(function(nt){return nt()}))},!0,Ue)},te.aborted){qe();return}te.addEventListener("abort",qe)}function st(){return F(function(Ue,Je){function nt(At){At?Ue():g(ht(),nt,Je)}nt(!1)})}function ht(){return ke?y(!0):g(xe._readyPromise,function(){return F(function(Ue,Je){ae(fe,{_chunkSteps:function(nt){Pe=g(Rn(xe,nt),void 0,f),Ue(!1)},_closeSteps:function(){return Ue(!0)},_errorSteps:Je})})})}if(lt(i,fe._closedPromise,function(Ue){return U?xt(!0,Ue):ft(function(){return yr(c,Ue)},!0,Ue),null}),lt(c,xe._closedPromise,function(Ue){return Q?xt(!0,Ue):ft(function(){return vt(i,Ue)},!0,Ue),null}),_t(i,fe._closedPromise,function(){return P?xt():ft(function(){return Da(xe)}),null}),bt(c)||c._state==="closed"){var mt=new TypeError("the destination writable stream closed before all data could be piped to it");Q?xt(!0,mt):ft(function(){return vt(i,mt)},!0,mt)}C(st());function St(){var Ue=Pe;return g(Pe,function(){return Ue!==Pe?St():void 0})}function lt(Ue,Je,nt){Ue._state==="errored"?nt(Ue._storedError):_(Je,nt)}function _t(Ue,Je,nt){Ue._state==="closed"?nt():d(Je,nt)}function ft(Ue,Je,nt){if(ke)return;ke=!0,c._state==="writable"&&!bt(c)?d(St(),At):At();function At(){return l(Ue(),function(){return rt(Je,nt)},function(Ft){return rt(!0,Ft)}),null}}function xt(Ue,Je){ke||(ke=!0,c._state==="writable"&&!bt(c)?d(St(),function(){return rt(Ue,Je)}):rt(Ue,Je))}function rt(Ue,Je){return Tn(xe),ye(fe),te!==void 0&&te.removeEventListener("abort",qe),Ue?He(Je):Be(void 0),null}})}var Pt=function(){function i(){throw new TypeError("Illegal constructor")}return Object.defineProperty(i.prototype,"desiredSize",{get:function(){if(!Er(this))throw xr("desiredSize");return Jr(this)},enumerable:!1,configurable:!0}),i.prototype.close=function(){if(!Er(this))throw xr("close");if(!Vt(this))throw new TypeError("The stream is not in a state that permits close");Ut(this)},i.prototype.enqueue=function(c){if(c===void 0&&(c=void 0),!Er(this))throw xr("enqueue");if(!Vt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Kt(this,c)},i.prototype.error=function(c){if(c===void 0&&(c=void 0),!Er(this))throw xr("error");yt(this,c)},i.prototype[W]=function(c){ut(this);var P=this._cancelAlgorithm(c);return Pr(this),P},i.prototype[B]=function(c){var P=this._controlledReadableStream;if(this._queue.length>0){var U=tt(this);this._closeRequested&&this._queue.length===0?(Pr(this),ir(P)):nr(this),c._chunkSteps(U)}else Fe(P,c),nr(this)},i.prototype[N]=function(){},i}();Object.defineProperties(Pt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),w(Pt.prototype.close,"close"),w(Pt.prototype.enqueue,"enqueue"),w(Pt.prototype.error,"error"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Er(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledReadableStream")?!1:i instanceof Pt}function nr(i){var c=Bn(i);if(c){if(i._pulling){i._pullAgain=!0;return}i._pulling=!0;var P=i._pullAlgorithm();l(P,function(){return i._pulling=!1,i._pullAgain&&(i._pullAgain=!1,nr(i)),null},function(U){return yt(i,U),null})}}function Bn(i){var c=i._controlledReadableStream;if(!Vt(i)||!i._started)return!1;if(Ot(c)&&Ye(c)>0)return!0;var P=Jr(i);return P>0}function Pr(i){i._pullAlgorithm=void 0,i._cancelAlgorithm=void 0,i._strategySizeAlgorithm=void 0}function Ut(i){if(Vt(i)){var c=i._controlledReadableStream;i._closeRequested=!0,i._queue.length===0&&(Pr(i),ir(c))}}function Kt(i,c){if(Vt(i)){var P=i._controlledReadableStream;if(Ot(P)&&Ye(P)>0)_e(P,c,!1);else{var U=void 0;try{U=i._strategySizeAlgorithm(c)}catch(Q){throw yt(i,Q),Q}try{gt(i,c,U)}catch(Q){throw yt(i,Q),Q}}nr(i)}}function yt(i,c){var P=i._controlledReadableStream;P._state==="readable"&&(ut(i),Pr(i),$n(P,c))}function Jr(i){var c=i._controlledReadableStream._state;return c==="errored"?null:c==="closed"?0:i._strategyHWM-i._queueTotalSize}function Ja(i){return!Bn(i)}function Vt(i){var c=i._controlledReadableStream._state;return!i._closeRequested&&c==="readable"}function Wn(i,c,P,U,Q,te,fe){c._controlledReadableStream=i,c._queue=void 0,c._queueTotalSize=void 0,ut(c),c._started=!1,c._closeRequested=!1,c._pullAgain=!1,c._pulling=!1,c._strategySizeAlgorithm=fe,c._strategyHWM=te,c._pullAlgorithm=U,c._cancelAlgorithm=Q,i._readableStreamController=c;var xe=P();l(y(xe),function(){return c._started=!0,nr(c),null},function(ke){return yt(c,ke),null})}function Za(i,c,P,U){var Q=Object.create(Pt.prototype),te,fe,xe;c.start!==void 0?te=function(){return c.start(Q)}:te=function(){},c.pull!==void 0?fe=function(){return c.pull(Q)}:fe=function(){return y(void 0)},c.cancel!==void 0?xe=function(ke){return c.cancel(ke)}:xe=function(){return y(void 0)},Wn(i,Q,te,fe,xe,P,U)}function xr(i){return new TypeError("ReadableStreamDefaultController.prototype.".concat(i," can only be used on a ReadableStreamDefaultController"))}function ei(i,c){return Lt(i._readableStreamController)?ri(i):ti(i)}function ti(i,c){var P=Ee(i),U=!1,Q=!1,te=!1,fe=!1,xe,ke,Pe,Be,He,qe=F(function(lt){He=lt});function st(){if(U)return Q=!0,y(void 0);U=!0;var lt={_chunkSteps:function(_t){L(function(){Q=!1;var ft=_t,xt=_t;te||Kt(Pe._readableStreamController,ft),fe||Kt(Be._readableStreamController,xt),U=!1,Q&&st()})},_closeSteps:function(){U=!1,te||Ut(Pe._readableStreamController),fe||Ut(Be._readableStreamController),(!te||!fe)&&He(void 0)},_errorSteps:function(){U=!1}};return ae(P,lt),y(void 0)}function ht(lt){if(te=!0,xe=lt,fe){var _t=de([xe,ke]),ft=vt(i,_t);He(ft)}return qe}function mt(lt){if(fe=!0,ke=lt,te){var _t=de([xe,ke]),ft=vt(i,_t);He(ft)}return qe}function St(){}return Pe=ar(St,st,ht),Be=ar(St,st,mt),_(P._closedPromise,function(lt){return yt(Pe._readableStreamController,lt),yt(Be._readableStreamController,lt),(!te||!fe)&&He(void 0),null}),[Pe,Be]}function ri(i){var c=Ee(i),P=!1,U=!1,Q=!1,te=!1,fe=!1,xe,ke,Pe,Be,He,qe=F(function(rt){He=rt});function st(rt){_(rt._closedPromise,function(Ue){return rt!==c||(pt(Pe._readableStreamController,Ue),pt(Be._readableStreamController,Ue),(!te||!fe)&&He(void 0)),null})}function ht(){jt(c)&&(ye(c),c=Ee(i),st(c));var rt={_chunkSteps:function(Ue){L(function(){U=!1,Q=!1;var Je=Ue,nt=Ue;if(!te&&!fe)try{nt=ot(Ue)}catch(At){pt(Pe._readableStreamController,At),pt(Be._readableStreamController,At),He(vt(i,At));return}te||dr(Pe._readableStreamController,Je),fe||dr(Be._readableStreamController,nt),P=!1,U?St():Q&&lt()})},_closeSteps:function(){P=!1,te||Jt(Pe._readableStreamController),fe||Jt(Be._readableStreamController),Pe._readableStreamController._pendingPullIntos.length>0&&hr(Pe._readableStreamController,0),Be._readableStreamController._pendingPullIntos.length>0&&hr(Be._readableStreamController,0),(!te||!fe)&&He(void 0)},_errorSteps:function(){P=!1}};ae(c,rt)}function mt(rt,Ue){we(c)&&(ye(c),c=yn(i),st(c));var Je=Ue?Be:Pe,nt=Ue?Pe:Be,At={_chunkSteps:function(Ft){L(function(){U=!1,Q=!1;var Qt=Ue?fe:te,sr=Ue?te:fe;if(sr)Qt||fr(Je._readableStreamController,Ft);else{var ra=void 0;try{ra=ot(Ft)}catch(an){pt(Je._readableStreamController,an),pt(nt._readableStreamController,an),He(vt(i,an));return}Qt||fr(Je._readableStreamController,Ft),dr(nt._readableStreamController,ra)}P=!1,U?St():Q&&lt()})},_closeSteps:function(Ft){P=!1;var Qt=Ue?fe:te,sr=Ue?te:fe;Qt||Jt(Je._readableStreamController),sr||Jt(nt._readableStreamController),Ft!==void 0&&(Qt||fr(Je._readableStreamController,Ft),!sr&&nt._readableStreamController._pendingPullIntos.length>0&&hr(nt._readableStreamController,0)),(!Qt||!sr)&&He(void 0)},_errorSteps:function(){P=!1}};Sn(c,rt,1,At)}function St(){if(P)return U=!0,y(void 0);P=!0;var rt=jr(Pe._readableStreamController);return rt===null?ht():mt(rt._view,!1),y(void 0)}function lt(){if(P)return Q=!0,y(void 0);P=!0;var rt=jr(Be._readableStreamController);return rt===null?ht():mt(rt._view,!0),y(void 0)}function _t(rt){if(te=!0,xe=rt,fe){var Ue=de([xe,ke]),Je=vt(i,Ue);He(Je)}return qe}function ft(rt){if(fe=!0,ke=rt,te){var Ue=de([xe,ke]),Je=vt(i,Ue);He(Je)}return qe}function xt(){}return Pe=zn(xt,St,_t),Be=zn(xt,lt,ft),st(c),[Pe,Be]}function ni(i){return E(i)&&typeof i.getReader<"u"}function ai(i){return ni(i)?si(i.getReader()):ii(i)}function ii(i){var c,P=Se(i,"async"),U=f;function Q(){var fe;try{fe=Re(P)}catch(ke){return b(ke)}var xe=y(fe);return A(xe,function(ke){if(!E(ke))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");var Pe=je(ke);if(Pe)Ut(c._readableStreamController);else{var Be=ze(ke);Kt(c._readableStreamController,Be)}})}function te(fe){var xe=P.iterator,ke;try{ke=Ne(xe,"return")}catch(He){return b(He)}if(ke===void 0)return y(void 0);var Pe;try{Pe=M(ke,xe,[fe])}catch(He){return b(He)}var Be=y(Pe);return A(Be,function(He){if(!E(He))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return c=ar(U,Q,te,0),c}function si(i){var c,P=f;function U(){var te;try{te=i.read()}catch(fe){return b(fe)}return A(te,function(fe){if(!E(fe))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(fe.done)Ut(c._readableStreamController);else{var xe=fe.value;Kt(c._readableStreamController,xe)}})}function Q(te){try{return y(i.cancel(te))}catch(fe){return b(fe)}}return c=ar(P,U,Q,0),c}function oi(i,c){j(i,c);var P=i,U=P==null?void 0:P.autoAllocateChunkSize,Q=P==null?void 0:P.cancel,te=P==null?void 0:P.pull,fe=P==null?void 0:P.start,xe=P==null?void 0:P.type;return{autoAllocateChunkSize:U===void 0?void 0:be(U,"".concat(c," has member 'autoAllocateChunkSize' that")),cancel:Q===void 0?void 0:li(Q,P,"".concat(c," has member 'cancel' that")),pull:te===void 0?void 0:ci(te,P,"".concat(c," has member 'pull' that")),start:fe===void 0?void 0:ui(fe,P,"".concat(c," has member 'start' that")),type:xe===void 0?void 0:di(xe,"".concat(c," has member 'type' that"))}}function li(i,c,P){return G(i,P),function(U){return V(i,c,[U])}}function ci(i,c,P){return G(i,P),function(U){return V(i,c,[U])}}function ui(i,c,P){return G(i,P),function(U){return M(i,c,[U])}}function di(i,c){if(i="".concat(i),i!=="bytes")throw new TypeError("".concat(c," '").concat(i,"' is not a valid enumeration value for ReadableStreamType"));return i}function hi(i,c){j(i,c);var P=i==null?void 0:i.preventCancel;return{preventCancel:!!P}}function Un(i,c){j(i,c);var P=i==null?void 0:i.preventAbort,U=i==null?void 0:i.preventCancel,Q=i==null?void 0:i.preventClose,te=i==null?void 0:i.signal;return te!==void 0&&fi(te,"".concat(c," has member 'signal' that")),{preventAbort:!!P,preventCancel:!!U,preventClose:!!Q,signal:te}}function fi(i,c){if(!_a(i))throw new TypeError("".concat(c," is not an AbortSignal."))}function pi(i,c){j(i,c);var P=i==null?void 0:i.readable;ce(P,"readable","ReadableWritablePair"),Ae(P,"".concat(c," has member 'readable' that"));var U=i==null?void 0:i.writable;return ce(U,"writable","ReadableWritablePair"),An(U,"".concat(c," has member 'writable' that")),{readable:P,writable:U}}var ct=function(){function i(c,P){c===void 0&&(c={}),P===void 0&&(P={}),c===void 0?c=null:re(c,"First parameter");var U=gr(P,"Second parameter"),Q=oi(c,"First parameter");if(Zr(this),Q.type==="bytes"){if(U.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var te=er(U,0);la(this,Q,te)}else{var fe=mr(U),te=er(U,1);Za(this,Q,te,fe)}}return Object.defineProperty(i.prototype,"locked",{get:function(){if(!kt(this))throw zt("locked");return Ot(this)},enumerable:!1,configurable:!0}),i.prototype.cancel=function(c){return c===void 0&&(c=void 0),kt(this)?Ot(this)?b(new TypeError("Cannot cancel a stream that already has a reader")):vt(this,c):b(zt("cancel"))},i.prototype.getReader=function(c){if(c===void 0&&(c=void 0),!kt(this))throw zt("getReader");var P=ua(c,"First parameter");return P.mode===void 0?Ee(this):yn(this)},i.prototype.pipeThrough=function(c,P){if(P===void 0&&(P={}),!kt(this))throw zt("pipeThrough");ie(c,1,"pipeThrough");var U=pi(c,"First parameter"),Q=Un(P,"Second parameter");if(Ot(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(qt(U.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var te=jn(this,U.writable,Q.preventClose,Q.preventAbort,Q.preventCancel,Q.signal);return C(te),U.readable},i.prototype.pipeTo=function(c,P){if(P===void 0&&(P={}),!kt(this))return b(zt("pipeTo"));if(c===void 0)return b("Parameter 1 is required in 'pipeTo'.");if(!Ht(c))return b(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var U;try{U=Un(P,"Second parameter")}catch(Q){return b(Q)}return Ot(this)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):qt(c)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):jn(this,c,U.preventClose,U.preventAbort,U.preventCancel,U.signal)},i.prototype.tee=function(){if(!kt(this))throw zt("tee");var c=ei(this);return de(c)},i.prototype.values=function(c){if(c===void 0&&(c=void 0),!kt(this))throw zt("values");var P=hi(c,"First parameter");return at(this,P.preventCancel)},i.prototype[se]=function(c){return this.values(c)},i.from=function(c){return ai(c)},i}();Object.defineProperties(ct,{from:{enumerable:!0}}),Object.defineProperties(ct.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),w(ct.from,"from"),w(ct.prototype.cancel,"cancel"),w(ct.prototype.getReader,"getReader"),w(ct.prototype.pipeThrough,"pipeThrough"),w(ct.prototype.pipeTo,"pipeTo"),w(ct.prototype.tee,"tee"),w(ct.prototype.values,"values"),typeof n.toStringTag=="symbol"&&Object.defineProperty(ct.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(ct.prototype,se,{value:ct.prototype.values,writable:!0,configurable:!0});function ar(i,c,P,U,Q){U===void 0&&(U=1),Q===void 0&&(Q=function(){return 1});var te=Object.create(ct.prototype);Zr(te);var fe=Object.create(Pt.prototype);return Wn(te,fe,i,c,P,U,Q),te}function zn(i,c,P){var U=Object.create(ct.prototype);Zr(U);var Q=Object.create(wt.prototype);return gn(U,Q,i,c,P,0,void 0),U}function Zr(i){i._state="readable",i._reader=void 0,i._storedError=void 0,i._disturbed=!1}function kt(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_readableStreamController")?!1:i instanceof ct}function Ot(i){return i._reader!==void 0}function vt(i,c){if(i._disturbed=!0,i._state==="closed")return y(void 0);if(i._state==="errored")return b(i._storedError);ir(i);var P=i._reader;if(P!==void 0&&jt(P)){var U=P._readIntoRequests;P._readIntoRequests=new Y,U.forEach(function(te){te._closeSteps(void 0)})}var Q=i._readableStreamController[W](c);return A(Q,f)}function ir(i){i._state="closed";var c=i._reader;if(c!==void 0&&(v(c),we(c))){var P=c._readRequests;c._readRequests=new Y,P.forEach(function(U){U._closeSteps()})}}function $n(i,c){i._state="errored",i._storedError=c;var P=i._reader;P!==void 0&&(z(P,c),we(P)?Me(P,c):_n(P,c))}function zt(i){return new TypeError("ReadableStream.prototype.".concat(i," can only be used on a ReadableStream"))}function Gn(i,c){j(i,c);var P=i==null?void 0:i.highWaterMark;return ce(P,"highWaterMark","QueuingStrategyInit"),{highWaterMark:oe(P)}}var Hn=function(i){return i.byteLength};w(Hn,"size");var Cr=function(){function i(c){ie(c,1,"ByteLengthQueuingStrategy"),c=Gn(c,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=c.highWaterMark}return Object.defineProperty(i.prototype,"highWaterMark",{get:function(){if(!Yn(this))throw qn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){if(!Yn(this))throw qn("size");return Hn},enumerable:!1,configurable:!0}),i}();Object.defineProperties(Cr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function qn(i){return new TypeError("ByteLengthQueuingStrategy.prototype.".concat(i," can only be used on a ByteLengthQueuingStrategy"))}function Yn(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_byteLengthQueuingStrategyHighWaterMark")?!1:i instanceof Cr}var Kn=function(){return 1};w(Kn,"size");var Tr=function(){function i(c){ie(c,1,"CountQueuingStrategy"),c=Gn(c,"First parameter"),this._countQueuingStrategyHighWaterMark=c.highWaterMark}return Object.defineProperty(i.prototype,"highWaterMark",{get:function(){if(!Xn(this))throw Vn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){if(!Xn(this))throw Vn("size");return Kn},enumerable:!1,configurable:!0}),i}();Object.defineProperties(Tr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Tr.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Vn(i){return new TypeError("CountQueuingStrategy.prototype.".concat(i," can only be used on a CountQueuingStrategy"))}function Xn(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_countQueuingStrategyHighWaterMark")?!1:i instanceof Tr}function mi(i,c){j(i,c);var P=i==null?void 0:i.cancel,U=i==null?void 0:i.flush,Q=i==null?void 0:i.readableType,te=i==null?void 0:i.start,fe=i==null?void 0:i.transform,xe=i==null?void 0:i.writableType;return{cancel:P===void 0?void 0:bi(P,i,"".concat(c," has member 'cancel' that")),flush:U===void 0?void 0:gi(U,i,"".concat(c," has member 'flush' that")),readableType:Q,start:te===void 0?void 0:yi(te,i,"".concat(c," has member 'start' that")),transform:fe===void 0?void 0:vi(fe,i,"".concat(c," has member 'transform' that")),writableType:xe}}function gi(i,c,P){return G(i,P),function(U){return V(i,c,[U])}}function yi(i,c,P){return G(i,P),function(U){return M(i,c,[U])}}function vi(i,c,P){return G(i,P),function(U,Q){return V(i,c,[U,Q])}}function bi(i,c,P){return G(i,P),function(U){return V(i,c,[U])}}var Rr=function(){function i(c,P,U){c===void 0&&(c={}),P===void 0&&(P={}),U===void 0&&(U={}),c===void 0&&(c=null);var Q=gr(P,"Second parameter"),te=gr(U,"Third parameter"),fe=mi(c,"First parameter");if(fe.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(fe.writableType!==void 0)throw new RangeError("Invalid writableType specified");var xe=er(te,0),ke=mr(te),Pe=er(Q,1),Be=mr(Q),He,qe=F(function(st){He=st});Si(this,qe,Pe,Be,xe,ke),Ai(this,fe),fe.start!==void 0?He(fe.start(this._transformStreamController)):He(void 0)}return Object.defineProperty(i.prototype,"readable",{get:function(){if(!Qn(this))throw ta("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"writable",{get:function(){if(!Qn(this))throw ta("writable");return this._writable},enumerable:!1,configurable:!0}),i}();Object.defineProperties(Rr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});function Si(i,c,P,U,Q,te){function fe(){return c}function xe(qe){return Pi(i,qe)}function ke(qe){return xi(i,qe)}function Pe(){return Ci(i)}i._writable=Ea(fe,xe,Pe,ke,P,U);function Be(){return Ti(i)}function He(qe){return Ri(i,qe)}i._readable=ar(fe,Be,He,Q,te),i._backpressure=void 0,i._backpressureChangePromise=void 0,i._backpressureChangePromise_resolve=void 0,kr(i,!0),i._transformStreamController=void 0}function Qn(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_transformStreamController")?!1:i instanceof Rr}function Jn(i,c){yt(i._readable._readableStreamController,c),en(i,c)}function en(i,c){Ir(i._transformStreamController),tr(i._writable._writableStreamController,c),tn(i)}function tn(i){i._backpressure&&kr(i,!1)}function kr(i,c){i._backpressureChangePromise!==void 0&&i._backpressureChangePromise_resolve(),i._backpressureChangePromise=F(function(P){i._backpressureChangePromise_resolve=P}),i._backpressure=c}var It=function(){function i(){throw new TypeError("Illegal constructor")}return Object.defineProperty(i.prototype,"desiredSize",{get:function(){if(!Or(this))throw Fr("desiredSize");var c=this._controlledTransformStream._readable._readableStreamController;return Jr(c)},enumerable:!1,configurable:!0}),i.prototype.enqueue=function(c){if(c===void 0&&(c=void 0),!Or(this))throw Fr("enqueue");Zn(this,c)},i.prototype.error=function(c){if(c===void 0&&(c=void 0),!Or(this))throw Fr("error");wi(this,c)},i.prototype.terminate=function(){if(!Or(this))throw Fr("terminate");Ei(this)},i}();Object.defineProperties(It.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),w(It.prototype.enqueue,"enqueue"),w(It.prototype.error,"error"),w(It.prototype.terminate,"terminate"),typeof n.toStringTag=="symbol"&&Object.defineProperty(It.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Or(i){return!E(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledTransformStream")?!1:i instanceof It}function _i(i,c,P,U,Q){c._controlledTransformStream=i,i._transformStreamController=c,c._transformAlgorithm=P,c._flushAlgorithm=U,c._cancelAlgorithm=Q,c._finishPromise=void 0,c._finishPromise_resolve=void 0,c._finishPromise_reject=void 0}function Ai(i,c){var P=Object.create(It.prototype),U,Q,te;c.transform!==void 0?U=function(fe){return c.transform(fe,P)}:U=function(fe){try{return Zn(P,fe),y(void 0)}catch(xe){return b(xe)}},c.flush!==void 0?Q=function(){return c.flush(P)}:Q=function(){return y(void 0)},c.cancel!==void 0?te=function(fe){return c.cancel(fe)}:te=function(){return y(void 0)},_i(i,P,U,Q,te)}function Ir(i){i._transformAlgorithm=void 0,i._flushAlgorithm=void 0,i._cancelAlgorithm=void 0}function Zn(i,c){var P=i._controlledTransformStream,U=P._readable._readableStreamController;if(!Vt(U))throw new TypeError("Readable side is not in a state that permits enqueue");try{Kt(U,c)}catch(te){throw en(P,te),P._readable._storedError}var Q=Ja(U);Q!==P._backpressure&&kr(P,!0)}function wi(i,c){Jn(i._controlledTransformStream,c)}function ea(i,c){var P=i._transformAlgorithm(c);return A(P,void 0,function(U){throw Jn(i._controlledTransformStream,U),U})}function Ei(i){var c=i._controlledTransformStream,P=c._readable._readableStreamController;Ut(P);var U=new TypeError("TransformStream terminated");en(c,U)}function Pi(i,c){var P=i._transformStreamController;if(i._backpressure){var U=i._backpressureChangePromise;return A(U,function(){var Q=i._writable,te=Q._state;if(te==="erroring")throw Q._storedError;return ea(P,c)})}return ea(P,c)}function xi(i,c){var P=i._transformStreamController;if(P._finishPromise!==void 0)return P._finishPromise;var U=i._readable;P._finishPromise=F(function(te,fe){P._finishPromise_resolve=te,P._finishPromise_reject=fe});var Q=P._cancelAlgorithm(c);return Ir(P),l(Q,function(){return U._state==="errored"?Xt(P,U._storedError):(yt(U._readableStreamController,c),nn(P)),null},function(te){return yt(U._readableStreamController,te),Xt(P,te),null}),P._finishPromise}function Ci(i){var c=i._transformStreamController;if(c._finishPromise!==void 0)return c._finishPromise;var P=i._readable;c._finishPromise=F(function(Q,te){c._finishPromise_resolve=Q,c._finishPromise_reject=te});var U=c._flushAlgorithm();return Ir(c),l(U,function(){return P._state==="errored"?Xt(c,P._storedError):(Ut(P._readableStreamController),nn(c)),null},function(Q){return yt(P._readableStreamController,Q),Xt(c,Q),null}),c._finishPromise}function Ti(i){return kr(i,!1),i._backpressureChangePromise}function Ri(i,c){var P=i._transformStreamController;if(P._finishPromise!==void 0)return P._finishPromise;var U=i._writable;P._finishPromise=F(function(te,fe){P._finishPromise_resolve=te,P._finishPromise_reject=fe});var Q=P._cancelAlgorithm(c);return Ir(P),l(Q,function(){return U._state==="errored"?Xt(P,U._storedError):(tr(U._writableStreamController,c),tn(i),nn(P)),null},function(te){return tr(U._writableStreamController,te),tn(i),Xt(P,te),null}),P._finishPromise}function Fr(i){return new TypeError("TransformStreamDefaultController.prototype.".concat(i," can only be used on a TransformStreamDefaultController"))}function nn(i){i._finishPromise_resolve!==void 0&&(i._finishPromise_resolve(),i._finishPromise_resolve=void 0,i._finishPromise_reject=void 0)}function Xt(i,c){i._finishPromise_reject!==void 0&&(C(i._finishPromise),i._finishPromise_reject(c),i._finishPromise_resolve=void 0,i._finishPromise_reject=void 0)}function ta(i){return new TypeError("TransformStream.prototype.".concat(i," can only be used on a TransformStream"))}t.ByteLengthQueuingStrategy=Cr,t.CountQueuingStrategy=Tr,t.ReadableByteStreamController=wt,t.ReadableStream=ct,t.ReadableStreamBYOBReader=Tt,t.ReadableStreamBYOBRequest=dt,t.ReadableStreamDefaultController=Pt,t.ReadableStreamDefaultReader=Oe,t.TransformStream=Rr,t.TransformStreamDefaultController=It,t.WritableStream=Rt,t.WritableStreamDefaultController=Yt,t.WritableStreamDefaultWriter=Et})}(ponyfill$1,ponyfill$1.exports)),ponyfill$1.exports}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$7=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(e,t){module.exports=t()})(globalThis,()=>(()=>{var __webpack_modules__=[,(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=ie,e.arraysToBytes=ce,e.assert=Ce,e.bytesToString=Z,e.createPromiseCapability=Le,e.createValidAbsoluteUrl=R,e.escapeString=Oe,e.getModificationDate=Te,e.getVerbosityLevel=N,e.info=J,e.isArrayBuffer=Xe,e.isArrayEqual=ge,e.isAscii=we,e.objectFromMap=me,e.objectSize=ue,e.setVerbosityLevel=B,e.shadow=O,e.string32=oe,e.stringToBytes=re,e.stringToPDFString=Qe,e.stringToUTF16BEString=ae,e.stringToUTF8String=ve,e.unreachable=ye,e.utf8StringToString=Me,e.warn=le,t(2);const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const a=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=a;const s=1.35;e.LINE_FACTOR=s;const o=.35;e.LINE_DESCENT_FACTOR=o;const u={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=u;const p={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=p;const h="pdfjs_internal_editor_";e.AnnotationEditorPrefix=h;const f={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=f;const E={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=E;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=m;const w={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=w;const I={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=I;const S={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=S;const T={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=T;const F={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=F;const y={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=y;const b={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=b;const g={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=g;const l={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=l;const d={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=d;const _={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=_;const A={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=A;const C={O:"PageOpen",C:"PageClose"};e.PageActionEventType=C;const L={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=L;const M={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=M;const V={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=V;const K={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=K;const Y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Y;const X={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=X;const H={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=H;let W=V.WARNINGS;function B(de){Number.isInteger(de)&&(W=de)}function N(){return W}function J(de){W>=V.INFOS&&console.log(`Info: ${de}`)}function le(de){W>=V.WARNINGS&&console.log(`Warning: ${de}`)}function ye(de){throw new Error(de)}function Ce(de,ee){de||ye(ee)}function q(de){if(!de)return!1;switch(de.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function R(de){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!de)return null;try{if(ne&&typeof de=="string"){if(ne.addDefaultProtocol&&de.startsWith("www.")){const Ie=de.match(/\./g);Ie&&Ie.length>=2&&(de=`http://${de}`)}if(ne.tryConvertEncoding)try{de=ve(de)}catch{}}const pe=ee?new URL(de,ee):new URL(de);if(q(pe))return pe}catch{}return null}function O(de,ee,ne){return Object.defineProperty(de,ee,{value:ne,enumerable:!0,configurable:!0,writable:!1}),ne}const z=function(){function ee(ne,pe){this.constructor===ee&&ye("Cannot initialize BaseException."),this.message=ne,this.name=pe}return ee.prototype=new Error,ee.constructor=ee,ee}();e.BaseException=z;class $ extends z{constructor(ee,ne){super(ee,"PasswordException"),this.code=ne}}e.PasswordException=$;class v extends z{constructor(ee,ne){super(ee,"UnknownErrorException"),this.details=ne}}e.UnknownErrorException=v;class x extends z{constructor(ee){super(ee,"InvalidPDFException")}}e.InvalidPDFException=x;class k extends z{constructor(ee){super(ee,"MissingPDFException")}}e.MissingPDFException=k;class D extends z{constructor(ee,ne){super(ee,"UnexpectedResponseException"),this.status=ne}}e.UnexpectedResponseException=D;class j extends z{constructor(ee){super(ee,"FormatError")}}e.FormatError=j;class G extends z{constructor(ee){super(ee,"AbortException")}}e.AbortException=G;function Z(de){(typeof de!="object"||de===null||de.length===void 0)&&ye("Invalid argument for bytesToString");const ee=de.length,ne=8192;if(ee<ne)return String.fromCharCode.apply(null,de);const pe=[];for(let Ie=0;Ie<ee;Ie+=ne){const Ne=Math.min(Ie+ne,ee),he=de.subarray(Ie,Ne);pe.push(String.fromCharCode.apply(null,he))}return pe.join("")}function re(de){typeof de!="string"&&ye("Invalid argument for stringToBytes");const ee=de.length,ne=new Uint8Array(ee);for(let pe=0;pe<ee;++pe)ne[pe]=de.charCodeAt(pe)&255;return ne}function ie(de){if(de.length!==void 0)return de.length;if(de.byteLength!==void 0)return de.byteLength;ye("Invalid argument for arrayByteLength")}function ce(de){const ee=de.length;if(ee===1&&de[0]instanceof Uint8Array)return de[0];let ne=0;for(let Ne=0;Ne<ee;Ne++)ne+=ie(de[Ne]);let pe=0;const Ie=new Uint8Array(ne);for(let Ne=0;Ne<ee;Ne++){let he=de[Ne];he instanceof Uint8Array||(typeof he=="string"?he=re(he):he=new Uint8Array(he));const se=he.byteLength;Ie.set(he,pe),pe+=se}return Ie}function oe(de){return String.fromCharCode(de>>24&255,de>>16&255,de>>8&255,de&255)}function ue(de){return Object.keys(de).length}function me(de){const ee=Object.create(null);for(const[ne,pe]of de)ee[ne]=pe;return ee}function be(){const de=new Uint8Array(4);return de[0]=1,new Uint32Array(de.buffer,0,1)[0]===1}function Ae(){try{return new Function(""),!0}catch{return!1}}class Ee{static get isLittleEndian(){return O(this,"isLittleEndian",be())}static get isEvalSupported(){return O(this,"isEvalSupported",Ae())}static get isOffscreenCanvasSupported(){return O(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=Ee;const Fe=[...Array(256).keys()].map(de=>de.toString(16).padStart(2,"0"));class _e{static makeHexColor(ee,ne,pe){return`#${Fe[ee]}${Fe[ne]}${Fe[pe]}`}static scaleMinMax(ee,ne){let pe;ee[0]?(ee[0]<0&&(pe=ne[0],ne[0]=ne[1],ne[1]=pe),ne[0]*=ee[0],ne[1]*=ee[0],ee[3]<0&&(pe=ne[2],ne[2]=ne[3],ne[3]=pe),ne[2]*=ee[3],ne[3]*=ee[3]):(pe=ne[0],ne[0]=ne[2],ne[2]=pe,pe=ne[1],ne[1]=ne[3],ne[3]=pe,ee[1]<0&&(pe=ne[2],ne[2]=ne[3],ne[3]=pe),ne[2]*=ee[1],ne[3]*=ee[1],ee[2]<0&&(pe=ne[0],ne[0]=ne[1],ne[1]=pe),ne[0]*=ee[2],ne[1]*=ee[2]),ne[0]+=ee[4],ne[1]+=ee[4],ne[2]+=ee[5],ne[3]+=ee[5]}static transform(ee,ne){return[ee[0]*ne[0]+ee[2]*ne[1],ee[1]*ne[0]+ee[3]*ne[1],ee[0]*ne[2]+ee[2]*ne[3],ee[1]*ne[2]+ee[3]*ne[3],ee[0]*ne[4]+ee[2]*ne[5]+ee[4],ee[1]*ne[4]+ee[3]*ne[5]+ee[5]]}static applyTransform(ee,ne){const pe=ee[0]*ne[0]+ee[1]*ne[2]+ne[4],Ie=ee[0]*ne[1]+ee[1]*ne[3]+ne[5];return[pe,Ie]}static applyInverseTransform(ee,ne){const pe=ne[0]*ne[3]-ne[1]*ne[2],Ie=(ee[0]*ne[3]-ee[1]*ne[2]+ne[2]*ne[5]-ne[4]*ne[3])/pe,Ne=(-ee[0]*ne[1]+ee[1]*ne[0]+ne[4]*ne[1]-ne[5]*ne[0])/pe;return[Ie,Ne]}static getAxialAlignedBoundingBox(ee,ne){const pe=_e.applyTransform(ee,ne),Ie=_e.applyTransform(ee.slice(2,4),ne),Ne=_e.applyTransform([ee[0],ee[3]],ne),he=_e.applyTransform([ee[2],ee[1]],ne);return[Math.min(pe[0],Ie[0],Ne[0],he[0]),Math.min(pe[1],Ie[1],Ne[1],he[1]),Math.max(pe[0],Ie[0],Ne[0],he[0]),Math.max(pe[1],Ie[1],Ne[1],he[1])]}static inverseTransform(ee){const ne=ee[0]*ee[3]-ee[1]*ee[2];return[ee[3]/ne,-ee[1]/ne,-ee[2]/ne,ee[0]/ne,(ee[2]*ee[5]-ee[4]*ee[3])/ne,(ee[4]*ee[1]-ee[5]*ee[0])/ne]}static apply3dTransform(ee,ne){return[ee[0]*ne[0]+ee[1]*ne[1]+ee[2]*ne[2],ee[3]*ne[0]+ee[4]*ne[1]+ee[5]*ne[2],ee[6]*ne[0]+ee[7]*ne[1]+ee[8]*ne[2]]}static singularValueDecompose2dScale(ee){const ne=[ee[0],ee[2],ee[1],ee[3]],pe=ee[0]*ne[0]+ee[1]*ne[2],Ie=ee[0]*ne[1]+ee[1]*ne[3],Ne=ee[2]*ne[0]+ee[3]*ne[2],he=ee[2]*ne[1]+ee[3]*ne[3],se=(pe+he)/2,Se=Math.sqrt((pe+he)**2-4*(pe*he-Ne*Ie))/2,Re=se+Se||1,je=se-Se||1;return[Math.sqrt(Re),Math.sqrt(je)]}static normalizeRect(ee){const ne=ee.slice(0);return ee[0]>ee[2]&&(ne[0]=ee[2],ne[2]=ee[0]),ee[1]>ee[3]&&(ne[1]=ee[3],ne[3]=ee[1]),ne}static intersect(ee,ne){const pe=Math.max(Math.min(ee[0],ee[2]),Math.min(ne[0],ne[2])),Ie=Math.min(Math.max(ee[0],ee[2]),Math.max(ne[0],ne[2]));if(pe>Ie)return null;const Ne=Math.max(Math.min(ee[1],ee[3]),Math.min(ne[1],ne[3])),he=Math.min(Math.max(ee[1],ee[3]),Math.max(ne[1],ne[3]));return Ne>he?null:[pe,Ne,Ie,he]}static bezierBoundingBox(ee,ne,pe,Ie,Ne,he,se,Se){const Re=[],je=[[],[]];let ze,We,Ge,De,Ve,at,Ke,Ze;for(let tt=0;tt<2;++tt){if(tt===0?(We=6*ee-12*pe+6*Ne,ze=-3*ee+9*pe-9*Ne+3*se,Ge=3*pe-3*ee):(We=6*ne-12*Ie+6*he,ze=-3*ne+9*Ie-9*he+3*Se,Ge=3*Ie-3*ne),Math.abs(ze)<1e-12){if(Math.abs(We)<1e-12)continue;De=-Ge/We,0<De&&De<1&&Re.push(De);continue}Ke=We*We-4*Ge*ze,Ze=Math.sqrt(Ke),!(Ke<0)&&(Ve=(-We+Ze)/(2*ze),0<Ve&&Ve<1&&Re.push(Ve),at=(-We-Ze)/(2*ze),0<at&&at<1&&Re.push(at))}let it=Re.length,et;const ot=it;for(;it--;)De=Re[it],et=1-De,je[0][it]=et*et*et*ee+3*et*et*De*pe+3*et*De*De*Ne+De*De*De*se,je[1][it]=et*et*et*ne+3*et*et*De*Ie+3*et*De*De*he+De*De*De*Se;return je[0][ot]=ee,je[1][ot]=ne,je[0][ot+1]=se,je[1][ot+1]=Se,je[0].length=je[1].length=ot+2,[Math.min(...je[0]),Math.min(...je[1]),Math.max(...je[0]),Math.max(...je[1])]}}e.Util=_e;const Ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Qe(de){if(de[0]>="ï"){let ne;if(de[0]==="þ"&&de[1]==="ÿ"?ne="utf-16be":de[0]==="ÿ"&&de[1]==="þ"?ne="utf-16le":de[0]==="ï"&&de[1]==="»"&&de[2]==="¿"&&(ne="utf-8"),ne)try{const pe=new TextDecoder(ne,{fatal:!0}),Ie=re(de);return pe.decode(Ie)}catch(pe){le(`stringToPDFString: "${pe}".`)}}const ee=[];for(let ne=0,pe=de.length;ne<pe;ne++){const Ie=Ye[de.charCodeAt(ne)];ee.push(Ie?String.fromCharCode(Ie):de.charAt(ne))}return ee.join("")}function Oe(de){return de.replace(/([()\\\n\r])/g,ee=>ee===`
`?"\\n":ee==="\r"?"\\r":`\\${ee}`)}function we(de){return/^[\x00-\x7F]*$/.test(de)}function ae(de){const ee=["þÿ"];for(let ne=0,pe=de.length;ne<pe;ne++){const Ie=de.charCodeAt(ne);ee.push(String.fromCharCode(Ie>>8&255),String.fromCharCode(Ie&255))}return ee.join("")}function ve(de){return decodeURIComponent(escape(de))}function Me(de){return unescape(encodeURIComponent(de))}function Xe(de){return typeof de=="object"&&de!==null&&de.byteLength!==void 0}function ge(de,ee){if(de.length!==ee.length)return!1;for(let ne=0,pe=de.length;ne<pe;ne++)if(de[ne]!==ee[ne])return!1;return!0}function Te(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[de.getUTCFullYear().toString(),(de.getUTCMonth()+1).toString().padStart(2,"0"),de.getUTCDate().toString().padStart(2,"0"),de.getUTCHours().toString().padStart(2,"0"),de.getUTCMinutes().toString().padStart(2,"0"),de.getUTCSeconds().toString().padStart(2,"0")].join("")}function Le(){const de=Object.create(null);let ee=!1;return Object.defineProperty(de,"settled",{get(){return ee}}),de.promise=new Promise(function(ne,pe){de.resolve=function(Ie){ee=!0,ne(Ie)},de.reject=function(Ie){ee=!0,pe(Ie)}}),de}},(r,e,t)=>{var n=t(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!n.isNodeJS||(globalThis.btoa=function(s){return Buffer.from(s,"binary").toString("base64")})}(),function(){globalThis.atob||!n.isNodeJS||(globalThis.atob=function(s){return Buffer.from(s,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!n.isNodeJS||(globalThis.DOMMatrix=requireDommatrix())}(),function(){globalThis.ReadableStream||!n.isNodeJS||(globalThis.ReadableStream=requirePonyfill().ReadableStream)}(),function(){Array.prototype.at||t(4)}(),function(){Uint8Array.prototype.at||t(76)}(),function(){globalThis.structuredClone||t(86)}())},(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=t},(r,e,t)=>{t(5);var n=t(75);r.exports=n("Array","at")},(r,e,t)=>{var n=t(6),a=t(41),s=t(65),o=t(63),u=t(70);n({target:"Array",proto:!0},{at:function(h){var f=a(this),E=s(f),m=o(h),w=m>=0?m:E+m;return w<0||w>=E?void 0:f[w]}}),u("at")},(r,e,t)=>{var n=t(7),a=t(8).f,s=t(45),o=t(49),u=t(39),p=t(57),h=t(69);r.exports=function(f,E){var m=f.target,w=f.global,I=f.stat,S,T,F,y,b,g;if(w?T=n:I?T=n[m]||u(m,{}):T=(n[m]||{}).prototype,T)for(F in E){if(b=E[F],f.dontCallGetSet?(g=a(T,F),y=g&&g.value):y=T[F],S=h(w?F:m+(I?".":"#")+F,f.forced),!S&&y!==void 0){if(typeof b==typeof y)continue;p(b,y)}(f.sham||y&&y.sham)&&s(b,"sham",!0),o(T,F,b,f)}}},r=>{var e=function(t){return t&&t.Math==Math&&t};r.exports=e(typeof globalThis=="object"&&globalThis)||e(typeof window=="object"&&window)||e(typeof self=="object"&&self)||e(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(r,e,t)=>{var n=t(9),a=t(11),s=t(13),o=t(14),u=t(15),p=t(20),h=t(40),f=t(43),E=Object.getOwnPropertyDescriptor;e.f=n?E:function(w,I){if(w=u(w),I=p(I),f)try{return E(w,I)}catch{}if(h(w,I))return o(!a(s.f,w,I),w[I])}},(r,e,t)=>{var n=t(10);r.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},r=>{r.exports=function(e){try{return!!e()}catch{return!0}}},(r,e,t)=>{var n=t(12),a=Function.prototype.call;r.exports=n?a.bind(a):function(){return a.apply(a,arguments)}},(r,e,t)=>{var n=t(10);r.exports=!n(function(){var a=(function(){}).bind();return typeof a!="function"||a.hasOwnProperty("prototype")})},(r,e)=>{var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,a=n&&!t.call({1:2},1);e.f=a?function(o){var u=n(this,o);return!!u&&u.enumerable}:t},r=>{r.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},(r,e,t)=>{var n=t(16),a=t(19);r.exports=function(s){return n(a(s))}},(r,e,t)=>{var n=t(17),a=t(10),s=t(18),o=Object,u=n("".split);r.exports=a(function(){return!o("z").propertyIsEnumerable(0)})?function(p){return s(p)=="String"?u(p,""):o(p)}:o},(r,e,t)=>{var n=t(12),a=Function.prototype,s=a.bind,o=a.call,u=n&&s.bind(o,o);r.exports=n?function(p){return p&&u(p)}:function(p){return p&&function(){return o.apply(p,arguments)}}},(r,e,t)=>{var n=t(17),a=n({}.toString),s=n("".slice);r.exports=function(o){return s(a(o),8,-1)}},r=>{var e=TypeError;r.exports=function(t){if(t==null)throw e("Can't call method on "+t);return t}},(r,e,t)=>{var n=t(21),a=t(24);r.exports=function(s){var o=n(s,"string");return a(o)?o:o+""}},(r,e,t)=>{var n=t(11),a=t(22),s=t(24),o=t(31),u=t(34),p=t(35),h=TypeError,f=p("toPrimitive");r.exports=function(E,m){if(!a(E)||s(E))return E;var w=o(E,f),I;if(w){if(m===void 0&&(m="default"),I=n(w,E,m),!a(I)||s(I))return I;throw h("Can't convert object to primitive value")}return m===void 0&&(m="number"),u(E,m)}},(r,e,t)=>{var n=t(23);r.exports=function(a){return typeof a=="object"?a!==null:n(a)}},r=>{r.exports=function(e){return typeof e=="function"}},(r,e,t)=>{var n=t(25),a=t(23),s=t(26),o=t(27),u=Object;r.exports=o?function(p){return typeof p=="symbol"}:function(p){var h=n("Symbol");return a(h)&&s(h.prototype,u(p))}},(r,e,t)=>{var n=t(7),a=t(23),s=function(o){return a(o)?o:void 0};r.exports=function(o,u){return arguments.length<2?s(n[o]):n[o]&&n[o][u]}},(r,e,t)=>{var n=t(17);r.exports=n({}.isPrototypeOf)},(r,e,t)=>{var n=t(28);r.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(r,e,t)=>{var n=t(29),a=t(10);r.exports=!!Object.getOwnPropertySymbols&&!a(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&n&&n<41})},(r,e,t)=>{var n=t(7),a=t(30),s=n.process,o=n.Deno,u=s&&s.versions||o&&o.version,p=u&&u.v8,h,f;p&&(h=p.split("."),f=h[0]>0&&h[0]<4?1:+(h[0]+h[1])),!f&&a&&(h=a.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=a.match(/Chrome\/(\d+)/),h&&(f=+h[1]))),r.exports=f},(r,e,t)=>{var n=t(25);r.exports=n("navigator","userAgent")||""},(r,e,t)=>{var n=t(32);r.exports=function(a,s){var o=a[s];return o==null?void 0:n(o)}},(r,e,t)=>{var n=t(23),a=t(33),s=TypeError;r.exports=function(o){if(n(o))return o;throw s(a(o)+" is not a function")}},r=>{var e=String;r.exports=function(t){try{return e(t)}catch{return"Object"}}},(r,e,t)=>{var n=t(11),a=t(23),s=t(22),o=TypeError;r.exports=function(u,p){var h,f;if(p==="string"&&a(h=u.toString)&&!s(f=n(h,u))||a(h=u.valueOf)&&!s(f=n(h,u))||p!=="string"&&a(h=u.toString)&&!s(f=n(h,u)))return f;throw o("Can't convert object to primitive value")}},(r,e,t)=>{var n=t(7),a=t(36),s=t(40),o=t(42),u=t(28),p=t(27),h=a("wks"),f=n.Symbol,E=f&&f.for,m=p?f:f&&f.withoutSetter||o;r.exports=function(w){if(!s(h,w)||!(u||typeof h[w]=="string")){var I="Symbol."+w;u&&s(f,w)?h[w]=f[w]:p&&E?h[w]=E(I):h[w]=m(I)}return h[w]}},(r,e,t)=>{var n=t(37),a=t(38);(r.exports=function(s,o){return a[s]||(a[s]=o!==void 0?o:{})})("versions",[]).push({version:"3.24.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},r=>{r.exports=!1},(r,e,t)=>{var n=t(7),a=t(39),s="__core-js_shared__",o=n[s]||a(s,{});r.exports=o},(r,e,t)=>{var n=t(7),a=Object.defineProperty;r.exports=function(s,o){try{a(n,s,{value:o,configurable:!0,writable:!0})}catch{n[s]=o}return o}},(r,e,t)=>{var n=t(17),a=t(41),s=n({}.hasOwnProperty);r.exports=Object.hasOwn||function(u,p){return s(a(u),p)}},(r,e,t)=>{var n=t(19),a=Object;r.exports=function(s){return a(n(s))}},(r,e,t)=>{var n=t(17),a=0,s=Math.random(),o=n(1 .toString);r.exports=function(u){return"Symbol("+(u===void 0?"":u)+")_"+o(++a+s,36)}},(r,e,t)=>{var n=t(9),a=t(10),s=t(44);r.exports=!n&&!a(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},(r,e,t)=>{var n=t(7),a=t(22),s=n.document,o=a(s)&&a(s.createElement);r.exports=function(u){return o?s.createElement(u):{}}},(r,e,t)=>{var n=t(9),a=t(46),s=t(14);r.exports=n?function(o,u,p){return a.f(o,u,s(1,p))}:function(o,u,p){return o[u]=p,o}},(r,e,t)=>{var n=t(9),a=t(43),s=t(47),o=t(48),u=t(20),p=TypeError,h=Object.defineProperty,f=Object.getOwnPropertyDescriptor,E="enumerable",m="configurable",w="writable";e.f=n?s?function(S,T,F){if(o(S),T=u(T),o(F),typeof S=="function"&&T==="prototype"&&"value"in F&&w in F&&!F[w]){var y=f(S,T);y&&y[w]&&(S[T]=F.value,F={configurable:m in F?F[m]:y[m],enumerable:E in F?F[E]:y[E],writable:!1})}return h(S,T,F)}:h:function(S,T,F){if(o(S),T=u(T),o(F),a)try{return h(S,T,F)}catch{}if("get"in F||"set"in F)throw p("Accessors not supported");return"value"in F&&(S[T]=F.value),S}},(r,e,t)=>{var n=t(9),a=t(10);r.exports=n&&a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(r,e,t)=>{var n=t(22),a=String,s=TypeError;r.exports=function(o){if(n(o))return o;throw s(a(o)+" is not an object")}},(r,e,t)=>{var n=t(23),a=t(46),s=t(50),o=t(39);r.exports=function(u,p,h,f){f||(f={});var E=f.enumerable,m=f.name!==void 0?f.name:p;if(n(h)&&s(h,m,f),f.global)E?u[p]=h:o(p,h);else{try{f.unsafe?u[p]&&(E=!0):delete u[p]}catch{}E?u[p]=h:a.f(u,p,{value:h,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return u}},(r,e,t)=>{var n=t(10),a=t(23),s=t(40),o=t(9),u=t(51).CONFIGURABLE,p=t(52),h=t(53),f=h.enforce,E=h.get,m=Object.defineProperty,w=o&&!n(function(){return m(function(){},"length",{value:8}).length!==8}),I=String(String).split("String"),S=r.exports=function(T,F,y){String(F).slice(0,7)==="Symbol("&&(F="["+String(F).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),y&&y.getter&&(F="get "+F),y&&y.setter&&(F="set "+F),(!s(T,"name")||u&&T.name!==F)&&(o?m(T,"name",{value:F,configurable:!0}):T.name=F),w&&y&&s(y,"arity")&&T.length!==y.arity&&m(T,"length",{value:y.arity});try{y&&s(y,"constructor")&&y.constructor?o&&m(T,"prototype",{writable:!1}):T.prototype&&(T.prototype=void 0)}catch{}var b=f(T);return s(b,"source")||(b.source=I.join(typeof F=="string"?F:"")),T};Function.prototype.toString=S(function(){return a(this)&&E(this).source||p(this)},"toString")},(r,e,t)=>{var n=t(9),a=t(40),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,u=a(s,"name"),p=u&&(function(){}).name==="something",h=u&&(!n||n&&o(s,"name").configurable);r.exports={EXISTS:u,PROPER:p,CONFIGURABLE:h}},(r,e,t)=>{var n=t(17),a=t(23),s=t(38),o=n(Function.toString);a(s.inspectSource)||(s.inspectSource=function(u){return o(u)}),r.exports=s.inspectSource},(r,e,t)=>{var n=t(54),a=t(7),s=t(17),o=t(22),u=t(45),p=t(40),h=t(38),f=t(55),E=t(56),m="Object already initialized",w=a.TypeError,I=a.WeakMap,S,T,F,y=function(C){return F(C)?T(C):S(C,{})},b=function(C){return function(L){var M;if(!o(L)||(M=T(L)).type!==C)throw w("Incompatible receiver, "+C+" required");return M}};if(n||h.state){var g=h.state||(h.state=new I),l=s(g.get),d=s(g.has),_=s(g.set);S=function(C,L){if(d(g,C))throw new w(m);return L.facade=C,_(g,C,L),L},T=function(C){return l(g,C)||{}},F=function(C){return d(g,C)}}else{var A=f("state");E[A]=!0,S=function(C,L){if(p(C,A))throw new w(m);return L.facade=C,u(C,A,L),L},T=function(C){return p(C,A)?C[A]:{}},F=function(C){return p(C,A)}}r.exports={set:S,get:T,has:F,enforce:y,getterFor:b}},(r,e,t)=>{var n=t(7),a=t(23),s=t(52),o=n.WeakMap;r.exports=a(o)&&/native code/.test(s(o))},(r,e,t)=>{var n=t(36),a=t(42),s=n("keys");r.exports=function(o){return s[o]||(s[o]=a(o))}},r=>{r.exports={}},(r,e,t)=>{var n=t(40),a=t(58),s=t(8),o=t(46);r.exports=function(u,p,h){for(var f=a(p),E=o.f,m=s.f,w=0;w<f.length;w++){var I=f[w];!n(u,I)&&!(h&&n(h,I))&&E(u,I,m(p,I))}}},(r,e,t)=>{var n=t(25),a=t(17),s=t(59),o=t(68),u=t(48),p=a([].concat);r.exports=n("Reflect","ownKeys")||function(f){var E=s.f(u(f)),m=o.f;return m?p(E,m(f)):E}},(r,e,t)=>{var n=t(60),a=t(67),s=a.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(u){return n(u,s)}},(r,e,t)=>{var n=t(17),a=t(40),s=t(15),o=t(61).indexOf,u=t(56),p=n([].push);r.exports=function(h,f){var E=s(h),m=0,w=[],I;for(I in E)!a(u,I)&&a(E,I)&&p(w,I);for(;f.length>m;)a(E,I=f[m++])&&(~o(w,I)||p(w,I));return w}},(r,e,t)=>{var n=t(15),a=t(62),s=t(65),o=function(u){return function(p,h,f){var E=n(p),m=s(E),w=a(f,m),I;if(u&&h!=h){for(;m>w;)if(I=E[w++],I!=I)return!0}else for(;m>w;w++)if((u||w in E)&&E[w]===h)return u||w||0;return!u&&-1}};r.exports={includes:o(!0),indexOf:o(!1)}},(r,e,t)=>{var n=t(63),a=Math.max,s=Math.min;r.exports=function(o,u){var p=n(o);return p<0?a(p+u,0):s(p,u)}},(r,e,t)=>{var n=t(64);r.exports=function(a){var s=+a;return s!==s||s===0?0:n(s)}},r=>{var e=Math.ceil,t=Math.floor;r.exports=Math.trunc||function(a){var s=+a;return(s>0?t:e)(s)}},(r,e,t)=>{var n=t(66);r.exports=function(a){return n(a.length)}},(r,e,t)=>{var n=t(63),a=Math.min;r.exports=function(s){return s>0?a(n(s),9007199254740991):0}},r=>{r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(r,e)=>{e.f=Object.getOwnPropertySymbols},(r,e,t)=>{var n=t(10),a=t(23),s=/#|\.prototype\./,o=function(E,m){var w=p[u(E)];return w==f?!0:w==h?!1:a(m)?n(m):!!m},u=o.normalize=function(E){return String(E).replace(s,".").toLowerCase()},p=o.data={},h=o.NATIVE="N",f=o.POLYFILL="P";r.exports=o},(r,e,t)=>{var n=t(35),a=t(71),s=t(46).f,o=n("unscopables"),u=Array.prototype;u[o]==null&&s(u,o,{configurable:!0,value:a(null)}),r.exports=function(p){u[o][p]=!0}},(r,e,t)=>{var n=t(48),a=t(72),s=t(67),o=t(56),u=t(74),p=t(44),h=t(55),f=">",E="<",m="prototype",w="script",I=h("IE_PROTO"),S=function(){},T=function(l){return E+w+f+l+E+"/"+w+f},F=function(l){l.write(T("")),l.close();var d=l.parentWindow.Object;return l=null,d},y=function(){var l=p("iframe"),d="java"+w+":",_;return l.style.display="none",u.appendChild(l),l.src=String(d),_=l.contentWindow.document,_.open(),_.write(T("document.F=Object")),_.close(),_.F},b,g=function(){try{b=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&b?F(b):y():F(b);for(var l=s.length;l--;)delete g[m][s[l]];return g()};o[I]=!0,r.exports=Object.create||function(d,_){var A;return d!==null?(S[m]=n(d),A=new S,S[m]=null,A[I]=d):A=g(),_===void 0?A:a.f(A,_)}},(r,e,t)=>{var n=t(9),a=t(47),s=t(46),o=t(48),u=t(15),p=t(73);e.f=n&&!a?Object.defineProperties:function(f,E){o(f);for(var m=u(E),w=p(E),I=w.length,S=0,T;I>S;)s.f(f,T=w[S++],m[T]);return f}},(r,e,t)=>{var n=t(60),a=t(67);r.exports=Object.keys||function(o){return n(o,a)}},(r,e,t)=>{var n=t(25);r.exports=n("document","documentElement")},(r,e,t)=>{var n=t(7),a=t(17);r.exports=function(s,o){return a(n[s].prototype[o])}},(r,e,t)=>{t(77)},(r,e,t)=>{var n=t(78),a=t(65),s=t(63),o=n.aTypedArray,u=n.exportTypedArrayMethod;u("at",function(h){var f=o(this),E=a(f),m=s(h),w=m>=0?m:E+m;return w<0||w>=E?void 0:f[w]})},(r,e,t)=>{var n=t(79),a=t(9),s=t(7),o=t(23),u=t(22),p=t(40),h=t(80),f=t(33),E=t(45),m=t(49),w=t(46).f,I=t(26),S=t(82),T=t(84),F=t(35),y=t(42),b=t(53),g=b.enforce,l=b.get,d=s.Int8Array,_=d&&d.prototype,A=s.Uint8ClampedArray,C=A&&A.prototype,L=d&&S(d),M=_&&S(_),V=Object.prototype,K=s.TypeError,Y=F("toStringTag"),X=y("TYPED_ARRAY_TAG"),H="TypedArrayConstructor",W=n&&!!T&&h(s.opera)!=="Opera",B=!1,N,J,le,ye={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ce={BigInt64Array:8,BigUint64Array:8},q=function(D){if(!u(D))return!1;var j=h(D);return j==="DataView"||p(ye,j)||p(Ce,j)},R=function(k){var D=S(k);if(u(D)){var j=l(D);return j&&p(j,H)?j[H]:R(D)}},O=function(k){if(!u(k))return!1;var D=h(k);return p(ye,D)||p(Ce,D)},z=function(k){if(O(k))return k;throw K("Target is not a typed array")},$=function(k){if(o(k)&&(!T||I(L,k)))return k;throw K(f(k)+" is not a typed array constructor")},v=function(k,D,j,G){if(a){if(j)for(var Z in ye){var re=s[Z];if(re&&p(re.prototype,k))try{delete re.prototype[k]}catch{try{re.prototype[k]=D}catch{}}}(!M[k]||j)&&m(M,k,j?D:W&&_[k]||D,G)}},x=function(k,D,j){var G,Z;if(a){if(T){if(j){for(G in ye)if(Z=s[G],Z&&p(Z,k))try{delete Z[k]}catch{}}if(!L[k]||j)try{return m(L,k,j?D:W&&L[k]||D)}catch{}else return}for(G in ye)Z=s[G],Z&&(!Z[k]||j)&&m(Z,k,D)}};for(N in ye)J=s[N],le=J&&J.prototype,le?g(le)[H]=J:W=!1;for(N in Ce)J=s[N],le=J&&J.prototype,le&&(g(le)[H]=J);if((!W||!o(L)||L===Function.prototype)&&(L=function(){throw K("Incorrect invocation")},W))for(N in ye)s[N]&&T(s[N],L);if((!W||!M||M===V)&&(M=L.prototype,W))for(N in ye)s[N]&&T(s[N].prototype,M);if(W&&S(C)!==M&&T(C,M),a&&!p(M,Y)){B=!0,w(M,Y,{get:function(){return u(this)?this[X]:void 0}});for(N in ye)s[N]&&E(s[N],X,N)}r.exports={NATIVE_ARRAY_BUFFER_VIEWS:W,TYPED_ARRAY_TAG:B&&X,aTypedArray:z,aTypedArrayConstructor:$,exportTypedArrayMethod:v,exportTypedArrayStaticMethod:x,getTypedArrayConstructor:R,isView:q,isTypedArray:O,TypedArray:L,TypedArrayPrototype:M}},r=>{r.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(r,e,t)=>{var n=t(81),a=t(23),s=t(18),o=t(35),u=o("toStringTag"),p=Object,h=s(function(){return arguments}())=="Arguments",f=function(E,m){try{return E[m]}catch{}};r.exports=n?s:function(E){var m,w,I;return E===void 0?"Undefined":E===null?"Null":typeof(w=f(m=p(E),u))=="string"?w:h?s(m):(I=s(m))=="Object"&&a(m.callee)?"Arguments":I}},(r,e,t)=>{var n=t(35),a=n("toStringTag"),s={};s[a]="z",r.exports=String(s)==="[object z]"},(r,e,t)=>{var n=t(40),a=t(23),s=t(41),o=t(55),u=t(83),p=o("IE_PROTO"),h=Object,f=h.prototype;r.exports=u?h.getPrototypeOf:function(E){var m=s(E);if(n(m,p))return m[p];var w=m.constructor;return a(w)&&m instanceof w?w.prototype:m instanceof h?f:null}},(r,e,t)=>{var n=t(10);r.exports=!n(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},(r,e,t)=>{var n=t(17),a=t(48),s=t(85);r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,u={},p;try{p=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),p(u,[]),o=u instanceof Array}catch{}return function(f,E){return a(f),s(E),o?p(f,E):f.__proto__=E,f}}():void 0)},(r,e,t)=>{var n=t(23),a=String,s=TypeError;r.exports=function(o){if(typeof o=="object"||n(o))return o;throw s("Can't set "+a(o)+" as a prototype")}},(r,e,t)=>{t(87),t(93),t(95),t(117),t(119);var n=t(128);r.exports=n.structuredClone},(r,e,t)=>{var n=t(15),a=t(70),s=t(88),o=t(53),u=t(46).f,p=t(89),h=t(37),f=t(9),E="Array Iterator",m=o.set,w=o.getterFor(E);r.exports=p(Array,"Array",function(S,T){m(this,{type:E,target:n(S),index:0,kind:T})},function(){var S=w(this),T=S.target,F=S.kind,y=S.index++;return!T||y>=T.length?(S.target=void 0,{value:void 0,done:!0}):F=="keys"?{value:y,done:!1}:F=="values"?{value:T[y],done:!1}:{value:[y,T[y]],done:!1}},"values");var I=s.Arguments=s.Array;if(a("keys"),a("values"),a("entries"),!h&&f&&I.name!=="values")try{u(I,"name",{value:"values"})}catch{}},r=>{r.exports={}},(r,e,t)=>{var n=t(6),a=t(11),s=t(37),o=t(51),u=t(23),p=t(90),h=t(82),f=t(84),E=t(92),m=t(45),w=t(49),I=t(35),S=t(88),T=t(91),F=o.PROPER,y=o.CONFIGURABLE,b=T.IteratorPrototype,g=T.BUGGY_SAFARI_ITERATORS,l=I("iterator"),d="keys",_="values",A="entries",C=function(){return this};r.exports=function(L,M,V,K,Y,X,H){p(V,M,K);var W=function(z){if(z===Y&&ye)return ye;if(!g&&z in J)return J[z];switch(z){case d:return function(){return new V(this,z)};case _:return function(){return new V(this,z)};case A:return function(){return new V(this,z)}}return function(){return new V(this)}},B=M+" Iterator",N=!1,J=L.prototype,le=J[l]||J["@@iterator"]||Y&&J[Y],ye=!g&&le||W(Y),Ce=M=="Array"&&J.entries||le,q,R,O;if(Ce&&(q=h(Ce.call(new L)),q!==Object.prototype&&q.next&&(!s&&h(q)!==b&&(f?f(q,b):u(q[l])||w(q,l,C)),E(q,B,!0,!0),s&&(S[B]=C))),F&&Y==_&&le&&le.name!==_&&(!s&&y?m(J,"name",_):(N=!0,ye=function(){return a(le,this)})),Y)if(R={values:W(_),keys:X?ye:W(d),entries:W(A)},H)for(O in R)(g||N||!(O in J))&&w(J,O,R[O]);else n({target:M,proto:!0,forced:g||N},R);return(!s||H)&&J[l]!==ye&&w(J,l,ye,{name:Y}),S[M]=ye,R}},(r,e,t)=>{var n=t(91).IteratorPrototype,a=t(71),s=t(14),o=t(92),u=t(88),p=function(){return this};r.exports=function(h,f,E,m){var w=f+" Iterator";return h.prototype=a(n,{next:s(+!m,E)}),o(h,w,!1,!0),u[w]=p,h}},(r,e,t)=>{var n=t(10),a=t(23),s=t(71),o=t(82),u=t(49),p=t(35),h=t(37),f=p("iterator"),E=!1,m,w,I;[].keys&&(I=[].keys(),"next"in I?(w=o(o(I)),w!==Object.prototype&&(m=w)):E=!0);var S=m==null||n(function(){var T={};return m[f].call(T)!==T});S?m={}:h&&(m=s(m)),a(m[f])||u(m,f,function(){return this}),r.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:E}},(r,e,t)=>{var n=t(46).f,a=t(40),s=t(35),o=s("toStringTag");r.exports=function(u,p,h){u&&!h&&(u=u.prototype),u&&!a(u,o)&&n(u,o,{configurable:!0,value:p})}},(r,e,t)=>{var n=t(81),a=t(49),s=t(94);n||a(Object.prototype,"toString",s,{unsafe:!0})},(r,e,t)=>{var n=t(81),a=t(80);r.exports=n?{}.toString:function(){return"[object "+a(this)+"]"}},(r,e,t)=>{t(96)},(r,e,t)=>{var n=t(97),a=t(114);n("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},a)},(r,e,t)=>{var n=t(6),a=t(7),s=t(17),o=t(69),u=t(49),p=t(98),h=t(105),f=t(111),E=t(23),m=t(22),w=t(10),I=t(112),S=t(92),T=t(113);r.exports=function(F,y,b){var g=F.indexOf("Map")!==-1,l=F.indexOf("Weak")!==-1,d=g?"set":"add",_=a[F],A=_&&_.prototype,C=_,L={},M=function(B){var N=s(A[B]);u(A,B,B=="add"?function(le){return N(this,le===0?0:le),this}:B=="delete"?function(J){return l&&!m(J)?!1:N(this,J===0?0:J)}:B=="get"?function(le){return l&&!m(le)?void 0:N(this,le===0?0:le)}:B=="has"?function(le){return l&&!m(le)?!1:N(this,le===0?0:le)}:function(le,ye){return N(this,le===0?0:le,ye),this})},V=o(F,!E(_)||!(l||A.forEach&&!w(function(){new _().entries().next()})));if(V)C=b.getConstructor(y,F,g,d),p.enable();else if(o(F,!0)){var K=new C,Y=K[d](l?{}:-0,1)!=K,X=w(function(){K.has(1)}),H=I(function(B){new _(B)}),W=!l&&w(function(){for(var B=new _,N=5;N--;)B[d](N,N);return!B.has(-0)});H||(C=y(function(B,N){f(B,A);var J=T(new _,B,C);return N!=null&&h(N,J[d],{that:J,AS_ENTRIES:g}),J}),C.prototype=A,A.constructor=C),(X||W)&&(M("delete"),M("has"),g&&M("get")),(W||Y)&&M(d),l&&A.clear&&delete A.clear}return L[F]=C,n({global:!0,constructor:!0,forced:C!=_},L),S(C,F),l||b.setStrong(C,F,g),C}},(r,e,t)=>{var n=t(6),a=t(17),s=t(56),o=t(22),u=t(40),p=t(46).f,h=t(59),f=t(99),E=t(102),m=t(42),w=t(104),I=!1,S=m("meta"),T=0,F=function(_){p(_,S,{value:{objectID:"O"+T++,weakData:{}}})},y=function(_,A){if(!o(_))return typeof _=="symbol"?_:(typeof _=="string"?"S":"P")+_;if(!u(_,S)){if(!E(_))return"F";if(!A)return"E";F(_)}return _[S].objectID},b=function(_,A){if(!u(_,S)){if(!E(_))return!0;if(!A)return!1;F(_)}return _[S].weakData},g=function(_){return w&&I&&E(_)&&!u(_,S)&&F(_),_},l=function(){d.enable=function(){},I=!0;var _=h.f,A=a([].splice),C={};C[S]=1,_(C).length&&(h.f=function(L){for(var M=_(L),V=0,K=M.length;V<K;V++)if(M[V]===S){A(M,V,1);break}return M},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},d=r.exports={enable:l,fastKey:y,getWeakData:b,onFreeze:g};s[S]=!0},(r,e,t)=>{var n=t(18),a=t(15),s=t(59).f,o=t(100),u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(h){try{return s(h)}catch{return o(u)}};r.exports.f=function(f){return u&&n(f)=="Window"?p(f):s(a(f))}},(r,e,t)=>{var n=t(62),a=t(65),s=t(101),o=Array,u=Math.max;r.exports=function(p,h,f){for(var E=a(p),m=n(h,E),w=n(f===void 0?E:f,E),I=o(u(w-m,0)),S=0;m<w;m++,S++)s(I,S,p[m]);return I.length=S,I}},(r,e,t)=>{var n=t(20),a=t(46),s=t(14);r.exports=function(o,u,p){var h=n(u);h in o?a.f(o,h,s(0,p)):o[h]=p}},(r,e,t)=>{var n=t(10),a=t(22),s=t(18),o=t(103),u=Object.isExtensible,p=n(function(){});r.exports=p||o?function(f){return!a(f)||o&&s(f)=="ArrayBuffer"?!1:u?u(f):!0}:u},(r,e,t)=>{var n=t(10);r.exports=n(function(){if(typeof ArrayBuffer=="function"){var a=new ArrayBuffer(8);Object.isExtensible(a)&&Object.defineProperty(a,"a",{value:8})}})},(r,e,t)=>{var n=t(10);r.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},(r,e,t)=>{var n=t(106),a=t(11),s=t(48),o=t(33),u=t(107),p=t(65),h=t(26),f=t(108),E=t(109),m=t(110),w=TypeError,I=function(T,F){this.stopped=T,this.result=F},S=I.prototype;r.exports=function(T,F,y){var b=y&&y.that,g=!!(y&&y.AS_ENTRIES),l=!!(y&&y.IS_RECORD),d=!!(y&&y.IS_ITERATOR),_=!!(y&&y.INTERRUPTED),A=n(F,b),C,L,M,V,K,Y,X,H=function(B){return C&&m(C,"normal",B),new I(!0,B)},W=function(B){return g?(s(B),_?A(B[0],B[1],H):A(B[0],B[1])):_?A(B,H):A(B)};if(l)C=T.iterator;else if(d)C=T;else{if(L=E(T),!L)throw w(o(T)+" is not iterable");if(u(L)){for(M=0,V=p(T);V>M;M++)if(K=W(T[M]),K&&h(S,K))return K;return new I(!1)}C=f(T,L)}for(Y=l?T.next:C.next;!(X=a(Y,C)).done;){try{K=W(X.value)}catch(B){m(C,"throw",B)}if(typeof K=="object"&&K&&h(S,K))return K}return new I(!1)}},(r,e,t)=>{var n=t(17),a=t(32),s=t(12),o=n(n.bind);r.exports=function(u,p){return a(u),p===void 0?u:s?o(u,p):function(){return u.apply(p,arguments)}}},(r,e,t)=>{var n=t(35),a=t(88),s=n("iterator"),o=Array.prototype;r.exports=function(u){return u!==void 0&&(a.Array===u||o[s]===u)}},(r,e,t)=>{var n=t(11),a=t(32),s=t(48),o=t(33),u=t(109),p=TypeError;r.exports=function(h,f){var E=arguments.length<2?u(h):f;if(a(E))return s(n(E,h));throw p(o(h)+" is not iterable")}},(r,e,t)=>{var n=t(80),a=t(31),s=t(88),o=t(35),u=o("iterator");r.exports=function(p){if(p!=null)return a(p,u)||a(p,"@@iterator")||s[n(p)]}},(r,e,t)=>{var n=t(11),a=t(48),s=t(31);r.exports=function(o,u,p){var h,f;a(o);try{if(h=s(o,"return"),!h){if(u==="throw")throw p;return p}h=n(h,o)}catch(E){f=!0,h=E}if(u==="throw")throw p;if(f)throw h;return a(h),p}},(r,e,t)=>{var n=t(26),a=TypeError;r.exports=function(s,o){if(n(o,s))return s;throw a("Incorrect invocation")}},(r,e,t)=>{var n=t(35),a=n("iterator"),s=!1;try{var o=0,u={next:function(){return{done:!!o++}},return:function(){s=!0}};u[a]=function(){return this},Array.from(u,function(){throw 2})}catch{}r.exports=function(p,h){if(!h&&!s)return!1;var f=!1;try{var E={};E[a]=function(){return{next:function(){return{done:f=!0}}}},p(E)}catch{}return f}},(r,e,t)=>{var n=t(23),a=t(22),s=t(84);r.exports=function(o,u,p){var h,f;return s&&n(h=u.constructor)&&h!==p&&a(f=h.prototype)&&f!==p.prototype&&s(o,f),o}},(r,e,t)=>{var n=t(46).f,a=t(71),s=t(115),o=t(106),u=t(111),p=t(105),h=t(89),f=t(116),E=t(9),m=t(98).fastKey,w=t(53),I=w.set,S=w.getterFor;r.exports={getConstructor:function(T,F,y,b){var g=T(function(C,L){u(C,l),I(C,{type:F,index:a(null),first:void 0,last:void 0,size:0}),E||(C.size=0),L!=null&&p(L,C[b],{that:C,AS_ENTRIES:y})}),l=g.prototype,d=S(F),_=function(C,L,M){var V=d(C),K=A(C,L),Y,X;return K?K.value=M:(V.last=K={index:X=m(L,!0),key:L,value:M,previous:Y=V.last,next:void 0,removed:!1},V.first||(V.first=K),Y&&(Y.next=K),E?V.size++:C.size++,X!=="F"&&(V.index[X]=K)),C},A=function(C,L){var M=d(C),V=m(L),K;if(V!=="F")return M.index[V];for(K=M.first;K;K=K.next)if(K.key==L)return K};return s(l,{clear:function(){for(var L=this,M=d(L),V=M.index,K=M.first;K;)K.removed=!0,K.previous&&(K.previous=K.previous.next=void 0),delete V[K.index],K=K.next;M.first=M.last=void 0,E?M.size=0:L.size=0},delete:function(C){var L=this,M=d(L),V=A(L,C);if(V){var K=V.next,Y=V.previous;delete M.index[V.index],V.removed=!0,Y&&(Y.next=K),K&&(K.previous=Y),M.first==V&&(M.first=K),M.last==V&&(M.last=Y),E?M.size--:L.size--}return!!V},forEach:function(L){for(var M=d(this),V=o(L,arguments.length>1?arguments[1]:void 0),K;K=K?K.next:M.first;)for(V(K.value,K.key,this);K&&K.removed;)K=K.previous},has:function(L){return!!A(this,L)}}),s(l,y?{get:function(L){var M=A(this,L);return M&&M.value},set:function(L,M){return _(this,L===0?0:L,M)}}:{add:function(L){return _(this,L=L===0?0:L,L)}}),E&&n(l,"size",{get:function(){return d(this).size}}),g},setStrong:function(T,F,y){var b=F+" Iterator",g=S(F),l=S(b);h(T,F,function(d,_){I(this,{type:b,target:d,state:g(d),kind:_,last:void 0})},function(){for(var d=l(this),_=d.kind,A=d.last;A&&A.removed;)A=A.previous;return!d.target||!(d.last=A=A?A.next:d.state.first)?(d.target=void 0,{value:void 0,done:!0}):_=="keys"?{value:A.key,done:!1}:_=="values"?{value:A.value,done:!1}:{value:[A.key,A.value],done:!1}},y?"entries":"values",!y,!0),f(F)}}},(r,e,t)=>{var n=t(49);r.exports=function(a,s,o){for(var u in s)n(a,u,s[u],o);return a}},(r,e,t)=>{var n=t(25),a=t(46),s=t(35),o=t(9),u=s("species");r.exports=function(p){var h=n(p),f=a.f;o&&h&&!h[u]&&f(h,u,{configurable:!0,get:function(){return this}})}},(r,e,t)=>{t(118)},(r,e,t)=>{var n=t(97),a=t(114);n("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},a)},(r,e,t)=>{var n=t(37),a=t(6),s=t(7),o=t(25),u=t(17),p=t(10),h=t(42),f=t(23),E=t(120),m=t(22),w=t(24),I=t(105),S=t(48),T=t(80),F=t(40),y=t(101),b=t(45),g=t(65),l=t(121),d=t(122),_=t(124),A=t(29),C=t(125),L=t(126),M=t(127),V=s.Object,K=s.Date,Y=s.Error,X=s.EvalError,H=s.RangeError,W=s.ReferenceError,B=s.SyntaxError,N=s.TypeError,J=s.URIError,le=s.PerformanceMark,ye=s.WebAssembly,Ce=ye&&ye.CompileError||Y,q=ye&&ye.LinkError||Y,R=ye&&ye.RuntimeError||Y,O=o("DOMException"),z=o("Set"),$=o("Map"),v=$.prototype,x=u(v.has),k=u(v.get),D=u(v.set),j=u(z.prototype.add),G=o("Object","keys"),Z=u([].push),re=u((!0).valueOf),ie=u(1 .valueOf),ce=u("".valueOf),oe=u(K.prototype.getTime),ue=h("structuredClone"),me="DataCloneError",be="Transferring",Ae=function(ge){return!p(function(){var Te=new s.Set([7]),Le=ge(Te),de=ge(V(7));return Le==Te||!Le.has(7)||typeof de!="object"||de!=7})&&ge},Ee=function(ge,Te){return!p(function(){var Le=new Te,de=ge({a:Le,b:Le});return!(de&&de.a===de.b&&de.a instanceof Te&&de.a.stack===Le.stack)})},Fe=function(ge){return!p(function(){var Te=ge(new s.AggregateError([1],ue,{cause:3}));return Te.name!="AggregateError"||Te.errors[0]!=1||Te.message!=ue||Te.cause!=3})},_e=s.structuredClone,Ye=n||!Ee(_e,Y)||!Ee(_e,O)||!Fe(_e),Qe=!_e&&Ae(function(ge){return new le(ue,{detail:ge}).detail}),Oe=Ae(_e)||Qe,we=function(ge){throw new O("Uncloneable type: "+ge,me)},ae=function(ge,Te){throw new O((Te||"Cloning")+" of "+ge+" cannot be properly polyfilled in this engine",me)},ve=function(ge,Te){if(w(ge)&&we("Symbol"),!m(ge))return ge;if(Te){if(x(Te,ge))return k(Te,ge)}else Te=new $;var Le=T(ge),de=!1,ee,ne,pe,Ie,Ne,he,se,Se,Re,je;switch(Le){case"Array":pe=[],de=!0;break;case"Object":pe={},de=!0;break;case"Map":pe=new $,de=!0;break;case"Set":pe=new z,de=!0;break;case"RegExp":pe=new RegExp(ge.source,d(ge));break;case"Error":switch(ne=ge.name,ne){case"AggregateError":pe=o("AggregateError")([]);break;case"EvalError":pe=X();break;case"RangeError":pe=H();break;case"ReferenceError":pe=W();break;case"SyntaxError":pe=B();break;case"TypeError":pe=N();break;case"URIError":pe=J();break;case"CompileError":pe=Ce();break;case"LinkError":pe=q();break;case"RuntimeError":pe=R();break;default:pe=Y()}de=!0;break;case"DOMException":pe=new O(ge.message,ge.name),de=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":ee=s[Le],m(ee)||ae(Le),pe=new ee(ve(ge.buffer,Te),ge.byteOffset,Le==="DataView"?ge.byteLength:ge.length);break;case"DOMQuad":try{pe=new DOMQuad(ve(ge.p1,Te),ve(ge.p2,Te),ve(ge.p3,Te),ve(ge.p4,Te))}catch{Oe?pe=Oe(ge):ae(Le)}break;case"FileList":if(ee=s.DataTransfer,E(ee)){for(Ie=new ee,Ne=0,he=g(ge);Ne<he;Ne++)Ie.items.add(ve(ge[Ne],Te));pe=Ie.files}else Oe?pe=Oe(ge):ae(Le);break;case"ImageData":try{pe=new ImageData(ve(ge.data,Te),ge.width,ge.height,{colorSpace:ge.colorSpace})}catch{Oe?pe=Oe(ge):ae(Le)}break;default:if(Oe)pe=Oe(ge);else switch(Le){case"BigInt":pe=V(ge.valueOf());break;case"Boolean":pe=V(re(ge));break;case"Number":pe=V(ie(ge));break;case"String":pe=V(ce(ge));break;case"Date":pe=new K(oe(ge));break;case"ArrayBuffer":ee=s.DataView,!ee&&typeof ge.slice!="function"&&ae(Le);try{if(typeof ge.slice=="function")pe=ge.slice(0);else for(he=ge.byteLength,pe=new ArrayBuffer(he),Re=new ee(ge),je=new ee(pe),Ne=0;Ne<he;Ne++)je.setUint8(Ne,Re.getUint8(Ne))}catch{throw new O("ArrayBuffer is detached",me)}break;case"SharedArrayBuffer":pe=ge;break;case"Blob":try{pe=ge.slice(0,ge.size,ge.type)}catch{ae(Le)}break;case"DOMPoint":case"DOMPointReadOnly":ee=s[Le];try{pe=ee.fromPoint?ee.fromPoint(ge):new ee(ge.x,ge.y,ge.z,ge.w)}catch{ae(Le)}break;case"DOMRect":case"DOMRectReadOnly":ee=s[Le];try{pe=ee.fromRect?ee.fromRect(ge):new ee(ge.x,ge.y,ge.width,ge.height)}catch{ae(Le)}break;case"DOMMatrix":case"DOMMatrixReadOnly":ee=s[Le];try{pe=ee.fromMatrix?ee.fromMatrix(ge):new ee(ge)}catch{ae(Le)}break;case"AudioData":case"VideoFrame":f(ge.clone)||ae(Le);try{pe=ge.clone()}catch{we(Le)}break;case"File":try{pe=new File([ge],ge.name,ge)}catch{ae(Le)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ae(Le);default:we(Le)}}if(D(Te,ge,pe),de)switch(Le){case"Array":case"Object":for(se=G(ge),Ne=0,he=g(se);Ne<he;Ne++)Se=se[Ne],y(pe,Se,ve(ge[Se],Te));break;case"Map":ge.forEach(function(ze,We){D(pe,ve(We,Te),ve(ze,Te))});break;case"Set":ge.forEach(function(ze){j(pe,ve(ze,Te))});break;case"Error":b(pe,"message",ve(ge.message,Te)),F(ge,"cause")&&b(pe,"cause",ve(ge.cause,Te)),ne=="AggregateError"&&(pe.errors=ve(ge.errors,Te));case"DOMException":_&&b(pe,"stack",ve(ge.stack,Te))}return pe},Me=_e&&!p(function(){if(L&&A>92||M&&A>94||C&&A>97)return!1;var ge=new ArrayBuffer(8),Te=_e(ge,{transfer:[ge]});return ge.byteLength!=0||Te.byteLength!=8}),Xe=function(ge,Te){if(!m(ge))throw N("Transfer option cannot be converted to a sequence");var Le=[];I(ge,function(Re){Z(Le,S(Re))});var de=0,ee=g(Le),ne,pe,Ie,Ne,he,se,Se;if(Me)for(Ne=_e(Le,{transfer:Le});de<ee;)D(Te,Le[de],Ne[de++]);else for(;de<ee;){if(ne=Le[de++],x(Te,ne))throw new O("Duplicate transferable",me);switch(pe=T(ne),pe){case"ImageBitmap":Ie=s.OffscreenCanvas,E(Ie)||ae(pe,be);try{se=new Ie(ne.width,ne.height),Se=se.getContext("bitmaprenderer"),Se.transferFromImageBitmap(ne),he=se.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!f(ne.clone)||!f(ne.close))&&ae(pe,be);try{he=ne.clone(),ne.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ae(pe,be)}if(he===void 0)throw new O("This object cannot be transferred: "+pe,me);D(Te,ne,he)}};a({global:!0,enumerable:!0,sham:!Me,forced:Ye},{structuredClone:function(Te){var Le=l(arguments.length,1)>1&&arguments[1]!=null?S(arguments[1]):void 0,de=Le?Le.transfer:void 0,ee;return de!==void 0&&(ee=new $,Xe(de,ee)),ve(Te,ee)}})},(r,e,t)=>{var n=t(17),a=t(10),s=t(23),o=t(80),u=t(25),p=t(52),h=function(){},f=[],E=u("Reflect","construct"),m=/^\s*(?:class|function)\b/,w=n(m.exec),I=!m.exec(h),S=function(y){if(!s(y))return!1;try{return E(h,f,y),!0}catch{return!1}},T=function(y){if(!s(y))return!1;switch(o(y)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return I||!!w(m,p(y))}catch{return!0}};T.sham=!0,r.exports=!E||a(function(){var F;return S(S.call)||!S(Object)||!S(function(){F=!0})||F})?T:S},r=>{var e=TypeError;r.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},(r,e,t)=>{var n=t(11),a=t(40),s=t(26),o=t(123),u=RegExp.prototype;r.exports=function(p){var h=p.flags;return h===void 0&&!("flags"in u)&&!a(p,"flags")&&s(u,p)?n(o,p):h}},(r,e,t)=>{var n=t(48);r.exports=function(){var a=n(this),s="";return a.hasIndices&&(s+="d"),a.global&&(s+="g"),a.ignoreCase&&(s+="i"),a.multiline&&(s+="m"),a.dotAll&&(s+="s"),a.unicode&&(s+="u"),a.unicodeSets&&(s+="v"),a.sticky&&(s+="y"),s}},(r,e,t)=>{var n=t(10),a=t(14);r.exports=!n(function(){var s=Error("a");return"stack"in s?(Object.defineProperty(s,"stack",a(1,7)),s.stack!==7):!0})},(r,e,t)=>{var n=t(126),a=t(127);r.exports=!n&&!a&&typeof window=="object"&&typeof document=="object"},r=>{r.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(r,e,t)=>{var n=t(18),a=t(7);r.exports=n(a.process)=="process"},(r,e,t)=>{var n=t(7);r.exports=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(130),_display_utils=__w_pdfjs_require__(133),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(r,e){_checkPrivateRedeclaration(r,e),e.add(r)}function _classPrivateMethodGet(r,e,t){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldInitSpec(r,e,t){_checkPrivateRedeclaration(r,e),e.set(r,t)}function _checkPrivateRedeclaration(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(r,e,t){var n=_classExtractFieldDescriptor(r,e,"set");return _classApplyDescriptorSet(r,n,t),t}function _classPrivateFieldGet(r,e){var t=_classExtractFieldDescriptor(r,e,"get");return _classApplyDescriptorGet(r,t)}function _classExtractFieldDescriptor(r,e,t){if(!e.has(r))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(r)}function _classStaticPrivateFieldSpecSet(r,e,t,n){return _classCheckPrivateStaticAccess(r,e),_classCheckPrivateStaticFieldDescriptor(t,"set"),_classApplyDescriptorSet(r,t,n),n}function _classApplyDescriptorSet(r,e,t){if(e.set)e.set.call(r,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function _classStaticPrivateFieldSpecGet(r,e,t){return _classCheckPrivateStaticAccess(r,e),_classCheckPrivateStaticFieldDescriptor(t,"get"),_classApplyDescriptorGet(r,t)}function _classCheckPrivateStaticFieldDescriptor(r,e){if(r===void 0)throw new TypeError("attempted to "+e+" private static field before its declaration")}function _classCheckPrivateStaticAccess(r,e){if(r!==e)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(r,e){return e.get?e.get.call(r):e.value}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:r,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:t}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=r,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=t}let createPDFNetworkStream;function setPDFNetworkStreamFactory(r){createPDFNetworkStream=r}function getDocument(r){const e=new PDFDocumentLoadingTask;let t;if(typeof r=="string"||r instanceof URL)t={url:r};else if((0,_util.isArrayBuffer)(r))t={data:r};else if(r instanceof PDFDataRangeTransport)t={range:r};else{if(typeof r!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=r}const n=Object.create(null);let a=null,s=null;for(const u in t){const p=t[u];switch(u){case"url":if(typeof window<"u")try{n[u]=new URL(p,window.location).href;continue}catch(h){(0,_util.warn)(`Cannot create valid URL: "${h}".`)}else if(typeof p=="string"||p instanceof URL){n[u]=p.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":a=p;continue;case"worker":s=p;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&p instanceof Buffer)n[u]=new Uint8Array(p);else{if(p instanceof Uint8Array)break;if(typeof p=="string")n[u]=(0,_util.stringToBytes)(p);else if(typeof p=="object"&&p!==null&&!isNaN(p.length))n[u]=new Uint8Array(p);else if((0,_util.isArrayBuffer)(p))n[u]=new Uint8Array(p);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}n[u]=p}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=n.stopAtErrors!==!0,n.fontExtraProperties=n.fontExtraProperties===!0,n.pdfBug=n.pdfBug===!0,n.enableXfa=n.enableXfa===!0,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof n.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),typeof n.cMapUrl!="string"&&(n.cMapUrl=null),typeof n.standardFontDataUrl!="string"&&(n.standardFontDataUrl=null),typeof n.useWorkerFetch!="boolean"&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof n.isEvalSupported!="boolean"&&(n.isEvalSupported=!0),typeof n.disableFontFace!="boolean"&&(n.disableFontFace=_is_node.isNodeJS),typeof n.useSystemFonts!="boolean"&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),(typeof n.ownerDocument!="object"||n.ownerDocument===null)&&(n.ownerDocument=globalThis.document),typeof n.disableRange!="boolean"&&(n.disableRange=!1),typeof n.disableStream!="boolean"&&(n.disableStream=!1),typeof n.disableAutoFetch!="boolean"&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!s){const u={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};s=u.port?PDFWorker.fromPort(u):new PDFWorker(u),e._worker=s}const o=e.docId;return s.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const u=_fetchDocument(s,n,a,o),p=new Promise(function(h){let f;a?f=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},a):n.data||(f=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),h(f)});return Promise.all([u,p]).then(function(h){let[f,E]=h;if(e.destroyed)throw new Error("Loading aborted");const m=new _message_handler.MessageHandler(o,f,s.port),w=new WorkerTransport(m,e,E,n);e._transport=w,m.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(r,e,t,n){if(r.destroyed)throw new Error("Worker was destroyed");t&&(e.length=t.length,e.initialData=t.initialData,e.progressiveDone=t.progressiveDone,e.contentDispositionFilename=t.contentDispositionFilename);const a=await r.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(e.data&&(e.data=null),r.destroyed)throw new Error("Worker was destroyed");return a}class PDFDocumentLoadingTask{constructor(){var e,t;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(e=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),t=e++,e)),t}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)===null||e===void 0?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};class PDFDataRangeTransport{constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,n,a){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=e,this._pageInfo=t,this._ownerDocument=a,this._transport=n,this._stats=s?new _display_utils.StatTimer:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:s=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:a,dontFlip:s})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._transport.getRenderingIntent(e);let n=this._annotationPromises.get(t.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,t.renderingIntent),this._annotationPromises.set(t.cacheKey,n),n=n.then(a=>{for(const s of a)s.titleObj!==void 0&&Object.defineProperty(s,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),s.titleObj.str}}),s.contentsObj!==void 0&&Object.defineProperty(s,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),s.contentsObj.str}});return a})),n}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return((e=this._transport._htmlForXfa)===null||e===void 0?void 0:e.children[this._pageIndex])||null}render(e){var t,n,a;let{canvasContext:s,viewport:o,intent:u="display",annotationMode:p=_util.AnnotationMode.ENABLE,transform:h=null,imageLayer:f=null,canvasFactory:E=null,background:m=null,optionalContentConfigPromise:w=null,annotationCanvasMap:I=null,pageColors:S=null,printAnnotationStorage:T=null}=e;((t=arguments[0])===null||t===void 0?void 0:t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_FORMS)),((n=arguments[0])===null||n===void 0?void 0:n.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const F=this._transport.getRenderingIntent(u,p,T);this.pendingCleanup=!1,w||(w=this._transport.getOptionalContentConfig());let y=this._intentStates.get(F.cacheKey);y||(y=Object.create(null),this._intentStates.set(F.cacheKey,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const b=E||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),g=!!(F.renderingIntent&_util.RenderingIntentFlag.PRINT);y.displayReadyCapability||(y.displayReadyCapability=(0,_util.createPromiseCapability)(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(F));const l=A=>{y.renderTasks.delete(d),(this.cleanupAfterRender||g)&&(this.pendingCleanup=!0),this._tryCleanup(),A?(d.capability.reject(A),this._abortOperatorList({intentState:y,reason:A instanceof Error?A:new Error(A)})):d.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},d=new InternalRenderTask({callback:l,params:{canvasContext:s,viewport:o,transform:h,imageLayer:f,background:m},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:I,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:b,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:S});((a=y).renderTasks||(a.renderTasks=new Set)).add(d);const _=d.task;return Promise.all([y.displayReadyCapability.promise,w]).then(A=>{let[C,L]=A;if(this.pendingCleanup){l();return}this._stats&&this._stats.time("Rendering"),d.initializeGraphics({transparency:C,optionalContentConfig:L}),d.operatorListChanged()}).catch(l),_}getOperatorList(){let{intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(u))}const s=this._transport.getRenderingIntent(e,t,n,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let u;if(!o.opListReadCapability){var p;u=Object.create(null),u.operatorListChanged=a,o.opListReadCapability=(0,_util.createPromiseCapability)(),((p=o).renderTasks||(p.renderTasks=new Set)).add(u),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(s)}return o.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:e=!1,includeMarkedContent:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:t===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(n=>_xfa_text.XfaText.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,a){function s(){o.read().then(function(p){let{value:h,done:f}=p;if(f){n(u);return}Object.assign(u.styles,h.styles),u.items.push(...h.items),s()},a)}const o=t.getReader(),u={items:[],styles:Object.create(null)};s()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(e))}_renderPageChunk(e,t){for(let n=0,a=e.length;n<a;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageMap:a}=e;const o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:a}).getReader(),u=this._intentStates.get(n);u.streamReader=o;const p=()=>{o.read().then(h=>{let{value:f,done:E}=h;if(E){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),p())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();this._tryCleanup()}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};p()}_abortOperatorList(e){let{intentState:t,reason:n,force:a=!1}=e;if(t.streamReader){if(!a){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:n,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,t){const n={data:structuredClone(e,t)};this._deferred.then(()=>{for(const a of this._listeners)a.call(this,n)})}addEventListener(e,t){this._listeners.push(t)}removeEventListener(e,t){const n=this._listeners.indexOf(t);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const r=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;r&&(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,e){let t;try{if(t=new URL(r),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(e,t);return t.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(r){const e=`importScripts("${r}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{constructor(){let{name:r=null,port:e=null,verbosity:t=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));const e=new Worker(r),t=new _message_handler.MessageHandler("main","worker",e),n=()=>{e.removeEventListener("error",a),t.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||n()};e.addEventListener("error",a),t.on("test",o=>{if(e.removeEventListener("error",a),this.destroyed){n();return}o?(this._messageHandler=t,this._port=e,this._webWorker=e,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),e.terminate())}),t.on("ready",o=>{if(e.removeEventListener("error",a),this.destroyed){n();return}try{s()}catch{this._setupFakeWorker()}});const s=()=>{const o=new Uint8Array;t.send("test",o,[o.buffer])};s();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const t=`fake${PDFWorkerUtil.fakeWorkerId++}`,n=new _message_handler.MessageHandler(t+"_worker",t,e);r.setup(n,e);const a=new _message_handler.MessageHandler(t,t+"_worker",e);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!(r!=null&&r.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(r.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(r.port):new PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var r;return((r=globalThis.pdfjsWorker)===null||r===void 0?void 0:r.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;var _workerPorts={value:new WeakMap};PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(e,t,n,a){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,a.useWorkerFetch||(this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked}),this.StandardFontDataFactory=new a.StandardFontDataFactory({baseUrl:a.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=_util.RenderingIntentFlag.DISPLAY,o=null;switch(e){case"any":s=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":s=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:s+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:s+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:s+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,o=(s&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return a&&(s+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:s,cacheKey:`${s}_${_annotation_storage.AnnotationStorage.getHash(o)}`,annotationStorageMap:o}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of _classPrivateFieldGet(this,_pageCache).values())e.push(n._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},a.onPull=()=>{this._fullReader.read().then(function(s){let{value:o,done:u}=s;if(u){a.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(o),"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(s=>{a.error(s)})},a.onCancel=s=>{this._fullReader.cancel(s),a.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",n=>{const a=(0,_util.createPromiseCapability)(),s=this._fullReader;return s.headersReady.then(()=>{if(!s.isStreamingSupported||!s.isRangeSupported){if(this._lastProgress){var o;(o=t.onProgress)===null||o===void 0||o.call(t,this._lastProgress)}s.onProgress=u=>{var p;(p=t.onProgress)===null||p===void 0||p.call(t,{loaded:u.loaded,total:u.total})}}a.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},a.reject),a.promise}),e.on("GetRangeReader",(n,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){a.close();return}a.onPull=()=>{s.read().then(function(o){let{value:u,done:p}=o;if(p){a.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(u),"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(u),1,[u])}).catch(o=>{a.error(o)})},a.onCancel=o=>{s.cancel(o),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",n=>{let{pdfInfo:a}=n;this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(a,this))}),e.on("DocException",function(n){let a;switch(n.name){case"PasswordException":a=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":a=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(a)}),e.on("PasswordRequest",n=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const a=s=>{s instanceof Error?this._passwordCapability.reject(s):this._passwordCapability.resolve({password:s})};try{t.onPassword(a,n.code)}catch(s){this._passwordCapability.reject(s)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),e.on("DataLoaded",n=>{var a;(a=t.onProgress)===null||a===void 0||a.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",n=>{var a;let[s,o,u]=n;if(!this.destroyed&&!this.commonObjs.has(s))switch(o){case"Font":const p=this._params;if("error"in u){const E=u.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(s,E);break}let h=null;p.pdfBug&&(a=globalThis.FontInspector)!==null&&a!==void 0&&a.enabled&&(h={registerFont(E,m){globalThis.FontInspector.fontAdded(E,m)}});const f=new _font_loader.FontFaceObject(u,{isEvalSupported:p.isEvalSupported,disableFontFace:p.disableFontFace,ignoreErrors:p.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:h});this.fontLoader.bind(f).catch(E=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!p.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(s,f)});break;case"FontPath":case"Image":this.commonObjs.resolve(s,u);break;default:throw new Error(`Got unknown common object type ${o}`)}}),e.on("obj",n=>{let[a,s,o,u]=n;if(this.destroyed)return;const p=_classPrivateFieldGet(this,_pageCache).get(s);if(!p.objs.has(a))switch(o){case"Image":p.objs.resolve(a,u);const f=8e6;if(u){let E;if(u.bitmap){const{bitmap:m,width:w,height:I}=u;E=w*I*4,p._bitmaps.add(m)}else{var h;E=((h=u.data)===null||h===void 0?void 0:h.length)||0}E>f&&(p.cleanupAfterRender=!0)}break;case"Pattern":p.objs.resolve(a,u);break;default:throw new Error(`Got unknown object type ${o}`)}}),e.on("DocProgress",n=>{var a;this.destroyed||(a=t.onProgress)===null||a===void 0||a.call(t,{loaded:n.loaded,total:n.total})}),e.on("DocStats",n=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(n.streamTypes),fontTypes:Object.freeze(n.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(e){var t,n;let{featureId:a}=e;this.destroyed||(t=(n=this.loadingTask).onUnsupportedFeature)===null||t===void 0||t.call(n,a)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=_classPrivateFieldGet(this,_pagePromises).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");const o=new PDFPageProxy(t,s,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(t,o),o});return _classPrivateFieldGet(this,_pagePromises).set(t,a),a}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}saveDocument(){var e,t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(e=(t=this._fullReader)===null||t===void 0?void 0:t.filename)!==null&&e!==void 0?e:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var t,n,a,s;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:(t=(n=this._fullReader)===null||n===void 0?void 0:n.filename)!==null&&t!==void 0?t:null,contentLength:(a=(s=this._fullReader)===null||s===void 0?void 0:s.contentLength)!==null&&a!==void 0?a:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const t of _classPrivateFieldGet(this,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t){const a=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);return a.capability.promise.then(()=>t(a.data)),null}const n=_classPrivateFieldGet(this,_objs)[e];if(!(n!=null&&n.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=_classPrivateFieldGet(this,_objs)[e];return(t==null?void 0:t.capability.settled)||!1}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);n.data=t,n.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(r){const e=_classPrivateFieldGet(this,_objs)[r];return e||(_classPrivateFieldGet(this,_objs)[r]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(e){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,e),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:e}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(this,_internalRenderTask);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(e){let{callback:t,params:n,objs:a,commonObjs:s,annotationCanvasMap:o,operatorList:u,pageIndex:p,canvasFactory:h,useRequestAnimationFrame:f=!1,pdfBug:E=!1,pageColors:m=null}=e;this.callback=t,this.params=n,this.objs=a,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=p,this.canvasFactory=h,this._pdfBug=E,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t;let{transparency:n=!1,optionalContentConfig:a}=e;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&(t=globalThis.StepperManager)!==null&&t!==void 0&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:o,transform:u,imageLayer:p,background:h}=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,p,a,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:u,viewport:o,transparency:n,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback())))}}var _canvasInUse={value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=t(1),a=t(131),s=t(135);function o(g,l,d){w(g,l),l.set(g,d)}function u(g,l){var d=f(g,l,"get");return p(g,d)}function p(g,l){return l.get?l.get.call(g):l.value}function h(g,l,d){var _=f(g,l,"set");return E(g,_,d),d}function f(g,l,d){if(!l.has(g))throw new TypeError("attempted to "+d+" private field on non-instance");return l.get(g)}function E(g,l,d){if(l.set)l.set.call(g,d);else{if(!l.writable)throw new TypeError("attempted to set read only private field");l.value=d}}function m(g,l){w(g,l),l.add(g)}function w(g,l){if(l.has(g))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(g,l,d){if(!l.has(g))throw new TypeError("attempted to get private field on non-instance");return d}var S=new WeakSet;class T{constructor(){m(this,S),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(l,d){const _=this._storage.get(l);return _===void 0?d:Object.assign(d,_)}getRawValue(l){return this._storage.get(l)}remove(l){if(this._storage.delete(l),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of this._storage.values())if(d instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(l,d){const _=this._storage.get(l);let A=!1;if(_!==void 0)for(const[C,L]of Object.entries(d))_[C]!==L&&(A=!0,_[C]=L);else A=!0,this._storage.set(l,d);A&&I(this,S,F).call(this),d instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(l){return this._storage.has(l)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(this._storage.size===0)return null;const l=new Map;for(const[d,_]of this._storage){const A=_ instanceof a.AnnotationEditor?_.serialize():_;A&&l.set(d,A)}return l}static getHash(l){if(!l)return"";const d=new s.MurmurHash3_64;for(const[_,A]of l)d.update(`${_}:${JSON.stringify(A)}`);return d.hexdigest()}}e.AnnotationStorage=T;function F(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}var y=new WeakMap;class b extends T{constructor(l){super(),o(this,y,{writable:!0,value:null}),h(this,y,structuredClone(l.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,y)}}e.PrintAnnotationStorage=b},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=t(132),a=t(1);function s(g,l,d){return l in g?Object.defineProperty(g,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):g[l]=d,g}function o(g,l,d){u(g,l),l.set(g,d)}function u(g,l){if(l.has(g))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(g,l,d){var _=E(g,l,"set");return h(g,_,d),d}function h(g,l,d){if(l.set)l.set.call(g,d);else{if(!l.writable)throw new TypeError("attempted to set read only private field");l.value=d}}function f(g,l){var d=E(g,l,"get");return m(g,d)}function E(g,l,d){if(!l.has(g))throw new TypeError("attempted to "+d+" private field on non-instance");return l.get(g)}function m(g,l){return l.get?l.get.call(g):l.value}var w=new WeakMap,I=new WeakMap,S=new WeakMap,T=new WeakMap,F=new WeakMap,y=new WeakMap;class b{constructor(l){o(this,w,{writable:!0,value:this.focusin.bind(this)}),o(this,I,{writable:!0,value:this.focusout.bind(this)}),o(this,S,{writable:!0,value:!1}),o(this,T,{writable:!0,value:!1}),o(this,F,{writable:!0,value:!1}),o(this,y,{writable:!0,value:b._zIndex++}),this.constructor===b&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=l.parent,this.id=l.id,this.width=this.height=null,this.pageIndex=l.parent.pageIndex,this.name=l.name,this.div=null;const[d,_]=this.parent.viewportBaseDimensions;this.x=l.x/d,this.y=l.y/_,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,y)}focusin(l){f(this,S)?p(this,S,!1):this.parent.setSelected(this)}focusout(l){if(!this.isAttachedToDOM)return;const d=l.relatedTarget;d!=null&&d.closest(`#${this.id}`)||(l.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(l){const d=this.parent.div.getBoundingClientRect();this.startX=l.clientX-d.x,this.startY=l.clientY-d.y,l.dataTransfer.setData("text/plain",this.id),l.dataTransfer.effectAllowed="move"}setAt(l,d,_,A){const[C,L]=this.parent.viewportBaseDimensions;[_,A]=this.screenToPageTranslation(_,A),this.x=(l+_)/C,this.y=(d+A)/L,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(l,d){const[_,A]=this.parent.viewportBaseDimensions;[l,d]=this.screenToPageTranslation(l,d),this.x+=l/_,this.y+=d/A,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(l,d){const{rotation:_}=this.parent.viewport;switch(_){case 90:return[d,-l];case 180:return[-l,-d];case 270:return[-d,l];default:return[l,d]}}setDims(l,d){const[_,A]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*l/_}%`,this.div.style.height=`${100*d/A}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",f(this,w)),this.div.addEventListener("focusout",f(this,I));const[l,d]=this.getInitialTranslation();return this.translate(l,d),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(l){const d=n.KeyboardManager.platform.isMac;if(l.button!==0||l.ctrlKey&&d){l.preventDefault();return}l.ctrlKey&&!d||l.shiftKey||l.metaKey&&d?this.parent.toggleSelected(this):this.parent.setSelected(this),p(this,S,!0)}getRect(l,d){const[_,A]=this.parent.viewportBaseDimensions,[C,L]=this.parent.pageDimensions,M=C*l/_,V=L*d/A,K=this.x*C,Y=this.y*L,X=this.width*C,H=this.height*L;switch(this.rotation){case 0:return[K+M,L-Y-V-H,K+M+X,L-Y-V];case 90:return[K+V,L-Y+M,K+V+H,L-Y+M+X];case 180:return[K-M-X,L-Y+V,K-M,L-Y+V+H];case 270:return[K-V-H,L-Y-M-X,K-V,L-Y-M];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(l,d){const[_,A,C,L]=l,M=C-_,V=L-A;switch(this.rotation){case 0:return[_,d-L,M,V];case 90:return[_,d-A,V,M];case 180:return[C,d-A,M,V];case 270:return[C,d-L,V,M];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){p(this,F,!0)}disableEditMode(){p(this,F,!1)}isInEditMode(){return f(this,F)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var l;(l=this.div)===null||l===void 0||l.addEventListener("focusin",f(this,w))}serialize(){(0,a.unreachable)("An editor must be serializable")}static deserialize(l,d){const _=new this.prototype.constructor({parent:d,id:d.getNextId()});_.rotation=l.rotation;const[A,C]=d.pageDimensions,[L,M,V,K]=_.getRectInCurrentCoords(l.rect,C);return _.x=L/A,_.y=M/C,_.width=V/A,_.height=K/C,_}remove(){this.div.removeEventListener("focusin",f(this,w)),this.div.removeEventListener("focusout",f(this,I)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var l;(l=this.div)===null||l===void 0||l.classList.add("selectedEditor")}unselect(){var l;(l=this.div)===null||l===void 0||l.classList.remove("selectedEditor")}updateParams(l,d){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return f(this,T)}set isEditing(l){p(this,T,l),l?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}e.AnnotationEditor=b,s(b,"_colorManager",new n.ColorManager),s(b,"_zIndex",1)},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=S,e.opacityToHex=T;var n=t(1),a=t(133);function s(we,ae,ve){return ae in we?Object.defineProperty(we,ae,{value:ve,enumerable:!0,configurable:!0,writable:!0}):we[ae]=ve,we}function o(we,ae){h(we,ae),ae.add(we)}function u(we,ae,ve){if(!ae.has(we))throw new TypeError("attempted to get private field on non-instance");return ve}function p(we,ae,ve){h(we,ae),ae.set(we,ve)}function h(we,ae){if(ae.has(we))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(we,ae,ve){var Me=w(we,ae,"set");return E(we,Me,ve),ve}function E(we,ae,ve){if(ae.set)ae.set.call(we,ve);else{if(!ae.writable)throw new TypeError("attempted to set read only private field");ae.value=ve}}function m(we,ae){var ve=w(we,ae,"get");return I(we,ve)}function w(we,ae,ve){if(!ae.has(we))throw new TypeError("attempted to "+ve+" private field on non-instance");return ae.get(we)}function I(we,ae){return ae.get?ae.get.call(we):ae.value}function S(we,ae,ve){for(const Me of ve)ae.addEventListener(Me,we[Me].bind(we))}function T(we){return Math.round(Math.min(255,Math.max(1,255*we))).toString(16).padStart(2,"0")}var F=new WeakMap;class y{constructor(){p(this,F,{writable:!0,value:0})}getId(){var ae,ve;return`${n.AnnotationEditorPrefix}${f(this,F,(ae=m(this,F),ve=ae++,ae)),ve}`}}var b=new WeakMap,g=new WeakMap,l=new WeakMap,d=new WeakMap;class _{constructor(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;p(this,b,{writable:!0,value:[]}),p(this,g,{writable:!0,value:!1}),p(this,l,{writable:!0,value:void 0}),p(this,d,{writable:!0,value:-1}),f(this,l,ae)}add(ae){let{cmd:ve,undo:Me,mustExec:Xe,type:ge=NaN,overwriteIfSameType:Te=!1,keepUndo:Le=!1}=ae;if(Xe&&ve(),m(this,g))return;const de={cmd:ve,undo:Me,type:ge};if(m(this,d)===-1){m(this,b).length>0&&(m(this,b).length=0),f(this,d,0),m(this,b).push(de);return}if(Te&&m(this,b)[m(this,d)].type===ge){Le&&(de.undo=m(this,b)[m(this,d)].undo),m(this,b)[m(this,d)]=de;return}const ee=m(this,d)+1;ee===m(this,l)?m(this,b).splice(0,1):(f(this,d,ee),ee<m(this,b).length&&m(this,b).splice(ee)),m(this,b).push(de)}undo(){m(this,d)!==-1&&(f(this,g,!0),m(this,b)[m(this,d)].undo(),f(this,g,!1),f(this,d,m(this,d)-1))}redo(){m(this,d)<m(this,b).length-1&&(f(this,d,m(this,d)+1),f(this,g,!0),m(this,b)[m(this,d)].cmd(),f(this,g,!1))}hasSomethingToUndo(){return m(this,d)!==-1}hasSomethingToRedo(){return m(this,d)<m(this,b).length-1}destroy(){f(this,b,null)}}e.CommandManager=_;var A=new WeakSet;class C{constructor(ae){o(this,A),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ve=C.platform.isMac;for(const[Me,Xe]of ae)for(const ge of Me){const Te=ge.startsWith("mac+");ve&&Te?(this.callbacks.set(ge.slice(4),Xe),this.allKeys.add(ge.split("+").at(-1))):!ve&&!Te&&(this.callbacks.set(ge,Xe),this.allKeys.add(ge.split("+").at(-1)))}}static get platform(){const ae=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:ae.includes("Win"),isMac:ae.includes("Mac")})}exec(ae,ve){if(!this.allKeys.has(ve.key))return;const Me=this.callbacks.get(u(this,A,L).call(this,ve));Me&&(Me.bind(ae)(),ve.stopPropagation(),ve.preventDefault())}}e.KeyboardManager=C;function L(we){we.altKey&&this.buffer.push("alt"),we.ctrlKey&&this.buffer.push("ctrl"),we.metaKey&&this.buffer.push("meta"),we.shiftKey&&this.buffer.push("shift"),this.buffer.push(we.key);const ae=this.buffer.join("+");return this.buffer.length=0,ae}var M=new WeakMap;class V{constructor(){p(this,M,{writable:!0,value:null})}copy(ae){ae&&(Array.isArray(ae)?f(this,M,ae.map(ve=>ve.serialize())):f(this,M,[ae.serialize()]),f(this,M,m(this,M).filter(ve=>!!ve)),m(this,M).length===0&&f(this,M,null))}paste(){return m(this,M)}isEmpty(){return m(this,M)===null}destroy(){f(this,M,null)}}class K{get _colors(){const ae=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(ae),(0,n.shadow)(this,"_colors",ae)}convert(ae){const ve=(0,a.getRGB)(ae);if(!window.matchMedia("(forced-colors: active)").matches)return ve;for(const[Me,Xe]of this._colors)if(Xe.every((ge,Te)=>ge===ve[Te]))return K._colorsMapping.get(Me);return ve}getHexCode(ae){const ve=this._colors.get(ae);return ve?n.Util.makeHexColor(...ve):ae}}e.ColorManager=K,s(K,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Y=new WeakMap,X=new WeakMap,H=new WeakMap,W=new WeakMap,B=new WeakMap,N=new WeakMap,J=new WeakMap,le=new WeakMap,ye=new WeakMap,Ce=new WeakMap,q=new WeakMap,R=new WeakMap,O=new WeakMap,z=new WeakMap,$=new WeakMap,v=new WeakMap,x=new WeakMap,k=new WeakSet,D=new WeakSet,j=new WeakSet,G=new WeakSet,Z=new WeakSet,re=new WeakSet,ie=new WeakSet,ce=new WeakSet,oe=new WeakSet;class ue{constructor(ae,ve){o(this,oe),o(this,ce),o(this,ie),o(this,re),o(this,Z),o(this,G),o(this,j),o(this,D),o(this,k),p(this,Y,{writable:!0,value:null}),p(this,X,{writable:!0,value:new Map}),p(this,H,{writable:!0,value:new Map}),p(this,W,{writable:!0,value:new V}),p(this,B,{writable:!0,value:new _}),p(this,N,{writable:!0,value:0}),p(this,J,{writable:!0,value:null}),p(this,le,{writable:!0,value:null}),p(this,ye,{writable:!0,value:new y}),p(this,Ce,{writable:!0,value:!1}),p(this,q,{writable:!0,value:n.AnnotationEditorType.NONE}),p(this,R,{writable:!0,value:new Set}),p(this,O,{writable:!0,value:this.keydown.bind(this)}),p(this,z,{writable:!0,value:this.onEditingAction.bind(this)}),p(this,$,{writable:!0,value:this.onPageChanging.bind(this)}),p(this,v,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),p(this,x,{writable:!0,value:null}),f(this,x,ae),f(this,le,ve),m(this,le)._on("editingaction",m(this,z)),m(this,le)._on("pagechanging",m(this,$))}destroy(){u(this,D,be).call(this),m(this,le)._off("editingaction",m(this,z)),m(this,le)._off("pagechanging",m(this,$));for(const ae of m(this,H).values())ae.destroy();m(this,H).clear(),m(this,X).clear(),f(this,Y,null),m(this,R).clear(),m(this,W).destroy(),m(this,B).destroy()}onPageChanging(ae){let{pageNumber:ve}=ae;f(this,N,ve-1)}focusMainContainer(){m(this,x).focus()}keydown(ae){var ve;(ve=this.getActive())!==null&&ve!==void 0&&ve.shouldGetKeyboardEvents()||ue._keyboardManager.exec(this,ae)}onEditingAction(ae){["undo","redo","cut","copy","paste","delete","selectAll"].includes(ae.name)&&this[ae.name]()}setEditingState(ae){ae?(u(this,k,me).call(this),u(this,j,Ae).call(this,{isEditing:m(this,q)!==n.AnnotationEditorType.NONE,isEmpty:u(this,ce,Qe).call(this),hasSomethingToUndo:m(this,B).hasSomethingToUndo(),hasSomethingToRedo:m(this,B).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:m(this,W).isEmpty()})):(u(this,D,be).call(this),u(this,j,Ae).call(this,{isEditing:!1}))}registerEditorTypes(ae){f(this,J,ae);for(const ve of m(this,J))u(this,G,Ee).call(this,ve.defaultPropertiesToUpdate)}getId(){return m(this,ye).getId()}addLayer(ae){m(this,H).set(ae.pageIndex,ae),m(this,Ce)?ae.enable():ae.disable()}removeLayer(ae){m(this,H).delete(ae.pageIndex)}updateMode(ae){if(f(this,q,ae),ae===n.AnnotationEditorType.NONE)this.setEditingState(!1),u(this,re,_e).call(this);else{this.setEditingState(!0),u(this,Z,Fe).call(this);for(const ve of m(this,H).values())ve.updateMode(ae)}}updateToolbar(ae){ae!==m(this,q)&&m(this,le).dispatch("switchannotationeditormode",{source:this,mode:ae})}updateParams(ae,ve){for(const Me of m(this,R))Me.updateParams(ae,ve);for(const Me of m(this,J))Me.updateDefaultParams(ae,ve)}getEditors(ae){const ve=[];for(const Me of m(this,X).values())Me.pageIndex===ae&&ve.push(Me);return ve}getEditor(ae){return m(this,X).get(ae)}addEditor(ae){m(this,X).set(ae.id,ae)}removeEditor(ae){m(this,X).delete(ae.id),this.unselect(ae)}setActiveEditor(ae){m(this,Y)!==ae&&(f(this,Y,ae),ae&&u(this,G,Ee).call(this,ae.propertiesToUpdate))}toggleSelected(ae){if(m(this,R).has(ae)){m(this,R).delete(ae),ae.unselect(),u(this,j,Ae).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,R).add(ae),ae.select(),u(this,G,Ee).call(this,ae.propertiesToUpdate),u(this,j,Ae).call(this,{hasSelectedEditor:!0})}setSelected(ae){for(const ve of m(this,R))ve!==ae&&ve.unselect();m(this,R).clear(),m(this,R).add(ae),ae.select(),u(this,G,Ee).call(this,ae.propertiesToUpdate),u(this,j,Ae).call(this,{hasSelectedEditor:!0})}isSelected(ae){return m(this,R).has(ae)}unselect(ae){ae.unselect(),m(this,R).delete(ae),u(this,j,Ae).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,R).size!==0}undo(){m(this,B).undo(),u(this,j,Ae).call(this,{hasSomethingToUndo:m(this,B).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:u(this,ce,Qe).call(this)})}redo(){m(this,B).redo(),u(this,j,Ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,B).hasSomethingToRedo(),isEmpty:u(this,ce,Qe).call(this)})}addCommands(ae){m(this,B).add(ae),u(this,j,Ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:u(this,ce,Qe).call(this)})}delete(){if(m(this,Y)&&m(this,Y).commitOrRemove(),!this.hasSelection)return;const ae=[...m(this,R)],ve=()=>{for(const Xe of ae)Xe.remove()},Me=()=>{for(const Xe of ae)u(this,ie,Ye).call(this,Xe)};this.addCommands({cmd:ve,undo:Me,mustExec:!0})}copy(){if(m(this,Y)&&m(this,Y).commitOrRemove(),this.hasSelection){const ae=[];for(const ve of m(this,R))ve.isEmpty()||ae.push(ve);if(ae.length===0)return;m(this,W).copy(ae),u(this,j,Ae).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(m(this,W).isEmpty())return;this.unselectAll();const ae=m(this,H).get(m(this,N)),ve=m(this,W).paste().map(ge=>ae.deserialize(ge)),Me=()=>{for(const ge of ve)u(this,ie,Ye).call(this,ge);u(this,oe,Oe).call(this,ve)},Xe=()=>{for(const ge of ve)ge.remove()};this.addCommands({cmd:Me,undo:Xe,mustExec:!0})}selectAll(){for(const ae of m(this,R))ae.commit();u(this,oe,Oe).call(this,m(this,X).values())}unselectAll(){if(m(this,Y)){m(this,Y).commitOrRemove();return}if(u(this,oe,Oe).size!==0){for(const ae of m(this,R))ae.unselect();m(this,R).clear(),u(this,j,Ae).call(this,{hasSelectedEditor:!1})}}isActive(ae){return m(this,Y)===ae}getActive(){return m(this,Y)}getMode(){return m(this,q)}}e.AnnotationEditorUIManager=ue;function me(){m(this,x).addEventListener("keydown",m(this,O))}function be(){m(this,x).removeEventListener("keydown",m(this,O))}function Ae(we){Object.entries(we).some(ve=>{let[Me,Xe]=ve;return m(this,v)[Me]!==Xe})&&m(this,le).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,v),we)})}function Ee(we){m(this,le).dispatch("annotationeditorparamschanged",{source:this,details:we})}function Fe(){if(!m(this,Ce)){f(this,Ce,!0);for(const we of m(this,H).values())we.enable()}}function _e(){if(this.unselectAll(),m(this,Ce)){f(this,Ce,!1);for(const we of m(this,H).values())we.disable()}}function Ye(we){const ae=m(this,H).get(we.pageIndex);ae?ae.addOrRebuild(we):this.addEditor(we)}function Qe(){if(m(this,X).size===0)return!0;if(m(this,X).size===1)for(const we of m(this,X).values())return we.isEmpty();return!1}function Oe(we){m(this,R).clear();for(const ae of we)ae.isEmpty()||(m(this,R).add(ae),ae.select());u(this,j,Ae).call(this,{hasSelectedEditor:!0})}s(ue,"_keyboardManager",new C([[["ctrl+a","mac+meta+a"],ue.prototype.selectAll],[["ctrl+c","mac+meta+c"],ue.prototype.copy],[["ctrl+v","mac+meta+v"],ue.prototype.paste],[["ctrl+x","mac+meta+x"],ue.prototype.cut],[["ctrl+z","mac+meta+z"],ue.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ue.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ue.prototype.delete],[["Escape","mac+Escape"],ue.prototype.unselectAll]]))},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=_,e.getColorValues=V,e.getCurrentTransform=K,e.getCurrentTransformInverse=Y,e.getFilenameFromUrl=y,e.getPdfFilenameFromUrl=b,e.getRGB=M,e.getXfaPageViewport=L,e.isDataScheme=T,e.isPdfFile=F,e.isValidFetchUrl=l,e.loadScript=d;var n=t(134),a=t(1);function s(X,H,W){return H in X?Object.defineProperty(X,H,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[H]=W,X}const o="http://www.w3.org/2000/svg",u="pdfjs_internal_id_";e.AnnotationPrefix=u;class p{}e.PixelsPerInch=p,s(p,"CSS",96),s(p,"PDF",72),s(p,"PDF_TO_CSS_UNITS",p.CSS/p.PDF);class h extends n.BaseCanvasFactory{constructor(){let{ownerDocument:H=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=H}_createCanvas(H,W){const B=this._document.createElement("canvas");return B.width=H,B.height=W,B}}e.DOMCanvasFactory=h;async function f(X){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(l(X,document.baseURI)){const W=await fetch(X);if(!W.ok)throw new Error(W.statusText);return H?new Uint8Array(await W.arrayBuffer()):(0,a.stringToBytes)(await W.text())}return new Promise((W,B)=>{const N=new XMLHttpRequest;N.open("GET",X,!0),H&&(N.responseType="arraybuffer"),N.onreadystatechange=()=>{if(N.readyState===XMLHttpRequest.DONE){if(N.status===200||N.status===0){let J;if(H&&N.response?J=new Uint8Array(N.response):!H&&N.responseText&&(J=(0,a.stringToBytes)(N.responseText)),J){W(J);return}}B(new Error(N.statusText))}},N.send(null)})}class E extends n.BaseCMapReaderFactory{_fetchData(H,W){return f(H,this.isCompressed).then(B=>({cMapData:B,compressionType:W}))}}e.DOMCMapReaderFactory=E;class m extends n.BaseStandardFontDataFactory{_fetchData(H){return f(H,!0)}}e.DOMStandardFontDataFactory=m;class w extends n.BaseSVGFactory{_createSVG(H){return document.createElementNS(o,H)}}e.DOMSVGFactory=w;class I{constructor(H){let{viewBox:W,scale:B,rotation:N,offsetX:J=0,offsetY:le=0,dontFlip:ye=!1}=H;this.viewBox=W,this.scale=B,this.rotation=N,this.offsetX=J,this.offsetY=le;const Ce=(W[2]+W[0])/2,q=(W[3]+W[1])/2;let R,O,z,$;switch(N%=360,N<0&&(N+=360),N){case 180:R=-1,O=0,z=0,$=1;break;case 90:R=0,O=1,z=1,$=0;break;case 270:R=0,O=-1,z=-1,$=0;break;case 0:R=1,O=0,z=0,$=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ye&&(z=-z,$=-$);let v,x,k,D;R===0?(v=Math.abs(q-W[1])*B+J,x=Math.abs(Ce-W[0])*B+le,k=Math.abs(W[3]-W[1])*B,D=Math.abs(W[2]-W[0])*B):(v=Math.abs(Ce-W[0])*B+J,x=Math.abs(q-W[1])*B+le,k=Math.abs(W[2]-W[0])*B,D=Math.abs(W[3]-W[1])*B),this.transform=[R*B,O*B,z*B,$*B,v-R*B*Ce-z*B*q,x-O*B*Ce-$*B*q],this.width=k,this.height=D}clone(){let{scale:H=this.scale,rotation:W=this.rotation,offsetX:B=this.offsetX,offsetY:N=this.offsetY,dontFlip:J=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new I({viewBox:this.viewBox.slice(),scale:H,rotation:W,offsetX:B,offsetY:N,dontFlip:J})}convertToViewportPoint(H,W){return a.Util.applyTransform([H,W],this.transform)}convertToViewportRectangle(H){const W=a.Util.applyTransform([H[0],H[1]],this.transform),B=a.Util.applyTransform([H[2],H[3]],this.transform);return[W[0],W[1],B[0],B[1]]}convertToPdfPoint(H,W){return a.Util.applyInverseTransform([H,W],this.transform)}}e.PageViewport=I;class S extends a.BaseException{constructor(H,W){super(H,"RenderingCancelledException"),this.type=W}}e.RenderingCancelledException=S;function T(X){const H=X.length;let W=0;for(;W<H&&X[W].trim()==="";)W++;return X.substring(W,W+5).toLowerCase()==="data:"}function F(X){return typeof X=="string"&&/\.pdf$/i.test(X)}function y(X){const H=X.indexOf("#"),W=X.indexOf("?"),B=Math.min(H>0?H:X.length,W>0?W:X.length);return X.substring(X.lastIndexOf("/",B)+1,B)}function b(X){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof X!="string")return H;if(T(X))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),H;const W=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,B=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,N=W.exec(X);let J=B.exec(N[1])||B.exec(N[2])||B.exec(N[3]);if(J&&(J=J[0],J.includes("%")))try{J=B.exec(decodeURIComponent(J))[0]}catch{}return J||H}class g{constructor(){this.started=Object.create(null),this.times=[]}time(H){H in this.started&&(0,a.warn)(`Timer is already running for ${H}`),this.started[H]=Date.now()}timeEnd(H){H in this.started||(0,a.warn)(`Timer has not been started for ${H}`),this.times.push({name:H,start:this.started[H],end:Date.now()}),delete this.started[H]}toString(){const H=[];let W=0;for(const B of this.times){const N=B.name;N.length>W&&(W=N.length)}for(const B of this.times){const N=B.end-B.start;H.push(`${B.name.padEnd(W)} ${N}ms
`)}return H.join("")}}e.StatTimer=g;function l(X,H){try{const{protocol:W}=H?new URL(X,H):new URL(X);return W==="http:"||W==="https:"}catch{return!1}}function d(X){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((W,B)=>{const N=document.createElement("script");N.src=X,N.onload=function(J){H&&N.remove(),W(J)},N.onerror=function(){B(new Error(`Cannot load script at: ${N.src}`))},(document.head||document.documentElement).append(N)})}function _(X){console.log("Deprecated API usage: "+X)}let A;class C{static toDateObject(H){if(!H||typeof H!="string")return null;A||(A=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const W=A.exec(H);if(!W)return null;const B=parseInt(W[1],10);let N=parseInt(W[2],10);N=N>=1&&N<=12?N-1:0;let J=parseInt(W[3],10);J=J>=1&&J<=31?J:1;let le=parseInt(W[4],10);le=le>=0&&le<=23?le:0;let ye=parseInt(W[5],10);ye=ye>=0&&ye<=59?ye:0;let Ce=parseInt(W[6],10);Ce=Ce>=0&&Ce<=59?Ce:0;const q=W[7]||"Z";let R=parseInt(W[8],10);R=R>=0&&R<=23?R:0;let O=parseInt(W[9],10)||0;return O=O>=0&&O<=59?O:0,q==="-"?(le+=R,ye+=O):q==="+"&&(le-=R,ye-=O),new Date(Date.UTC(B,N,J,le,ye,Ce))}}e.PDFDateString=C;function L(X,H){let{scale:W=1,rotation:B=0}=H;const{width:N,height:J}=X.attributes.style,le=[0,0,parseInt(N),parseInt(J)];return new I({viewBox:le,scale:W,rotation:B})}function M(X){if(X.startsWith("#")){const H=parseInt(X.slice(1),16);return[(H&16711680)>>16,(H&65280)>>8,H&255]}return X.startsWith("rgb(")?X.slice(4,-1).split(",").map(H=>parseInt(H)):X.startsWith("rgba(")?X.slice(5,-1).split(",").map(H=>parseInt(H)).slice(0,3):((0,a.warn)(`Not a valid color format: "${X}"`),[0,0,0])}function V(X){const H=document.createElement("span");H.style.visibility="hidden",document.body.append(H);for(const W of X.keys()){H.style.color=W;const B=window.getComputedStyle(H).color;X.set(W,M(B))}H.remove()}function K(X){const{a:H,b:W,c:B,d:N,e:J,f:le}=X.getTransform();return[H,W,B,N,J,le]}function Y(X){const{a:H,b:W,c:B,d:N,e:J,f:le}=X.getTransform().invertSelf();return[H,W,B,N,J,le]}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=t(1);class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(h,f){if(h<=0||f<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(h,f);return{canvas:E,context:E.getContext("2d")}}reset(h,f,E){if(!h.canvas)throw new Error("Canvas is not specified");if(f<=0||E<=0)throw new Error("Invalid canvas size");h.canvas.width=f,h.canvas.height=E}destroy(h){if(!h.canvas)throw new Error("Canvas is not specified");h.canvas.width=0,h.canvas.height=0,h.canvas=null,h.context=null}_createCanvas(h,f){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=a;class s{constructor(h){let{baseUrl:f=null,isCompressed:E=!1}=h;this.constructor===s&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=E}async fetch(h){let{name:f}=h;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const E=this.baseUrl+f+(this.isCompressed?".bcmap":""),m=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(E,m).catch(w=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${E}`)})}_fetchData(h,f){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=s;class o{constructor(h){let{baseUrl:f=null}=h;this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch(h){let{filename:f}=h;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const E=`${this.baseUrl}${f}`;return this._fetchData(E).catch(m=>{throw new Error(`Unable to load font data at: ${E}`)})}_fetchData(h){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=o;class u{constructor(){this.constructor===u&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(h,f){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(h<=0||f<=0)throw new Error("Invalid SVG dimensions");const m=this._createSVG("svg:svg");return m.setAttribute("version","1.1"),E||(m.setAttribute("width",`${h}px`),m.setAttribute("height",`${f}px`)),m.setAttribute("preserveAspectRatio","none"),m.setAttribute("viewBox",`0 0 ${h} ${f}`),m}createElement(h){if(typeof h!="string")throw new Error("Invalid SVG element type");return this._createSVG(h)}_createSVG(h){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=u},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=t(1);const a=3285377520,s=4294901760,o=65535;class u{constructor(h){this.h1=h?h&4294967295:a,this.h2=h?h&4294967295:a}update(h){let f,E;if(typeof h=="string"){f=new Uint8Array(h.length*2),E=0;for(let _=0,A=h.length;_<A;_++){const C=h.charCodeAt(_);C<=255?f[E++]=C:(f[E++]=C>>>8,f[E++]=C&255)}}else if((0,n.isArrayBuffer)(h))f=h.slice(),E=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const m=E>>2,w=E-m*4,I=new Uint32Array(f.buffer,0,m);let S=0,T=0,F=this.h1,y=this.h2;const b=3432918353,g=461845907,l=b&o,d=g&o;for(let _=0;_<m;_++)_&1?(S=I[_],S=S*b&s|S*l&o,S=S<<15|S>>>17,S=S*g&s|S*d&o,F^=S,F=F<<13|F>>>19,F=F*5+3864292196):(T=I[_],T=T*b&s|T*l&o,T=T<<15|T>>>17,T=T*g&s|T*d&o,y^=T,y=y<<13|y>>>19,y=y*5+3864292196);switch(S=0,w){case 3:S^=f[m*4+2]<<16;case 2:S^=f[m*4+1]<<8;case 1:S^=f[m*4],S=S*b&s|S*l&o,S=S<<15|S>>>17,S=S*g&s|S*d&o,m&1?F^=S:y^=S}this.h1=F,this.h2=y}hexdigest(){let h=this.h1,f=this.h2;h^=f>>>1,h=h*3981806797&s|h*36045&o,f=f*4283543511&s|((f<<16|h>>>16)*2950163797&s)>>>16,h^=f>>>1,h=h*444984403&s|h*60499&o,f=f*3301882366&s|((f<<16|h>>>16)*3120437893&s)>>>16,h^=f>>>1;const E=(h>>>0).toString(16),m=(f>>>0).toString(16);return E.padStart(8,"0")+m.padStart(8,"0")}}e.MurmurHash3_64=u},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=t(1);class a{constructor(p){let{docId:h,onUnsupportedFeature:f,ownerDocument:E=globalThis.document,styleElement:m=null}=p;this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=h,this._onUnsupportedFeature=f,this._document=E,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(p){this.nativeFontFaces.push(p),this._document.fonts.add(p)}insertRule(p){let h=this.styleElement;h||(h=this.styleElement=this._document.createElement("style"),h.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(h));const f=h.sheet;f.insertRule(p,f.cssRules.length)}clear(){for(const p of this.nativeFontFaces)this._document.fonts.delete(p);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(p){if(p.attached||p.missingFile)return;if(p.attached=!0,this.isFontLoadingAPISupported){const f=p.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(E){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${f.family}': '${E}'.`),p.disableFontFace=!0,E}}return}const h=p.createFontFaceRule();if(h){if(this.insertRule(h),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const E=this._queueLoadingCallback(f);this._prepareFontLoadEvent([h],[p],E)})}}_queueLoadingCallback(p){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var p;const h=!!((p=this._document)!==null&&p!==void 0&&p.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(p,h,f){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let s;e.FontLoader=s,e.FontLoader=s=class extends a{constructor(p){super(p),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let p=!1;if(typeof navigator>"u")p=!0;else{const h=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(h==null?void 0:h[1])>=14&&(p=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",p)}_queueLoadingCallback(p){function h(){for((0,n.assert)(!E.done,"completeRequest() cannot be called twice."),E.done=!0;f.requests.length>0&&f.requests[0].done;){const m=f.requests.shift();setTimeout(m.callback,0)}}const f=this.loadingContext,E={id:`pdfjs-font-loading-${f.nextRequestId++}`,done:!1,complete:h,callback:p};return f.requests.push(E),E}get _loadTestFont(){const p=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",p())}_prepareFontLoadEvent(p,h,f){function E(K,Y){return K.charCodeAt(Y)<<24|K.charCodeAt(Y+1)<<16|K.charCodeAt(Y+2)<<8|K.charCodeAt(Y+3)&255}function m(K,Y,X,H){const W=K.substring(0,Y),B=K.substring(Y+X);return W+H+B}let w,I;const S=this._document.createElement("canvas");S.width=1,S.height=1;const T=S.getContext("2d");let F=0;function y(K,Y){if(F++,F>30){(0,n.warn)("Load test font never loaded."),Y();return}if(T.font="30px "+K,T.fillText(".",0,20),T.getImageData(0,0,1,1).data[3]>0){Y();return}setTimeout(y.bind(null,K,Y))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=m(g,976,b.length,b);const d=16,_=1482184792;let A=E(g,d);for(w=0,I=b.length-3;w<I;w+=4)A=A-_+E(b,w)|0;w<b.length&&(A=A-_+E(b+"XXX",w)|0),g=m(g,d,4,(0,n.string32)(A));const C=`url(data:font/opentype;base64,${btoa(g)});`,L=`@font-face {font-family:"${b}";src:${C}}`;this.insertRule(L);const M=[];for(const K of h)M.push(K.loadedName);M.push(b);const V=this._document.createElement("div");V.style.visibility="hidden",V.style.width=V.style.height="10px",V.style.position="absolute",V.style.top=V.style.left="0px";for(const K of M){const Y=this._document.createElement("span");Y.textContent="Hi",Y.style.fontFamily=K,V.append(Y)}this._document.body.append(V),y(b,()=>{V.remove(),f.complete()})}};class o{constructor(p,h){let{isEvalSupported:f=!0,disableFontFace:E=!1,ignoreErrors:m=!1,onUnsupportedFeature:w,fontRegistry:I=null}=h;this.compiledGlyphs=Object.create(null);for(const S in p)this[S]=p[S];this.isEvalSupported=f!==!1,this.disableFontFace=E===!0,this.ignoreErrors=m===!0,this._onUnsupportedFeature=w,this.fontRegistry=I}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let p;if(!this.cssFontInfo)p=new FontFace(this.loadedName,this.data,{});else{const h={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(h.style=`oblique ${this.cssFontInfo.italicAngle}deg`),p=new FontFace(this.cssFontInfo.fontFamily,this.data,h)}return this.fontRegistry&&this.fontRegistry.registerFont(this),p}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const p=(0,n.bytesToString)(this.data),h=`url(data:${this.mimetype};base64,${btoa(p)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${h}}`;else{let E=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(E+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${E}src:${h}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,h),f}getPathGenerator(p,h){if(this.compiledGlyphs[h]!==void 0)return this.compiledGlyphs[h];let f;try{f=p.get(this.loadedName+"_path_"+h)}catch(E){if(!this.ignoreErrors)throw E;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${E}".`),this.compiledGlyphs[h]=function(m,w){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const E=[];for(const m of f){const w=m.args!==void 0?m.args.join(","):"";E.push("c.",m.cmd,"(",w,`);
`)}return this.compiledGlyphs[h]=new Function("c","size",E.join(""))}return this.compiledGlyphs[h]=function(E,m){for(const w of f)w.cmd==="scale"&&(w.args=[m,-m]),E[w.cmd].apply(E,w.args)}}}e.FontFaceObject=o},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=t(133),a=t(1),s=t(138),o=t(139),u=t(3);function p(q,R){h(q,R),R.add(q)}function h(q,R){if(R.has(q))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(q,R,O){if(!R.has(q))throw new TypeError("attempted to get private field on non-instance");return O}const E=16,m=100,w=4096,I=15,S=10,T=u.isNodeJS&&typeof Path2D>"u"?-1:1e3,F=16;function y(q,R){if(q._removeMirroring)throw new Error("Context is already forwarding operations.");q.__originalSave=q.save,q.__originalRestore=q.restore,q.__originalRotate=q.rotate,q.__originalScale=q.scale,q.__originalTranslate=q.translate,q.__originalTransform=q.transform,q.__originalSetTransform=q.setTransform,q.__originalResetTransform=q.resetTransform,q.__originalClip=q.clip,q.__originalMoveTo=q.moveTo,q.__originalLineTo=q.lineTo,q.__originalBezierCurveTo=q.bezierCurveTo,q.__originalRect=q.rect,q.__originalClosePath=q.closePath,q.__originalBeginPath=q.beginPath,q._removeMirroring=()=>{q.save=q.__originalSave,q.restore=q.__originalRestore,q.rotate=q.__originalRotate,q.scale=q.__originalScale,q.translate=q.__originalTranslate,q.transform=q.__originalTransform,q.setTransform=q.__originalSetTransform,q.resetTransform=q.__originalResetTransform,q.clip=q.__originalClip,q.moveTo=q.__originalMoveTo,q.lineTo=q.__originalLineTo,q.bezierCurveTo=q.__originalBezierCurveTo,q.rect=q.__originalRect,q.closePath=q.__originalClosePath,q.beginPath=q.__originalBeginPath,delete q._removeMirroring},q.save=function(){R.save(),this.__originalSave()},q.restore=function(){R.restore(),this.__originalRestore()},q.translate=function(z,$){R.translate(z,$),this.__originalTranslate(z,$)},q.scale=function(z,$){R.scale(z,$),this.__originalScale(z,$)},q.transform=function(z,$,v,x,k,D){R.transform(z,$,v,x,k,D),this.__originalTransform(z,$,v,x,k,D)},q.setTransform=function(z,$,v,x,k,D){R.setTransform(z,$,v,x,k,D),this.__originalSetTransform(z,$,v,x,k,D)},q.resetTransform=function(){R.resetTransform(),this.__originalResetTransform()},q.rotate=function(z){R.rotate(z),this.__originalRotate(z)},q.clip=function(z){R.clip(z),this.__originalClip(z)},q.moveTo=function(O,z){R.moveTo(O,z),this.__originalMoveTo(O,z)},q.lineTo=function(O,z){R.lineTo(O,z),this.__originalLineTo(O,z)},q.bezierCurveTo=function(O,z,$,v,x,k){R.bezierCurveTo(O,z,$,v,x,k),this.__originalBezierCurveTo(O,z,$,v,x,k)},q.rect=function(O,z,$,v){R.rect(O,z,$,v),this.__originalRect(O,z,$,v)},q.closePath=function(){R.closePath(),this.__originalClosePath()},q.beginPath=function(){R.beginPath(),this.__originalBeginPath()}}class b{constructor(R){this.canvasFactory=R,this.cache=Object.create(null)}getCanvas(R,O,z){let $;return this.cache[R]!==void 0?($=this.cache[R],this.canvasFactory.reset($,O,z)):($=this.canvasFactory.create(O,z),this.cache[R]=$),$}delete(R){delete this.cache[R]}clear(){for(const R in this.cache){const O=this.cache[R];this.canvasFactory.destroy(O),delete this.cache[R]}}}function g(q,R,O,z,$,v,x,k,D,j){const[G,Z,re,ie,ce,oe]=(0,n.getCurrentTransform)(q);if(Z===0&&re===0){const be=x*G+ce,Ae=Math.round(be),Ee=k*ie+oe,Fe=Math.round(Ee),_e=(x+D)*G+ce,Ye=Math.abs(Math.round(_e)-Ae)||1,Qe=(k+j)*ie+oe,Oe=Math.abs(Math.round(Qe)-Fe)||1;return q.setTransform(Math.sign(G),0,0,Math.sign(ie),Ae,Fe),q.drawImage(R,O,z,$,v,0,0,Ye,Oe),q.setTransform(G,Z,re,ie,ce,oe),[Ye,Oe]}if(G===0&&ie===0){const be=k*re+ce,Ae=Math.round(be),Ee=x*Z+oe,Fe=Math.round(Ee),_e=(k+j)*re+ce,Ye=Math.abs(Math.round(_e)-Ae)||1,Qe=(x+D)*Z+oe,Oe=Math.abs(Math.round(Qe)-Fe)||1;return q.setTransform(0,Math.sign(Z),Math.sign(re),0,Ae,Fe),q.drawImage(R,O,z,$,v,0,0,Oe,Ye),q.setTransform(G,Z,re,ie,ce,oe),[Oe,Ye]}q.drawImage(R,O,z,$,v,x,k,D,j);const ue=Math.hypot(G,Z),me=Math.hypot(re,ie);return[ue*D,me*j]}function l(q){const{width:R,height:O}=q;if(R>T||O>T)return null;const z=1e3,$=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),v=R+1;let x=new Uint8Array(v*(O+1)),k,D,j;const G=R+7&-8;let Z=new Uint8Array(G*O),re=0;for(const me of q.data){let be=128;for(;be>0;)Z[re++]=me&be?0:255,be>>=1}let ie=0;for(re=0,Z[re]!==0&&(x[0]=1,++ie),D=1;D<R;D++)Z[re]!==Z[re+1]&&(x[D]=Z[re]?2:1,++ie),re++;for(Z[re]!==0&&(x[D]=2,++ie),k=1;k<O;k++){re=k*G,j=k*v,Z[re-G]!==Z[re]&&(x[j]=Z[re]?1:8,++ie);let me=(Z[re]?4:0)+(Z[re-G]?8:0);for(D=1;D<R;D++)me=(me>>2)+(Z[re+1]?4:0)+(Z[re-G+1]?8:0),$[me]&&(x[j+D]=$[me],++ie),re++;if(Z[re-G]!==Z[re]&&(x[j+D]=Z[re]?2:4,++ie),ie>z)return null}for(re=G*(O-1),j=k*v,Z[re]!==0&&(x[j]=8,++ie),D=1;D<R;D++)Z[re]!==Z[re+1]&&(x[j+D]=Z[re]?4:8,++ie),re++;if(Z[re]!==0&&(x[j+D]=4,++ie),ie>z)return null;const ce=new Int32Array([0,v,-1,0,-v,0,0,0,1]),oe=new Path2D;for(k=0;ie&&k<=O;k++){let me=k*v;const be=me+R;for(;me<be&&!x[me];)me++;if(me===be)continue;oe.moveTo(me%v,k);const Ae=me;let Ee=x[me];do{const Fe=ce[Ee];do me+=Fe;while(!x[me]);const _e=x[me];_e!==5&&_e!==10?(Ee=_e,x[me]=0):(Ee=_e&51*Ee>>4,x[me]&=Ee>>2|Ee<<2),oe.lineTo(me%v,me/v|0),x[me]||--ie}while(Ae!==me);--k}return Z=null,x=null,function(me){me.save(),me.scale(1/R,-1/O),me.translate(0,-O),me.fill(oe),me.beginPath(),me.restore()}}class d{constructor(R,O){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,R,O])}clone(){const R=Object.create(this);return R.clipBox=this.clipBox.slice(),R}setCurrentPoint(R,O){this.x=R,this.y=O}updatePathMinMax(R,O,z){[O,z]=a.Util.applyTransform([O,z],R),this.minX=Math.min(this.minX,O),this.minY=Math.min(this.minY,z),this.maxX=Math.max(this.maxX,O),this.maxY=Math.max(this.maxY,z)}updateRectMinMax(R,O){const z=a.Util.applyTransform(O,R),$=a.Util.applyTransform(O.slice(2),R);this.minX=Math.min(this.minX,z[0],$[0]),this.minY=Math.min(this.minY,z[1],$[1]),this.maxX=Math.max(this.maxX,z[0],$[0]),this.maxY=Math.max(this.maxY,z[1],$[1])}updateScalingPathMinMax(R,O){a.Util.scaleMinMax(R,O),this.minX=Math.min(this.minX,O[0]),this.maxX=Math.max(this.maxX,O[1]),this.minY=Math.min(this.minY,O[2]),this.maxY=Math.max(this.maxY,O[3])}updateCurvePathMinMax(R,O,z,$,v,x,k,D,j,G){const Z=a.Util.bezierBoundingBox(O,z,$,v,x,k,D,j);if(G){G[0]=Math.min(G[0],Z[0],Z[2]),G[1]=Math.max(G[1],Z[0],Z[2]),G[2]=Math.min(G[2],Z[1],Z[3]),G[3]=Math.max(G[3],Z[1],Z[3]);return}this.updateRectMinMax(R,Z)}getPathBoundingBox(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.PathType.FILL,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const z=[this.minX,this.minY,this.maxX,this.maxY];if(R===s.PathType.STROKE){O||(0,a.unreachable)("Stroke bounding box must include transform.");const $=a.Util.singularValueDecompose2dScale(O),v=$[0]*this.lineWidth/2,x=$[1]*this.lineWidth/2;z[0]-=v,z[1]-=x,z[2]+=v,z[3]+=x}return z}updateClipFromPath(){const R=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(R||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(R){this.clipBox=R,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.PathType.FILL,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return a.Util.intersect(this.clipBox,this.getPathBoundingBox(R,O))}}function _(q,R){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData<"u"&&R instanceof ImageData){q.putImageData(R,0,0);return}const z=R.height,$=R.width,v=z%F,x=(z-v)/F,k=v===0?x:x+1,D=q.createImageData($,F);let j=0,G;const Z=R.data,re=D.data;let ie,ce,oe,ue,me,be,Ae,Ee;if(O)switch(O.length){case 1:me=O[0],be=O[0],Ae=O[0],Ee=O[0];break;case 4:me=O[0],be=O[1],Ae=O[2],Ee=O[3];break}if(R.kind===a.ImageKind.GRAYSCALE_1BPP){const Fe=Z.byteLength,_e=new Uint32Array(re.buffer,0,re.byteLength>>2),Ye=_e.length,Qe=$+7>>3;let Oe=4294967295,we=a.FeatureTest.isLittleEndian?4278190080:255;for(Ee&&Ee[0]===255&&Ee[255]===0&&([Oe,we]=[we,Oe]),ie=0;ie<k;ie++){for(oe=ie<x?F:v,G=0,ce=0;ce<oe;ce++){const ae=Fe-j;let ve=0;const Me=ae>Qe?$:ae*8-7,Xe=Me&-8;let ge=0,Te=0;for(;ve<Xe;ve+=8)Te=Z[j++],_e[G++]=Te&128?Oe:we,_e[G++]=Te&64?Oe:we,_e[G++]=Te&32?Oe:we,_e[G++]=Te&16?Oe:we,_e[G++]=Te&8?Oe:we,_e[G++]=Te&4?Oe:we,_e[G++]=Te&2?Oe:we,_e[G++]=Te&1?Oe:we;for(;ve<Me;ve++)ge===0&&(Te=Z[j++],ge=128),_e[G++]=Te&ge?Oe:we,ge>>=1}for(;G<Ye;)_e[G++]=0;q.putImageData(D,0,ie*F)}}else if(R.kind===a.ImageKind.RGBA_32BPP){const Fe=!!(me||be||Ae);for(ce=0,ue=$*F*4,ie=0;ie<x;ie++){if(re.set(Z.subarray(j,j+ue)),j+=ue,Fe)for(let _e=0;_e<ue;_e+=4)me&&(re[_e+0]=me[re[_e+0]]),be&&(re[_e+1]=be[re[_e+1]]),Ae&&(re[_e+2]=Ae[re[_e+2]]);q.putImageData(D,0,ce),ce+=F}if(ie<k){if(ue=$*v*4,re.set(Z.subarray(j,j+ue)),Fe)for(let _e=0;_e<ue;_e+=4)me&&(re[_e+0]=me[re[_e+0]]),be&&(re[_e+1]=be[re[_e+1]]),Ae&&(re[_e+2]=Ae[re[_e+2]]);q.putImageData(D,0,ce)}}else if(R.kind===a.ImageKind.RGB_24BPP){const Fe=!!(me||be||Ae);for(oe=F,ue=$*oe,ie=0;ie<k;ie++){for(ie>=x&&(oe=v,ue=$*oe),G=0,ce=ue;ce--;)re[G++]=Z[j++],re[G++]=Z[j++],re[G++]=Z[j++],re[G++]=255;if(Fe)for(let _e=0;_e<G;_e+=4)me&&(re[_e+0]=me[re[_e+0]]),be&&(re[_e+1]=be[re[_e+1]]),Ae&&(re[_e+2]=Ae[re[_e+2]]);q.putImageData(D,0,ie*F)}}else throw new Error(`bad image kind: ${R.kind}`)}function A(q,R){if(R.bitmap){q.drawImage(R.bitmap,0,0);return}const O=R.height,z=R.width,$=O%F,v=(O-$)/F,x=$===0?v:v+1,k=q.createImageData(z,F);let D=0;const j=R.data,G=k.data;for(let Z=0;Z<x;Z++){const re=Z<v?F:$;({srcPos:D}=(0,o.applyMaskImageData)({src:j,srcPos:D,dest:G,width:z,height:re})),q.putImageData(k,0,Z*F)}}function C(q,R){const O=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let z=0,$=O.length;z<$;z++){const v=O[z];q[v]!==void 0&&(R[v]=q[v])}q.setLineDash!==void 0&&(R.setLineDash(q.getLineDash()),R.lineDashOffset=q.lineDashOffset)}function L(q,R){q.strokeStyle=q.fillStyle=R||"#000000",q.fillRule="nonzero",q.globalAlpha=1,q.lineWidth=1,q.lineCap="butt",q.lineJoin="miter",q.miterLimit=10,q.globalCompositeOperation="source-over",q.font="10px sans-serif",q.setLineDash!==void 0&&(q.setLineDash([]),q.lineDashOffset=0)}function M(q,R,O,z){const $=q.length;for(let v=3;v<$;v+=4){const x=q[v];if(x===0)q[v-3]=R,q[v-2]=O,q[v-1]=z;else if(x<255){const k=255-x;q[v-3]=q[v-3]*x+R*k>>8,q[v-2]=q[v-2]*x+O*k>>8,q[v-1]=q[v-1]*x+z*k>>8}}}function V(q,R,O){const z=q.length,$=1/255;for(let v=3;v<z;v+=4){const x=O?O[q[v]]:q[v];R[v]=R[v]*x*$|0}}function K(q,R,O){const z=q.length;for(let $=3;$<z;$+=4){const v=q[$-3]*77+q[$-2]*152+q[$-1]*28;R[$]=O?R[$]*O[v>>8]>>8:R[$]*v>>16}}function Y(q,R,O,z,$,v,x,k,D,j,G){const Z=!!v,re=Z?v[0]:0,ie=Z?v[1]:0,ce=Z?v[2]:0;let oe;$==="Luminosity"?oe=K:oe=V;const me=Math.min(z,Math.ceil(1048576/O));for(let be=0;be<z;be+=me){const Ae=Math.min(me,z-be),Ee=q.getImageData(k-j,be+(D-G),O,Ae),Fe=R.getImageData(k,be+D,O,Ae);Z&&M(Ee.data,re,ie,ce),oe(Ee.data,Fe.data,x),R.putImageData(Fe,k,be+D)}}function X(q,R,O,z){const $=z[0],v=z[1],x=z[2]-$,k=z[3]-v;x===0||k===0||(Y(R.context,O,x,k,R.subtype,R.backdrop,R.transferMap,$,v,R.offsetX,R.offsetY),q.save(),q.globalAlpha=1,q.globalCompositeOperation="source-over",q.setTransform(1,0,0,1,0,0),q.drawImage(O.canvas,0,0),q.restore())}function H(q,R){const O=a.Util.singularValueDecompose2dScale(q);O[0]=Math.fround(O[0]),O[1]=Math.fround(O[1]);const z=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return R!==void 0?R:O[0]<=z||O[1]<=z}const W=["butt","round","square"],B=["miter","round","bevel"],N={},J={};var le=new WeakSet;class ye{constructor(R,O,z,$,v,x,k,D){p(this,le),this.ctx=R,this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=O,this.objs=z,this.canvasFactory=$,this.imageLayer=v,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=x,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=k,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(D==null?void 0:D.background)||null,this.foregroundColor=(D==null?void 0:D.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(R){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof R=="string"?R.startsWith("g_")?this.commonObjs.get(R):this.objs.get(R):O}beginDrawing(R){let{transform:O,viewport:z,transparency:$=!1,background:v=null}=R;const x=this.ctx.canvas.width,k=this.ctx.canvas.height,D=v||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const j=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const G=this.backgroundColor=this.ctx.fillStyle;let Z=!0,re=D;if(this.ctx.fillStyle=D,re=this.ctx.fillStyle,Z=typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re),j==="#000000"&&G==="#ffffff"||j===G||!Z)this.foregroundColor=this.backgroundColor=null;else{const[ie,ce,oe]=(0,n.getRGB)(re),ue=be=>(be/=255,be<=.03928?be/12.92:((be+.055)/1.055)**2.4),me=Math.round(.2126*ue(ie)+.7152*ue(ce)+.0722*ue(oe));this.selectColor=(be,Ae,Ee)=>{const Fe=.2126*ue(be)+.7152*ue(Ae)+.0722*ue(Ee);return Math.round(Fe)===me?G:j}}}if(this.ctx.fillStyle=this.backgroundColor||D,this.ctx.fillRect(0,0,x,k),this.ctx.restore(),$){const j=this.cachedCanvases.getCanvas("transparent",x,k);this.compositeCtx=this.ctx,this.transparentCanvas=j.canvas,this.ctx=j.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),L(this.ctx,this.foregroundColor),O&&(this.ctx.transform(...O),this.outputScaleX=O[0],this.outputScaleY=O[0]),this.ctx.transform(...z.transform),this.viewportScale=z.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(R,O,z,$){const v=R.argsArray,x=R.fnArray;let k=O||0;const D=v.length;if(D===k)return k;const j=D-k>S&&typeof z=="function",G=j?Date.now()+I:0;let Z=0;const re=this.commonObjs,ie=this.objs;let ce;for(;;){if($!==void 0&&k===$.nextBreakPoint)return $.breakIt(k,z),k;if(ce=x[k],ce!==a.OPS.dependency)this[ce].apply(this,v[k]);else for(const oe of v[k]){const ue=oe.startsWith("g_")?re:ie;if(!ue.has(oe))return ue.get(oe,z),k}if(k++,k===D)return k;if(j&&++Z>S){if(Date.now()>G)return z(),k;Z=0}}}endDrawing(){f(this,le,Ce).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const R of this._cachedBitmapsMap.values()){for(const O of R.values())typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement&&(O.width=O.height=0);R.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(R,O){const z=R.width,$=R.height;let v=Math.max(Math.hypot(O[0],O[1]),1),x=Math.max(Math.hypot(O[2],O[3]),1),k=z,D=$,j="prescale1",G,Z;for(;v>2&&k>1||x>2&&D>1;){let re=k,ie=D;v>2&&k>1&&(re=Math.ceil(k/2),v/=k/re),x>2&&D>1&&(ie=Math.ceil(D/2),x/=D/ie),G=this.cachedCanvases.getCanvas(j,re,ie),Z=G.context,Z.clearRect(0,0,re,ie),Z.drawImage(R,0,0,k,D,0,0,re,ie),R=G.canvas,k=re,D=ie,j=j==="prescale1"?"prescale2":"prescale1"}return{img:R,paintWidth:k,paintHeight:D}}_createMaskCanvas(R){const O=this.ctx,{width:z,height:$}=R,v=this.current.fillColor,x=this.current.patternFill,k=(0,n.getCurrentTransform)(O);let D,j,G,Z;if((R.bitmap||R.data)&&R.count>1){const Ye=R.bitmap||R.data.buffer,Qe=k.slice(0,4);j=JSON.stringify(x?Qe:[Qe,v]),D=this._cachedBitmapsMap.get(Ye),D||(D=new Map,this._cachedBitmapsMap.set(Ye,D));const Oe=D.get(j);if(Oe&&!x){const we=Math.round(Math.min(k[0],k[2])+k[4]),ae=Math.round(Math.min(k[1],k[3])+k[5]);return{canvas:Oe,offsetX:we,offsetY:ae}}G=Oe}G||(Z=this.cachedCanvases.getCanvas("maskCanvas",z,$),A(Z.context,R));let re=a.Util.transform(k,[1/z,0,0,-1/$,0,0]);re=a.Util.transform(re,[1,0,0,1,0,-$]);const ie=a.Util.applyTransform([0,0],re),ce=a.Util.applyTransform([z,$],re),oe=a.Util.normalizeRect([ie[0],ie[1],ce[0],ce[1]]),ue=Math.round(oe[2]-oe[0])||1,me=Math.round(oe[3]-oe[1])||1,be=this.cachedCanvases.getCanvas("fillCanvas",ue,me),Ae=be.context,Ee=Math.min(ie[0],ce[0]),Fe=Math.min(ie[1],ce[1]);Ae.translate(-Ee,-Fe),Ae.transform(...re),G||(G=this._scaleImage(Z.canvas,(0,n.getCurrentTransformInverse)(Ae)),G=G.img,D&&x&&D.set(j,G)),Ae.imageSmoothingEnabled=H((0,n.getCurrentTransform)(Ae),R.interpolate),g(Ae,G,0,0,G.width,G.height,0,0,z,$),Ae.globalCompositeOperation="source-in";const _e=a.Util.transform((0,n.getCurrentTransformInverse)(Ae),[1,0,0,1,-Ee,-Fe]);return Ae.fillStyle=x?v.getPattern(O,this,_e,s.PathType.FILL):v,Ae.fillRect(0,0,z,$),D&&!x&&(this.cachedCanvases.delete("fillCanvas"),D.set(j,be.canvas)),{canvas:be.canvas,offsetX:Math.round(Ee),offsetY:Math.round(Fe)}}setLineWidth(R){R!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=R,this.ctx.lineWidth=R}setLineCap(R){this.ctx.lineCap=W[R]}setLineJoin(R){this.ctx.lineJoin=B[R]}setMiterLimit(R){this.ctx.miterLimit=R}setDash(R,O){const z=this.ctx;z.setLineDash!==void 0&&(z.setLineDash(R),z.lineDashOffset=O)}setRenderingIntent(R){}setFlatness(R){}setGState(R){for(let O=0,z=R.length;O<z;O++){const $=R[O],v=$[0],x=$[1];switch(v){case"LW":this.setLineWidth(x);break;case"LC":this.setLineCap(x);break;case"LJ":this.setLineJoin(x);break;case"ML":this.setMiterLimit(x);break;case"D":this.setDash(x[0],x[1]);break;case"RI":this.setRenderingIntent(x);break;case"FL":this.setFlatness(x);break;case"Font":this.setFont(x[0],x[1]);break;case"CA":this.current.strokeAlpha=$[1];break;case"ca":this.current.fillAlpha=$[1],this.ctx.globalAlpha=$[1];break;case"BM":this.ctx.globalCompositeOperation=x;break;case"SMask":this.current.activeSMask=x?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=x}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const R=this.inSMaskMode;this.current.activeSMask&&!R?this.beginSMaskMode():!this.current.activeSMask&&R&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const R=this.ctx.canvas.width,O=this.ctx.canvas.height,z="smaskGroupAt"+this.groupLevel,$=this.cachedCanvases.getCanvas(z,R,O);this.suspendedCtx=this.ctx,this.ctx=$.context;const v=this.ctx;v.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),C(this.suspendedCtx,v),y(v,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(R){if(!this.current.activeSMask)return;R?(R[0]=Math.floor(R[0]),R[1]=Math.floor(R[1]),R[2]=Math.ceil(R[2]),R[3]=Math.ceil(R[3])):R=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const O=this.current.activeSMask,z=this.suspendedCtx;X(z,O,this.ctx,R),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const R=this.current;this.stateStack.push(R),this.current=R.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(R,O,z,$,v,x){this.ctx.transform(R,O,z,$,v,x),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(R,O,z){const $=this.ctx,v=this.current;let x=v.x,k=v.y,D,j;const G=(0,n.getCurrentTransform)($),Z=G[0]===0&&G[3]===0||G[1]===0&&G[2]===0,re=Z?z.slice(0):null;for(let ie=0,ce=0,oe=R.length;ie<oe;ie++)switch(R[ie]|0){case a.OPS.rectangle:x=O[ce++],k=O[ce++];const ue=O[ce++],me=O[ce++],be=x+ue,Ae=k+me;$.moveTo(x,k),ue===0||me===0?$.lineTo(be,Ae):($.lineTo(be,k),$.lineTo(be,Ae),$.lineTo(x,Ae)),Z||v.updateRectMinMax(G,[x,k,be,Ae]),$.closePath();break;case a.OPS.moveTo:x=O[ce++],k=O[ce++],$.moveTo(x,k),Z||v.updatePathMinMax(G,x,k);break;case a.OPS.lineTo:x=O[ce++],k=O[ce++],$.lineTo(x,k),Z||v.updatePathMinMax(G,x,k);break;case a.OPS.curveTo:D=x,j=k,x=O[ce+4],k=O[ce+5],$.bezierCurveTo(O[ce],O[ce+1],O[ce+2],O[ce+3],x,k),v.updateCurvePathMinMax(G,D,j,O[ce],O[ce+1],O[ce+2],O[ce+3],x,k,re),ce+=6;break;case a.OPS.curveTo2:D=x,j=k,$.bezierCurveTo(x,k,O[ce],O[ce+1],O[ce+2],O[ce+3]),v.updateCurvePathMinMax(G,D,j,x,k,O[ce],O[ce+1],O[ce+2],O[ce+3],re),x=O[ce+2],k=O[ce+3],ce+=4;break;case a.OPS.curveTo3:D=x,j=k,x=O[ce+2],k=O[ce+3],$.bezierCurveTo(O[ce],O[ce+1],x,k,x,k),v.updateCurvePathMinMax(G,D,j,O[ce],O[ce+1],x,k,x,k,re),ce+=4;break;case a.OPS.closePath:$.closePath();break}Z&&v.updateScalingPathMinMax(G,re),v.setCurrentPoint(x,k)}closePath(){this.ctx.closePath()}stroke(R){R=typeof R<"u"?R:!0;const O=this.ctx,z=this.current.strokeColor;O.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof z=="object"&&z!==null&&z!==void 0&&z.getPattern?(O.save(),O.strokeStyle=z.getPattern(O,this,(0,n.getCurrentTransformInverse)(O),s.PathType.STROKE),this.rescaleAndStroke(!1),O.restore()):this.rescaleAndStroke(!0)),R&&this.consumePath(this.current.getClippedPathBoundingBox()),O.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(R){R=typeof R<"u"?R:!0;const O=this.ctx,z=this.current.fillColor,$=this.current.patternFill;let v=!1;$&&(O.save(),O.fillStyle=z.getPattern(O,this,(0,n.getCurrentTransformInverse)(O),s.PathType.FILL),v=!0);const x=this.current.getClippedPathBoundingBox();this.contentVisible&&x!==null&&(this.pendingEOFill?(O.fill("evenodd"),this.pendingEOFill=!1):O.fill()),v&&O.restore(),R&&this.consumePath(x)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=N}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const R=this.pendingTextPaths,O=this.ctx;if(R===void 0){O.beginPath();return}O.save(),O.beginPath();for(const z of R)O.setTransform(...z.transform),O.translate(z.x,z.y),z.addToPath(O,z.fontSize);O.restore(),O.clip(),O.beginPath(),delete this.pendingTextPaths}setCharSpacing(R){this.current.charSpacing=R}setWordSpacing(R){this.current.wordSpacing=R}setHScale(R){this.current.textHScale=R/100}setLeading(R){this.current.leading=-R}setFont(R,O){const z=this.commonObjs.get(R),$=this.current;if(!z)throw new Error(`Can't find font for ${R}`);if($.fontMatrix=z.fontMatrix||a.FONT_IDENTITY_MATRIX,($.fontMatrix[0]===0||$.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+R),O<0?(O=-O,$.fontDirection=-1):$.fontDirection=1,this.current.font=z,this.current.fontSize=O,z.isType3Font)return;const v=z.loadedName||"sans-serif";let x="normal";z.black?x="900":z.bold&&(x="bold");const k=z.italic?"italic":"normal",D=`"${v}", ${z.fallbackName}`;let j=O;O<E?j=E:O>m&&(j=m),this.current.fontSizeScale=O/j,this.ctx.font=`${k} ${x} ${j}px ${D}`}setTextRenderingMode(R){this.current.textRenderingMode=R}setTextRise(R){this.current.textRise=R}moveText(R,O){this.current.x=this.current.lineX+=R,this.current.y=this.current.lineY+=O}setLeadingMoveText(R,O){this.setLeading(-O),this.moveText(R,O)}setTextMatrix(R,O,z,$,v,x){this.current.textMatrix=[R,O,z,$,v,x],this.current.textMatrixScale=Math.hypot(R,O),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(R,O,z,$){const v=this.ctx,x=this.current,k=x.font,D=x.textRenderingMode,j=x.fontSize/x.fontSizeScale,G=D&a.TextRenderingMode.FILL_STROKE_MASK,Z=!!(D&a.TextRenderingMode.ADD_TO_PATH_FLAG),re=x.patternFill&&!k.missingFile;let ie;(k.disableFontFace||Z||re)&&(ie=k.getPathGenerator(this.commonObjs,R)),k.disableFontFace||re?(v.save(),v.translate(O,z),v.beginPath(),ie(v,j),$&&v.setTransform(...$),(G===a.TextRenderingMode.FILL||G===a.TextRenderingMode.FILL_STROKE)&&v.fill(),(G===a.TextRenderingMode.STROKE||G===a.TextRenderingMode.FILL_STROKE)&&v.stroke(),v.restore()):((G===a.TextRenderingMode.FILL||G===a.TextRenderingMode.FILL_STROKE)&&v.fillText(R,O,z),(G===a.TextRenderingMode.STROKE||G===a.TextRenderingMode.FILL_STROKE)&&v.strokeText(R,O,z)),Z&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(v),x:O,y:z,fontSize:j,addToPath:ie})}get isFontSubpixelAAEnabled(){const{context:R}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);R.scale(1.5,1),R.fillText("I",0,10);const O=R.getImageData(0,0,10,10).data;let z=!1;for(let $=3;$<O.length;$+=4)if(O[$]>0&&O[$]<255){z=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",z)}showText(R){const O=this.current,z=O.font;if(z.isType3Font)return this.showType3Text(R);const $=O.fontSize;if($===0)return;const v=this.ctx,x=O.fontSizeScale,k=O.charSpacing,D=O.wordSpacing,j=O.fontDirection,G=O.textHScale*j,Z=R.length,re=z.vertical,ie=re?1:-1,ce=z.defaultVMetrics,oe=$*O.fontMatrix[0],ue=O.textRenderingMode===a.TextRenderingMode.FILL&&!z.disableFontFace&&!O.patternFill;v.save(),v.transform(...O.textMatrix),v.translate(O.x,O.y+O.textRise),j>0?v.scale(G,-1):v.scale(G,1);let me;if(O.patternFill){v.save();const _e=O.fillColor.getPattern(v,this,(0,n.getCurrentTransformInverse)(v),s.PathType.FILL);me=(0,n.getCurrentTransform)(v),v.restore(),v.fillStyle=_e}let be=O.lineWidth;const Ae=O.textMatrixScale;if(Ae===0||be===0){const _e=O.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(_e===a.TextRenderingMode.STROKE||_e===a.TextRenderingMode.FILL_STROKE)&&(be=this.getSinglePixelWidth())}else be/=Ae;x!==1&&(v.scale(x,x),be/=x),v.lineWidth=be;let Ee=0,Fe;for(Fe=0;Fe<Z;++Fe){const _e=R[Fe];if(typeof _e=="number"){Ee+=ie*_e*$/1e3;continue}let Ye=!1;const Qe=(_e.isSpace?D:0)+k,Oe=_e.fontChar,we=_e.accent;let ae,ve,Me=_e.width;if(re){const ge=_e.vmetric||ce,Te=-(_e.vmetric?ge[1]:Me*.5)*oe,Le=ge[2]*oe;Me=ge?-ge[0]:Me,ae=Te/x,ve=(Ee+Le)/x}else ae=Ee/x,ve=0;if(z.remeasure&&Me>0){const ge=v.measureText(Oe).width*1e3/$*x;if(Me<ge&&this.isFontSubpixelAAEnabled){const Te=Me/ge;Ye=!0,v.save(),v.scale(Te,1),ae/=Te}else Me!==ge&&(ae+=(Me-ge)/2e3*$/x)}if(this.contentVisible&&(_e.isInFont||z.missingFile)){if(ue&&!we)v.fillText(Oe,ae,ve);else if(this.paintChar(Oe,ae,ve,me),we){const ge=ae+$*we.offset.x/x,Te=ve-$*we.offset.y/x;this.paintChar(we.fontChar,ge,Te,me)}}let Xe;re?Xe=Me*oe-Qe*j:Xe=Me*oe+Qe*j,Ee+=Xe,Ye&&v.restore()}re?O.y-=Ee:O.x+=Ee*G,v.restore(),this.compose()}showType3Text(R){const O=this.ctx,z=this.current,$=z.font,v=z.fontSize,x=z.fontDirection,k=$.vertical?1:-1,D=z.charSpacing,j=z.wordSpacing,G=z.textHScale*x,Z=z.fontMatrix||a.FONT_IDENTITY_MATRIX,re=R.length,ie=z.textRenderingMode===a.TextRenderingMode.INVISIBLE;let ce,oe,ue,me;if(!(ie||v===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,O.save(),O.transform(...z.textMatrix),O.translate(z.x,z.y),O.scale(G,x),ce=0;ce<re;++ce){if(oe=R[ce],typeof oe=="number"){me=k*oe*v/1e3,this.ctx.translate(me,0),z.x+=me*G;continue}const be=(oe.isSpace?j:0)+D,Ae=$.charProcOperatorList[oe.operatorListId];if(!Ae){(0,a.warn)(`Type3 character "${oe.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=oe,this.save(),O.scale(v,v),O.transform(...Z),this.executeOperatorList(Ae),this.restore()),ue=a.Util.applyTransform([oe.width,0],Z)[0]*v+be,O.translate(ue,0),z.x+=ue*G}O.restore(),this.processingType3=null}}setCharWidth(R,O){}setCharWidthAndBounds(R,O,z,$,v,x){this.ctx.rect(z,$,v-z,x-$),this.ctx.clip(),this.endPath()}getColorN_Pattern(R){let O;if(R[0]==="TilingPattern"){const z=R[1],$=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),v={createCanvasGraphics:x=>new ye(x,this.commonObjs,this.objs,this.canvasFactory)};O=new s.TilingPattern(R,z,this.ctx,v,$)}else O=this._getPattern(R[1],R[2]);return O}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(R,O,z){var $;const v=(($=this.selectColor)===null||$===void 0?void 0:$.call(this,R,O,z))||a.Util.makeHexColor(R,O,z);this.ctx.strokeStyle=v,this.current.strokeColor=v}setFillRGBColor(R,O,z){var $;const v=(($=this.selectColor)===null||$===void 0?void 0:$.call(this,R,O,z))||a.Util.makeHexColor(R,O,z);this.ctx.fillStyle=v,this.current.fillColor=v,this.current.patternFill=!1}_getPattern(R){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,z;return this.cachedPatterns.has(R)?z=this.cachedPatterns.get(R):(z=(0,s.getShadingPattern)(this.objs.get(R)),this.cachedPatterns.set(R,z)),O&&(z.matrix=O),z}shadingFill(R){if(!this.contentVisible)return;const O=this.ctx;this.save();const z=this._getPattern(R);O.fillStyle=z.getPattern(O,this,(0,n.getCurrentTransformInverse)(O),s.PathType.SHADING);const $=(0,n.getCurrentTransformInverse)(O);if($){const v=O.canvas,x=v.width,k=v.height,D=a.Util.applyTransform([0,0],$),j=a.Util.applyTransform([0,k],$),G=a.Util.applyTransform([x,0],$),Z=a.Util.applyTransform([x,k],$),re=Math.min(D[0],j[0],G[0],Z[0]),ie=Math.min(D[1],j[1],G[1],Z[1]),ce=Math.max(D[0],j[0],G[0],Z[0]),oe=Math.max(D[1],j[1],G[1],Z[1]);this.ctx.fillRect(re,ie,ce-re,oe-ie)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(R,O){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(R)&&R.length===6&&this.transform(...R),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),O)){const z=O[2]-O[0],$=O[3]-O[1];this.ctx.rect(O[0],O[1],z,$),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),O),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(R){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const O=this.ctx;R.isolated||(0,a.info)("TODO: Support non-isolated groups."),R.knockout&&(0,a.warn)("Knockout groups not supported.");const z=(0,n.getCurrentTransform)(O);if(R.matrix&&O.transform(...R.matrix),!R.bbox)throw new Error("Bounding box is required.");let $=a.Util.getAxialAlignedBoundingBox(R.bbox,(0,n.getCurrentTransform)(O));const v=[0,0,O.canvas.width,O.canvas.height];$=a.Util.intersect($,v)||[0,0,0,0];const x=Math.floor($[0]),k=Math.floor($[1]);let D=Math.max(Math.ceil($[2])-x,1),j=Math.max(Math.ceil($[3])-k,1),G=1,Z=1;D>w&&(G=D/w,D=w),j>w&&(Z=j/w,j=w),this.current.startNewPathAndClipBox([0,0,D,j]);let re="groupAt"+this.groupLevel;R.smask&&(re+="_smask_"+this.smaskCounter++%2);const ie=this.cachedCanvases.getCanvas(re,D,j),ce=ie.context;ce.scale(1/G,1/Z),ce.translate(-x,-k),ce.transform(...z),R.smask?this.smaskStack.push({canvas:ie.canvas,context:ce,offsetX:x,offsetY:k,scaleX:G,scaleY:Z,subtype:R.smask.subtype,backdrop:R.smask.backdrop,transferMap:R.smask.transferMap||null,startTransformInverse:null}):(O.setTransform(1,0,0,1,0,0),O.translate(x,k),O.scale(G,Z),O.save()),C(O,ce),this.ctx=ce,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(O),this.groupLevel++}endGroup(R){if(!this.contentVisible)return;this.groupLevel--;const O=this.ctx,z=this.groupStack.pop();if(this.ctx=z,this.ctx.imageSmoothingEnabled=!1,R.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const $=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...$);const v=a.Util.getAxialAlignedBoundingBox([0,0,O.canvas.width,O.canvas.height],$);this.ctx.drawImage(O.canvas,0,0),this.ctx.restore(),this.compose(v)}}beginAnnotation(R,O,z,$,v){if(f(this,le,Ce).call(this),L(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(O)&&O.length===4){const x=O[2]-O[0],k=O[3]-O[1];if(v&&this.annotationCanvasMap){z=z.slice(),z[4]-=O[0],z[5]-=O[1],O=O.slice(),O[0]=O[1]=0,O[2]=x,O[3]=k;const[D,j]=a.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:G}=this,Z=Math.ceil(x*this.outputScaleX*G),re=Math.ceil(k*this.outputScaleY*G);this.annotationCanvas=this.canvasFactory.create(Z,re);const{canvas:ie,context:ce}=this.annotationCanvas;this.annotationCanvasMap.set(R,ie),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ce,this.ctx.setTransform(D,0,0,-j,0,k*j),L(this.ctx,this.foregroundColor)}else L(this.ctx,this.foregroundColor),this.ctx.rect(O[0],O[1],x,k),this.ctx.clip(),this.endPath()}this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...z),this.transform(...$)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(R){if(!this.contentVisible)return;const O=R.count;R=this.getObject(R.data,R),R.count=O;const z=this.ctx,$=this.processingType3;if($&&($.compiled===void 0&&($.compiled=l(R)),$.compiled)){$.compiled(z);return}const v=this._createMaskCanvas(R),x=v.canvas;z.save(),z.setTransform(1,0,0,1,0,0),z.drawImage(x,v.offsetX,v.offsetY),z.restore(),this.compose()}paintImageMaskXObjectRepeat(R,O){let z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,$=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,v=arguments.length>4?arguments[4]:void 0,x=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;R=this.getObject(R.data,R);const k=this.ctx;k.save();const D=(0,n.getCurrentTransform)(k);k.transform(O,z,$,v,0,0);const j=this._createMaskCanvas(R);k.setTransform(1,0,0,1,0,0);for(let G=0,Z=x.length;G<Z;G+=2){const re=a.Util.transform(D,[O,z,$,v,x[G],x[G+1]]),[ie,ce]=a.Util.applyTransform([0,0],re);k.drawImage(j.canvas,ie,ce)}k.restore(),this.compose()}paintImageMaskXObjectGroup(R){if(!this.contentVisible)return;const O=this.ctx,z=this.current.fillColor,$=this.current.patternFill;for(const v of R){const{data:x,width:k,height:D,transform:j}=v,G=this.cachedCanvases.getCanvas("maskCanvas",k,D),Z=G.context;Z.save();const re=this.getObject(x,v);A(Z,re),Z.globalCompositeOperation="source-in",Z.fillStyle=$?z.getPattern(Z,this,(0,n.getCurrentTransformInverse)(O),s.PathType.FILL):z,Z.fillRect(0,0,k,D),Z.restore(),O.save(),O.transform(...j),O.scale(1,-1),g(O,G.canvas,0,0,k,D,0,-1,1,1),O.restore()}this.compose()}paintImageXObject(R){if(!this.contentVisible)return;const O=this.getObject(R);if(!O){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(O)}paintImageXObjectRepeat(R,O,z,$){if(!this.contentVisible)return;const v=this.getObject(R);if(!v){(0,a.warn)("Dependent image isn't ready yet");return}const x=v.width,k=v.height,D=[];for(let j=0,G=$.length;j<G;j+=2)D.push({transform:[O,0,0,z,$[j],$[j+1]],x:0,y:0,w:x,h:k});this.paintInlineImageXObjectGroup(v,D)}paintInlineImageXObject(R){if(!this.contentVisible)return;const O=R.width,z=R.height,$=this.ctx;this.save(),$.scale(1/O,-1/z);let v;if(typeof HTMLElement=="function"&&R instanceof HTMLElement||!R.data)v=R;else{const j=this.cachedCanvases.getCanvas("inlineImage",O,z),G=j.context;_(G,R,this.current.transferMaps),v=j.canvas}const x=this._scaleImage(v,(0,n.getCurrentTransformInverse)($));$.imageSmoothingEnabled=H((0,n.getCurrentTransform)($),R.interpolate);const[k,D]=g($,x.img,0,0,x.paintWidth,x.paintHeight,0,-z,O,z);if(this.imageLayer){const[j,G]=a.Util.applyTransform([0,-z],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:R,left:j,top:G,width:k,height:D})}this.compose(),this.restore()}paintInlineImageXObjectGroup(R,O){if(!this.contentVisible)return;const z=this.ctx,$=R.width,v=R.height,x=this.cachedCanvases.getCanvas("inlineImage",$,v),k=x.context;_(k,R,this.current.transferMaps);for(const D of O){if(z.save(),z.transform(...D.transform),z.scale(1,-1),g(z,x.canvas,D.x,D.y,D.w,D.h,0,-1,1,1),this.imageLayer){const[j,G]=a.Util.applyTransform([D.x,D.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:R,left:j,top:G,width:$,height:v})}z.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(R){}markPointProps(R,O){}beginMarkedContent(R){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(R,O){R==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(O)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(R){const O=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(R);const z=this.ctx;this.pendingClip&&(O||(this.pendingClip===J?z.clip("evenodd"):z.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),z.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const R=(0,n.getCurrentTransform)(this.ctx);if(R[1]===0&&R[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(R[0]),Math.abs(R[3]));else{const O=Math.abs(R[0]*R[3]-R[2]*R[1]),z=Math.hypot(R[0],R[2]),$=Math.hypot(R[1],R[3]);this._cachedGetSinglePixelWidth=Math.max(z,$)/O}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:R}=this.current,O=(0,n.getCurrentTransform)(this.ctx);let z,$;if(O[1]===0&&O[2]===0){const v=Math.abs(O[0]),x=Math.abs(O[3]);if(R===0)z=1/v,$=1/x;else{const k=v*R,D=x*R;z=k<1?1/k:1,$=D<1?1/D:1}}else{const v=Math.abs(O[0]*O[3]-O[2]*O[1]),x=Math.hypot(O[0],O[1]),k=Math.hypot(O[2],O[3]);if(R===0)z=k/v,$=x/v;else{const D=R*v;z=k>D?k/D:1,$=x>D?x/D:1}}this._cachedScaleForStroking=[z,$]}return this._cachedScaleForStroking}rescaleAndStroke(R){const{ctx:O}=this,{lineWidth:z}=this.current,[$,v]=this.getScaleForStroking();if(O.lineWidth=z||1,$===1&&v===1){O.stroke();return}let x,k,D;R&&(x=(0,n.getCurrentTransform)(O),k=O.getLineDash().slice(),D=O.lineDashOffset),O.scale($,v);const j=Math.max($,v);O.setLineDash(O.getLineDash().map(G=>G/j)),O.lineDashOffset/=j,O.stroke(),R&&(O.setTransform(...x),O.setLineDash(k),O.lineDashOffset=D)}isContentVisible(){for(let R=this.markedContentStack.length-1;R>=0;R--)if(!this.markedContentStack[R].visible)return!1;return!0}}e.CanvasGraphics=ye;function Ce(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(const q in a.OPS)ye.prototype[q]!==void 0&&(ye.prototype[a.OPS[q]]=ye.prototype[q])},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=I;var n=t(1),a=t(133),s=t(3);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=o;function u(F,y){if(!y||s.isNodeJS)return;const b=y[2]-y[0],g=y[3]-y[1],l=new Path2D;l.rect(y[0],y[1],b,g),F.clip(l)}class p{constructor(){this.constructor===p&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class h extends p{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let b;this._type==="axial"?b=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(b=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const g of this._colorStops)b.addColorStop(g[0],g[1]);return b}getPattern(y,b,g,l){let d;if(l===o.STROKE||l===o.FILL){const _=b.current.getClippedPathBoundingBox(l,(0,a.getCurrentTransform)(y))||[0,0,0,0],A=Math.ceil(_[2]-_[0])||1,C=Math.ceil(_[3]-_[1])||1,L=b.cachedCanvases.getCanvas("pattern",A,C,!0),M=L.context;M.clearRect(0,0,M.canvas.width,M.canvas.height),M.beginPath(),M.rect(0,0,M.canvas.width,M.canvas.height),M.translate(-_[0],-_[1]),g=n.Util.transform(g,[1,0,0,1,_[0],_[1]]),M.transform(...b.baseTransform),this.matrix&&M.transform(...this.matrix),u(M,this._bbox),M.fillStyle=this._createGradient(M),M.fill(),d=y.createPattern(L.canvas,"no-repeat");const V=new DOMMatrix(g);try{d.setTransform(V)}catch(K){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${K==null?void 0:K.message}".`)}}else u(y,this._bbox),d=this._createGradient(y);return d}}function f(F,y,b,g,l,d,_,A){const C=y.coords,L=y.colors,M=F.data,V=F.width*4;let K;C[b+1]>C[g+1]&&(K=b,b=g,g=K,K=d,d=_,_=K),C[g+1]>C[l+1]&&(K=g,g=l,l=K,K=_,_=A,A=K),C[b+1]>C[g+1]&&(K=b,b=g,g=K,K=d,d=_,_=K);const Y=(C[b]+y.offsetX)*y.scaleX,X=(C[b+1]+y.offsetY)*y.scaleY,H=(C[g]+y.offsetX)*y.scaleX,W=(C[g+1]+y.offsetY)*y.scaleY,B=(C[l]+y.offsetX)*y.scaleX,N=(C[l+1]+y.offsetY)*y.scaleY;if(X>=N)return;const J=L[d],le=L[d+1],ye=L[d+2],Ce=L[_],q=L[_+1],R=L[_+2],O=L[A],z=L[A+1],$=L[A+2],v=Math.round(X),x=Math.round(N);let k,D,j,G,Z,re,ie,ce;for(let oe=v;oe<=x;oe++){if(oe<W){let Ee;oe<X?Ee=0:Ee=(X-oe)/(X-W),k=Y-(Y-H)*Ee,D=J-(J-Ce)*Ee,j=le-(le-q)*Ee,G=ye-(ye-R)*Ee}else{let Ee;oe>N?Ee=1:W===N?Ee=0:Ee=(W-oe)/(W-N),k=H-(H-B)*Ee,D=Ce-(Ce-O)*Ee,j=q-(q-z)*Ee,G=R-(R-$)*Ee}let ue;oe<X?ue=0:oe>N?ue=1:ue=(X-oe)/(X-N),Z=Y-(Y-B)*ue,re=J-(J-O)*ue,ie=le-(le-z)*ue,ce=ye-(ye-$)*ue;const me=Math.round(Math.min(k,Z)),be=Math.round(Math.max(k,Z));let Ae=V*oe+me*4;for(let Ee=me;Ee<=be;Ee++)ue=(k-Ee)/(k-Z),ue<0?ue=0:ue>1&&(ue=1),M[Ae++]=D-(D-re)*ue|0,M[Ae++]=j-(j-ie)*ue|0,M[Ae++]=G-(G-ce)*ue|0,M[Ae++]=255}}function E(F,y,b){const g=y.coords,l=y.colors;let d,_;switch(y.type){case"lattice":const A=y.verticesPerRow,C=Math.floor(g.length/A)-1,L=A-1;for(d=0;d<C;d++){let M=d*A;for(let V=0;V<L;V++,M++)f(F,b,g[M],g[M+1],g[M+A],l[M],l[M+1],l[M+A]),f(F,b,g[M+A+1],g[M+1],g[M+A],l[M+A+1],l[M+1],l[M+A])}break;case"triangles":for(d=0,_=g.length;d<_;d+=3)f(F,b,g[d],g[d+1],g[d+2],l[d],l[d+1],l[d+2]);break;default:throw new Error("illegal figure")}}class m extends p{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,b,g){const A=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),L=Math.ceil(this._bounds[2])-A,M=Math.ceil(this._bounds[3])-C,V=Math.min(Math.ceil(Math.abs(L*y[0]*1.1)),3e3),K=Math.min(Math.ceil(Math.abs(M*y[1]*1.1)),3e3),Y=L/V,X=M/K,H={coords:this._coords,colors:this._colors,offsetX:-A,offsetY:-C,scaleX:1/Y,scaleY:1/X},W=V+2*2,B=K+2*2,N=g.getCanvas("mesh",W,B,!1),J=N.context,le=J.createImageData(V,K);if(b){const Ce=le.data;for(let q=0,R=Ce.length;q<R;q+=4)Ce[q]=b[0],Ce[q+1]=b[1],Ce[q+2]=b[2],Ce[q+3]=255}for(const Ce of this._figures)E(le,Ce,H);return J.putImageData(le,2,2),{canvas:N.canvas,offsetX:A-2*Y,offsetY:C-2*X,scaleX:Y,scaleY:X}}getPattern(y,b,g,l){u(y,this._bbox);let d;if(l===o.SHADING)d=n.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(y));else if(d=n.Util.singularValueDecompose2dScale(b.baseTransform),this.matrix){const A=n.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*A[0],d[1]*A[1]]}const _=this._createMeshCanvas(d,l===o.SHADING?null:this._background,b.cachedCanvases);return l!==o.SHADING&&(y.setTransform(...b.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(_.offsetX,_.offsetY),y.scale(_.scaleX,_.scaleY),y.createPattern(_.canvas,"no-repeat")}}class w extends p{getPattern(){return"hotpink"}}function I(F){switch(F[0]){case"RadialAxial":return new h(F);case"Mesh":return new m(F);case"Dummy":return new w}throw new Error(`Unknown IR type: ${F[0]}`)}const S={COLORED:1,UNCOLORED:2};class T{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(y,b,g,l,d){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=b,this.ctx=g,this.canvasGraphicsFactory=l,this.baseTransform=d}createPatternCanvas(y){const b=this.operatorList,g=this.bbox,l=this.xstep,d=this.ystep,_=this.paintType,A=this.tilingType,C=this.color,L=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+A);const M=g[0],V=g[1],K=g[2],Y=g[3],X=n.Util.singularValueDecompose2dScale(this.matrix),H=n.Util.singularValueDecompose2dScale(this.baseTransform),W=[X[0]*H[0],X[1]*H[1]],B=this.getSizeAndScale(l,this.ctx.canvas.width,W[0]),N=this.getSizeAndScale(d,this.ctx.canvas.height,W[1]),J=y.cachedCanvases.getCanvas("pattern",B.size,N.size,!0),le=J.context,ye=L.createCanvasGraphics(le);ye.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(ye,_,C);let Ce=M,q=V,R=K,O=Y;return M<0&&(Ce=0,R+=Math.abs(M)),V<0&&(q=0,O+=Math.abs(V)),le.translate(-(B.scale*Ce),-(N.scale*q)),ye.transform(B.scale,0,0,N.scale,0,0),le.save(),this.clipBbox(ye,Ce,q,R,O),ye.baseTransform=(0,a.getCurrentTransform)(ye.ctx),ye.executeOperatorList(b),ye.endDrawing(),{canvas:J.canvas,scaleX:B.scale,scaleY:N.scale,offsetX:Ce,offsetY:q}}getSizeAndScale(y,b,g){y=Math.abs(y);const l=Math.max(T.MAX_PATTERN_SIZE,b);let d=Math.ceil(y*g);return d>=l?d=l:g=d/y,{scale:g,size:d}}clipBbox(y,b,g,l,d){const _=l-b,A=d-g;y.ctx.rect(b,g,_,A),y.current.updateRectMinMax((0,a.getCurrentTransform)(y.ctx),[b,g,l,d]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,b,g){const l=y.ctx,d=y.current;switch(b){case S.COLORED:const _=this.ctx;l.fillStyle=_.fillStyle,l.strokeStyle=_.strokeStyle,d.fillColor=_.fillStyle,d.strokeColor=_.strokeStyle;break;case S.UNCOLORED:const A=n.Util.makeHexColor(g[0],g[1],g[2]);l.fillStyle=A,l.strokeStyle=A,d.fillColor=A,d.strokeColor=A;break;default:throw new n.FormatError(`Unsupported paint type: ${b}`)}}getPattern(y,b,g,l){let d=g;l!==o.SHADING&&(d=n.Util.transform(d,b.baseTransform),this.matrix&&(d=n.Util.transform(d,this.matrix)));const _=this.createPatternCanvas(b);let A=new DOMMatrix(d);A=A.translate(_.offsetX,_.offsetY),A=A.scale(1/_.scaleX,1/_.scaleY);const C=y.createPattern(_.canvas,"repeat");try{C.setTransform(A)}catch(L){(0,n.warn)(`TilingPattern.getPattern: "${L==null?void 0:L.message}".`)}return C}}e.TilingPattern=T},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=a;var n=t(1);function a(s){let{src:o,srcPos:u=0,dest:p,destPos:h=0,width:f,height:E,inverseDecode:m=!1}=s;const w=n.FeatureTest.isLittleEndian?4278190080:255,[I,S]=m?[0,w]:[w,0],T=f>>3,F=f&7,y=o.length;p=new Uint32Array(p.buffer);for(let b=0;b<E;b++){for(const l=u+T;u<l;u++){const d=u<y?o[u]:255;p[h++]=d&128?S:I,p[h++]=d&64?S:I,p[h++]=d&32?S:I,p[h++]=d&16?S:I,p[h++]=d&8?S:I,p[h++]=d&4?S:I,p[h++]=d&2?S:I,p[h++]=d&1?S:I}if(F===0)continue;const g=u<y?o[u++]:255;for(let l=0;l<F;l++)p[h++]=g&1<<7-l?S:I}return{srcPos:u,destPos:h}}},(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const t=Object.create(null);e.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=t(1);const a={DATA:1,ERROR:2},s={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(p){switch(p instanceof Error||typeof p=="object"&&p!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new n.AbortException(p.message);case"MissingPDFException":return new n.MissingPDFException(p.message);case"PasswordException":return new n.PasswordException(p.message,p.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(p.message,p.status);case"UnknownErrorException":return new n.UnknownErrorException(p.message,p.details);default:return new n.UnknownErrorException(p.message,p.toString())}}class u{constructor(h,f,E){this.sourceName=h,this.targetName=f,this.comObj=E,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=m=>{const w=m.data;if(w.targetName!==this.sourceName)return;if(w.stream){this._processStreamMessage(w);return}if(w.callback){const S=w.callbackId,T=this.callbackCapabilities[S];if(!T)throw new Error(`Cannot resolve callback ${S}`);if(delete this.callbackCapabilities[S],w.callback===a.DATA)T.resolve(w.data);else if(w.callback===a.ERROR)T.reject(o(w.reason));else throw new Error("Unexpected callback case");return}const I=this.actionHandler[w.action];if(!I)throw new Error(`Unknown action from worker: ${w.action}`);if(w.callbackId){const S=this.sourceName,T=w.sourceName;new Promise(function(F){F(I(w.data))}).then(function(F){E.postMessage({sourceName:S,targetName:T,callback:a.DATA,callbackId:w.callbackId,data:F})},function(F){E.postMessage({sourceName:S,targetName:T,callback:a.ERROR,callbackId:w.callbackId,reason:o(F)})});return}if(w.streamId){this._createStreamSink(w);return}I(w.data)},E.addEventListener("message",this._onComObjOnMessage)}on(h,f){const E=this.actionHandler;if(E[h])throw new Error(`There is already an actionName called "${h}"`);E[h]=f}send(h,f,E){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:f},E)}sendWithPromise(h,f,E){const m=this.callbackId++,w=(0,n.createPromiseCapability)();this.callbackCapabilities[m]=w;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:m,data:f},E)}catch(I){w.reject(I)}return w.promise}sendWithStream(h,f,E,m){const w=this.streamId++,I=this.sourceName,S=this.targetName,T=this.comObj;return new ReadableStream({start:F=>{const y=(0,n.createPromiseCapability)();return this.streamControllers[w]={controller:F,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},T.postMessage({sourceName:I,targetName:S,action:h,streamId:w,data:f,desiredSize:F.desiredSize},m),y.promise},pull:F=>{const y=(0,n.createPromiseCapability)();return this.streamControllers[w].pullCall=y,T.postMessage({sourceName:I,targetName:S,stream:s.PULL,streamId:w,desiredSize:F.desiredSize}),y.promise},cancel:F=>{(0,n.assert)(F instanceof Error,"cancel must have a valid reason");const y=(0,n.createPromiseCapability)();return this.streamControllers[w].cancelCall=y,this.streamControllers[w].isClosed=!0,T.postMessage({sourceName:I,targetName:S,stream:s.CANCEL,streamId:w,reason:o(F)}),y.promise}},E)}_createStreamSink(h){const f=h.streamId,E=this.sourceName,m=h.sourceName,w=this.comObj,I=this,S=this.actionHandler[h.action],T={enqueue(F){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,b=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=y,g>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),w.postMessage({sourceName:E,targetName:m,stream:s.ENQUEUE,streamId:f,chunk:F},b)},close(){this.isCancelled||(this.isCancelled=!0,w.postMessage({sourceName:E,targetName:m,stream:s.CLOSE,streamId:f}),delete I.streamSinks[f])},error(F){(0,n.assert)(F instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,w.postMessage({sourceName:E,targetName:m,stream:s.ERROR,streamId:f,reason:o(F)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};T.sinkCapability.resolve(),T.ready=T.sinkCapability.promise,this.streamSinks[f]=T,new Promise(function(F){F(S(h.data,T))}).then(function(){w.postMessage({sourceName:E,targetName:m,stream:s.START_COMPLETE,streamId:f,success:!0})},function(F){w.postMessage({sourceName:E,targetName:m,stream:s.START_COMPLETE,streamId:f,reason:o(F)})})}_processStreamMessage(h){const f=h.streamId,E=this.sourceName,m=h.sourceName,w=this.comObj,I=this.streamControllers[f],S=this.streamSinks[f];switch(h.stream){case s.START_COMPLETE:h.success?I.startCall.resolve():I.startCall.reject(o(h.reason));break;case s.PULL_COMPLETE:h.success?I.pullCall.resolve():I.pullCall.reject(o(h.reason));break;case s.PULL:if(!S){w.postMessage({sourceName:E,targetName:m,stream:s.PULL_COMPLETE,streamId:f,success:!0});break}S.desiredSize<=0&&h.desiredSize>0&&S.sinkCapability.resolve(),S.desiredSize=h.desiredSize,new Promise(function(T){T(S.onPull&&S.onPull())}).then(function(){w.postMessage({sourceName:E,targetName:m,stream:s.PULL_COMPLETE,streamId:f,success:!0})},function(T){w.postMessage({sourceName:E,targetName:m,stream:s.PULL_COMPLETE,streamId:f,reason:o(T)})});break;case s.ENQUEUE:if((0,n.assert)(I,"enqueue should have stream controller"),I.isClosed)break;I.controller.enqueue(h.chunk);break;case s.CLOSE:if((0,n.assert)(I,"close should have stream controller"),I.isClosed)break;I.isClosed=!0,I.controller.close(),this._deleteStreamController(I,f);break;case s.ERROR:(0,n.assert)(I,"error should have stream controller"),I.controller.error(o(h.reason)),this._deleteStreamController(I,f);break;case s.CANCEL_COMPLETE:h.success?I.cancelCall.resolve():I.cancelCall.reject(o(h.reason)),this._deleteStreamController(I,f);break;case s.CANCEL:if(!S)break;new Promise(function(T){T(S.onCancel&&S.onCancel(o(h.reason)))}).then(function(){w.postMessage({sourceName:E,targetName:m,stream:s.CANCEL_COMPLETE,streamId:f,success:!0})},function(T){w.postMessage({sourceName:E,targetName:m,stream:s.CANCEL_COMPLETE,streamId:f,reason:o(T)})}),S.sinkCapability.reject(o(h.reason)),S.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(h,f){await Promise.allSettled([h.startCall&&h.startCall.promise,h.pullCall&&h.pullCall.promise,h.cancelCall&&h.cancelCall.promise]),delete this.streamControllers[f]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=u},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=t(1);function a(I,S,T){s(I,S),S.set(I,T)}function s(I,S){if(S.has(I))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(I,S){var T=h(I,S,"get");return u(I,T)}function u(I,S){return S.get?S.get.call(I):S.value}function p(I,S,T){var F=h(I,S,"set");return f(I,F,T),T}function h(I,S,T){if(!S.has(I))throw new TypeError("attempted to "+T+" private field on non-instance");return S.get(I)}function f(I,S,T){if(S.set)S.set.call(I,T);else{if(!S.writable)throw new TypeError("attempted to set read only private field");S.value=T}}var E=new WeakMap,m=new WeakMap;class w{constructor(S){let{parsedData:T,rawData:F}=S;a(this,E,{writable:!0,value:void 0}),a(this,m,{writable:!0,value:void 0}),p(this,E,T),p(this,m,F)}getRaw(){return o(this,m)}get(S){var T;return(T=o(this,E).get(S))!==null&&T!==void 0?T:null}getAll(){return(0,n.objectFromMap)(o(this,E))}has(S){return o(this,E).has(S)}}e.Metadata=w},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=t(1);function a(_,A){u(_,A),A.add(_)}function s(_,A,C){if(!A.has(_))throw new TypeError("attempted to get private field on non-instance");return C}function o(_,A,C){u(_,A),A.set(_,C)}function u(_,A){if(A.has(_))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(_,A,C){var L=E(_,A,"set");return h(_,L,C),C}function h(_,A,C){if(A.set)A.set.call(_,C);else{if(!A.writable)throw new TypeError("attempted to set read only private field");A.value=C}}function f(_,A){var C=E(_,A,"get");return m(_,C)}function E(_,A,C){if(!A.has(_))throw new TypeError("attempted to "+C+" private field on non-instance");return A.get(_)}function m(_,A){return A.get?A.get.call(_):A.value}const w=Symbol("INTERNAL");var I=new WeakMap;class S{constructor(A,C){o(this,I,{writable:!0,value:!0}),this.name=A,this.intent=C}get visible(){return f(this,I)}_setVisible(A,C){A!==w&&(0,n.unreachable)("Internal method `_setVisible` called."),p(this,I,C)}}var T=new WeakMap,F=new WeakMap,y=new WeakMap,b=new WeakMap,g=new WeakSet;class l{constructor(A){if(a(this,g),o(this,T,{writable:!0,value:!0}),o(this,F,{writable:!0,value:new Map}),o(this,y,{writable:!0,value:null}),o(this,b,{writable:!0,value:null}),this.name=null,this.creator=null,A!==null){this.name=A.name,this.creator=A.creator,p(this,b,A.order);for(const C of A.groups)f(this,F).set(C.id,new S(C.name,C.intent));if(A.baseState==="OFF")for(const C of f(this,F).values())C._setVisible(w,!1);for(const C of A.on)f(this,F).get(C)._setVisible(w,!0);for(const C of A.off)f(this,F).get(C)._setVisible(w,!1);p(this,y,new Map);for(const[C,L]of f(this,F))f(this,y).set(C,L.visible)}}isVisible(A){if(f(this,F).size===0)return!0;if(!A)return(0,n.warn)("Optional content group not defined."),!0;if(A.type==="OCG")return f(this,F).has(A.id)?f(this,F).get(A.id).visible:((0,n.warn)(`Optional content group not found: ${A.id}`),!0);if(A.type==="OCMD"){if(A.expression)return s(this,g,d).call(this,A.expression);if(!A.policy||A.policy==="AnyOn"){for(const C of A.ids){if(!f(this,F).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(f(this,F).get(C).visible)return!0}return!1}else if(A.policy==="AllOn"){for(const C of A.ids){if(!f(this,F).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!f(this,F).get(C).visible)return!1}return!0}else if(A.policy==="AnyOff"){for(const C of A.ids){if(!f(this,F).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!f(this,F).get(C).visible)return!0}return!1}else if(A.policy==="AllOff"){for(const C of A.ids){if(!f(this,F).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(f(this,F).get(C).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${A.policy}.`),!0}return(0,n.warn)(`Unknown group type ${A.type}.`),!0}setVisibility(A){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!f(this,F).has(A)){(0,n.warn)(`Optional content group not found: ${A}`);return}f(this,F).get(A)._setVisible(w,!!C),p(this,T,null)}get hasInitialVisibility(){if(f(this,T)!==null)return f(this,T);for(const[A,C]of f(this,F)){const L=f(this,y).get(A);if(C.visible!==L)return p(this,T,!1)}return p(this,T,!0)}getOrder(){return f(this,F).size?f(this,b)?f(this,b).slice():[...f(this,F).keys()]:null}getGroups(){return f(this,F).size>0?(0,n.objectFromMap)(f(this,F)):null}getGroup(A){return f(this,F).get(A)||null}}e.OptionalContentConfig=l;function d(_){const A=_.length;if(A<2)return!0;const C=_[0];for(let L=1;L<A;L++){const M=_[L];let V;if(Array.isArray(M))V=s(this,g,d).call(this,M);else if(f(this,F).has(M))V=f(this,F).get(M).visible;else return(0,n.warn)(`Optional content group not found: ${M}`),!0;switch(C){case"And":if(!V)return!1;break;case"Or":if(V)return!0;break;case"Not":return!V;default:return!0}}return C==="And"}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=t(1),a=t(133);class s{constructor(h,f){(0,n.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=h.progressiveDone||!1,this._contentDispositionFilename=h.contentDispositionFilename||null;const E=h.initialData;if((E==null?void 0:E.length)>0){const m=new Uint8Array(E).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._contentLength=h.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,w)=>{this._onReceiveData({begin:m,chunk:w})}),this._pdfDataRangeTransport.addProgressListener((m,w)=>{this._onProgress({loaded:m,total:w})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(h){const f=new Uint8Array(h.chunk).buffer;if(h.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const E=this._rangeReaders.some(function(m){return m._begin!==h.begin?!1:(m._enqueue(f),!0)});(0,n.assert)(E,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var h,f;return(h=(f=this._fullRequestReader)===null||f===void 0?void 0:f._loaded)!==null&&h!==void 0?h:0}_onProgress(h){if(h.total===void 0){const f=this._rangeReaders[0];f!=null&&f.onProgress&&f.onProgress({loaded:h.loaded})}else{const f=this._fullRequestReader;f!=null&&f.onProgress&&f.onProgress({loaded:h.loaded,total:h.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const f=this._rangeReaders.indexOf(h);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new o(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,f){if(f<=this._progressiveDataLength)return null;const E=new u(this,h,f);return this._pdfDataRangeTransport.requestDataRange(h,f),this._rangeReaders.push(E),E}cancelAllRequests(h){this._fullRequestReader&&this._fullRequestReader.cancel(h);for(const f of this._rangeReaders.slice(0))f.cancel(h);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=s;class o{constructor(h,f){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=h,this._done=E||!1,this._filename=(0,a.isPdfFile)(m)?m:null,this._queuedChunks=f||[],this._loaded=0;for(const w of this._queuedChunks)this._loaded+=w.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=(0,n.createPromiseCapability)();return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class u{constructor(h,f,E){this._stream=h,this._begin=f,this._end=E,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const h=(0,n.createPromiseCapability)();return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class t{static textContent(a){const s=[],o={items:s,styles:Object.create(null)};function u(p){var h;if(!p)return;let f=null;const E=p.name;if(E==="#text")f=p.value;else if(t.shouldBuildText(E))p!=null&&(h=p.attributes)!==null&&h!==void 0&&h.textContent?f=p.attributes.textContent:p.value&&(f=p.value);else return;if(f!==null&&s.push({str:f}),!!p.children)for(const m of p.children)u(m)}return u(a),o}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}e.XfaText=t},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=t(134);const a=function(p){return new Promise((h,f)=>{require$$7.readFile(p,(m,w)=>{if(m||!w){f(new Error(m));return}h(new Uint8Array(w))})})};class s extends n.BaseCanvasFactory{_createCanvas(h,f){return require$$7.createCanvas(h,f)}}e.NodeCanvasFactory=s;class o extends n.BaseCMapReaderFactory{_fetchData(h,f){return a(h).then(E=>({cMapData:E,compressionType:f}))}}e.NodeCMapReaderFactory=o;class u extends n.BaseStandardFontDataFactory{_fetchData(h){return a(h)}}e.NodeStandardFontDataFactory=u},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=t(132),a=t(1),s=t(148),o=t(149);function u(B,N){f(B,N),N.add(B)}function p(B,N,J){return N in B?Object.defineProperty(B,N,{value:J,enumerable:!0,configurable:!0,writable:!0}):B[N]=J,B}function h(B,N,J){f(B,N),N.set(B,J)}function f(B,N){if(N.has(B))throw new TypeError("Cannot initialize the same private elements twice on an object")}function E(B,N,J){if(!N.has(B))throw new TypeError("attempted to get private field on non-instance");return J}function m(B,N){var J=S(B,N,"get");return w(B,J)}function w(B,N){return N.get?N.get.call(B):N.value}function I(B,N,J){var le=S(B,N,"set");return T(B,le,J),J}function S(B,N,J){if(!N.has(B))throw new TypeError("attempted to "+J+" private field on non-instance");return N.get(B)}function T(B,N,J){if(N.set)N.set.call(B,J);else{if(!N.writable)throw new TypeError("attempted to set read only private field");N.value=J}}var F=new WeakMap,y=new WeakMap,b=new WeakMap,g=new WeakMap,l=new WeakMap,d=new WeakMap,_=new WeakMap,A=new WeakMap,C=new WeakSet,L=new WeakSet,M=new WeakSet,V=new WeakSet;class K{constructor(N){u(this,V),u(this,M),u(this,L),u(this,C),h(this,F,{writable:!0,value:void 0}),h(this,y,{writable:!0,value:!1}),h(this,b,{writable:!0,value:this.pointerup.bind(this)}),h(this,g,{writable:!0,value:this.pointerdown.bind(this)}),h(this,l,{writable:!0,value:new Map}),h(this,d,{writable:!0,value:!1}),h(this,_,{writable:!0,value:!1}),h(this,A,{writable:!0,value:void 0}),K._initialized||(K._initialized=!0,s.FreeTextEditor.initialize(N.l10n),o.InkEditor.initialize(N.l10n),N.uiManager.registerEditorTypes([s.FreeTextEditor,o.InkEditor])),I(this,A,N.uiManager),this.annotationStorage=N.annotationStorage,this.pageIndex=N.pageIndex,this.div=N.div,I(this,F,N.accessibilityManager),m(this,A).addLayer(this)}updateToolbar(N){m(this,A).updateToolbar(N)}updateMode(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m(this,A).getMode();E(this,V,W).call(this),N===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),m(this,A).unselectAll()}addInkEditorIfNeeded(N){if(!N&&m(this,A).getMode()!==a.AnnotationEditorType.INK)return;if(!N){for(const le of m(this,l).values())if(le.isEmpty()){le.setInBackground();return}}E(this,M,H).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(N){m(this,A).setEditingState(N)}addCommands(N){m(this,A).addCommands(N)}enable(){this.div.style.pointerEvents="auto";for(const N of m(this,l).values())N.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const N of m(this,l).values())N.disableEditing()}setActiveEditor(N){m(this,A).getActive()!==N&&m(this,A).setActiveEditor(N)}enableClick(){this.div.addEventListener("pointerdown",m(this,g)),this.div.addEventListener("pointerup",m(this,b))}disableClick(){this.div.removeEventListener("pointerdown",m(this,g)),this.div.removeEventListener("pointerup",m(this,b))}attach(N){m(this,l).set(N.id,N)}detach(N){var J;m(this,l).delete(N.id),(J=m(this,F))===null||J===void 0||J.removePointerInTextLayer(N.contentDiv)}remove(N){m(this,A).removeEditor(N),this.detach(N),this.annotationStorage.remove(N.id),N.div.style.display="none",setTimeout(()=>{N.div.style.display="",N.div.remove(),N.isAttachedToDOM=!1,document.activeElement===document.body&&m(this,A).focusMainContainer()},0),m(this,_)||this.addInkEditorIfNeeded(!1)}add(N){if(E(this,C,Y).call(this,N),m(this,A).addEditor(N),this.attach(N),!N.isAttachedToDOM){const J=N.render();this.div.append(J),N.isAttachedToDOM=!0}this.moveEditorInDOM(N),N.onceAdded(),this.addToAnnotationStorage(N)}moveEditorInDOM(N){var J;(J=m(this,F))===null||J===void 0||J.moveElementInDOM(this.div,N.div,N.contentDiv,!0)}addToAnnotationStorage(N){!N.isEmpty()&&!this.annotationStorage.has(N.id)&&this.annotationStorage.setValue(N.id,N)}addOrRebuild(N){N.needsToBeRebuilt()?N.rebuild():this.add(N)}addANewEditor(N){const J=()=>{this.addOrRebuild(N)},le=()=>{N.remove()};this.addCommands({cmd:J,undo:le,mustExec:!0})}addUndoableEditor(N){const J=()=>{this.addOrRebuild(N)},le=()=>{N.remove()};this.addCommands({cmd:J,undo:le,mustExec:!1})}getNextId(){return m(this,A).getId()}deserialize(N){switch(N.annotationType){case a.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(N,this);case a.AnnotationEditorType.INK:return o.InkEditor.deserialize(N,this)}return null}setSelected(N){m(this,A).setSelected(N)}toggleSelected(N){m(this,A).toggleSelected(N)}isSelected(N){return m(this,A).isSelected(N)}unselect(N){m(this,A).unselect(N)}pointerup(N){const J=n.KeyboardManager.platform.isMac;if(!(N.button!==0||N.ctrlKey&&J)&&N.target===this.div&&m(this,d)){if(I(this,d,!1),!m(this,y)){I(this,y,!0);return}E(this,M,H).call(this,N)}}pointerdown(N){const J=n.KeyboardManager.platform.isMac;if(N.button!==0||N.ctrlKey&&J||N.target!==this.div)return;I(this,d,!0);const le=m(this,A).getActive();I(this,y,!le||le.isEmpty())}drop(N){const J=N.dataTransfer.getData("text/plain"),le=m(this,A).getEditor(J);if(!le)return;N.preventDefault(),N.dataTransfer.dropEffect="move",E(this,C,Y).call(this,le);const ye=this.div.getBoundingClientRect(),Ce=N.clientX-ye.x,q=N.clientY-ye.y;le.translate(Ce-le.startX,q-le.startY),this.moveEditorInDOM(le),le.div.focus()}dragover(N){N.preventDefault()}destroy(){var N;((N=m(this,A).getActive())===null||N===void 0?void 0:N.parent)===this&&m(this,A).setActiveEditor(null);for(const le of m(this,l).values()){var J;(J=m(this,F))===null||J===void 0||J.removePointerInTextLayer(le.contentDiv),le.isAttachedToDOM=!1,le.div.remove(),le.parent=null}this.div=null,m(this,l).clear(),m(this,A).removeLayer(this)}render(N){this.viewport=N.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const J of m(this,A).getEditors(this.pageIndex))this.add(J);this.updateMode()}update(N){this.viewport=N.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[N,J,le,ye]=this.viewport.viewBox,Ce=le-N,q=ye-J;return[Ce,q]}get viewportBaseDimensions(){const{width:N,height:J,rotation:le}=this.viewport;return le%180===0?[N,J]:[J,N]}setDimensions(){const{width:N,height:J,rotation:le}=this.viewport,ye=le%180!==0,Ce=Math.floor(N)+"px",q=Math.floor(J)+"px";this.div.style.width=ye?q:Ce,this.div.style.height=ye?Ce:q,this.div.setAttribute("data-main-rotation",le)}}e.AnnotationEditorLayer=K;function Y(B){var N;B.parent!==this&&(this.attach(B),B.pageIndex=this.pageIndex,(N=B.parent)===null||N===void 0||N.detach(B),B.parent=this,B.div&&B.isAttachedToDOM&&(B.div.remove(),this.div.append(B.div)))}function X(B){switch(m(this,A).getMode()){case a.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(B);case a.AnnotationEditorType.INK:return new o.InkEditor(B)}return null}function H(B){const N=this.getNextId(),J=E(this,L,X).call(this,{parent:this,id:N,x:B.offsetX,y:B.offsetY});return J&&this.add(J),J}function W(){I(this,_,!0);for(const B of m(this,l).values())B.isEmpty()&&B.remove();I(this,_,!1)}p(K,"_initialized",!1)},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=t(1),a=t(132),s=t(131);function o(H,W){h(H,W),W.add(H)}function u(H,W,B){return W in H?Object.defineProperty(H,W,{value:B,enumerable:!0,configurable:!0,writable:!0}):H[W]=B,H}function p(H,W,B){h(H,W),W.set(H,B)}function h(H,W){if(W.has(H))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(H,W){var B=I(H,W,"get");return E(H,B)}function E(H,W){return W.get?W.get.call(H):W.value}function m(H,W,B){if(!W.has(H))throw new TypeError("attempted to get private field on non-instance");return B}function w(H,W,B){var N=I(H,W,"set");return S(H,N,B),B}function I(H,W,B){if(!W.has(H))throw new TypeError("attempted to "+B+" private field on non-instance");return W.get(H)}function S(H,W,B){if(W.set)W.set.call(H,B);else{if(!W.writable)throw new TypeError("attempted to set read only private field");W.value=B}}var T=new WeakMap,F=new WeakMap,y=new WeakMap,b=new WeakMap,g=new WeakMap,l=new WeakMap,d=new WeakMap,_=new WeakSet,A=new WeakSet,C=new WeakSet,L=new WeakSet;class M extends s.AnnotationEditor{constructor(W){super({...W,name:"freeTextEditor"}),o(this,L),o(this,C),o(this,A),o(this,_),p(this,T,{writable:!0,value:this.editorDivBlur.bind(this)}),p(this,F,{writable:!0,value:this.editorDivFocus.bind(this)}),p(this,y,{writable:!0,value:this.editorDivKeydown.bind(this)}),p(this,b,{writable:!0,value:void 0}),p(this,g,{writable:!0,value:""}),p(this,l,{writable:!0,value:!1}),p(this,d,{writable:!0,value:void 0}),w(this,b,W.color||M._defaultColor||s.AnnotationEditor._defaultLineColor),w(this,d,W.fontSize||M._defaultFontSize)}static initialize(W){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(N=>[N,W.get(N)]));const B=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(B.getPropertyValue("--freetext-padding"))}static updateDefaultParams(W,B){switch(W){case n.AnnotationEditorParamsType.FREETEXT_SIZE:M._defaultFontSize=B;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:M._defaultColor=B;break}}updateParams(W,B){switch(W){case n.AnnotationEditorParamsType.FREETEXT_SIZE:m(this,_,V).call(this,B);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:m(this,A,K).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,M._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,M._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,f(this,d)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,f(this,b)]]}getInitialTranslation(){return[-M._internalPadding*this.parent.scaleFactor,-(M._internalPadding+f(this,d))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",f(this,y)),this.editorDiv.addEventListener("focus",f(this,F)),this.editorDiv.addEventListener("blur",f(this,T)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",f(this,y)),this.editorDiv.removeEventListener("focus",f(this,F)),this.editorDiv.removeEventListener("blur",f(this,T)),this.div.focus(),this.isEditing=!1)}focusin(W){super.focusin(W),W.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),f(this,l)||(w(this,l,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),w(this,g,m(this,C,Y).call(this).trimEnd()),m(this,L,X).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(W){this.enableEditMode(),this.editorDiv.focus()}keydown(W){W.target===this.div&&W.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(W){M._keyboardManager.exec(this,W)}editorDivFocus(W){this.isEditing=!0}editorDivBlur(W){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let W,B;this.width&&(W=this.x,B=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),M._l10nPromise.get("editor_free_text_aria_label").then(J=>{var le;return(le=this.editorDiv)===null||le===void 0?void 0:le.setAttribute("aria-label",J)}),M._l10nPromise.get("free_text_default_content").then(J=>{var le;return(le=this.editorDiv)===null||le===void 0?void 0:le.setAttribute("default-content",J)}),this.editorDiv.contentEditable=!0;const{style:N}=this.editorDiv;if(N.fontSize=`calc(${f(this,d)}px * var(--scale-factor))`,N.color=f(this,b),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[J,le]=this.parent.viewportBaseDimensions;this.setAt(W*J,B*le,this.width*J,this.height*le);for(const ye of f(this,g).split(`
`)){const Ce=document.createElement("div");Ce.append(ye?document.createTextNode(ye):document.createElement("br")),this.editorDiv.append(Ce)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(W,B){const N=super.deserialize(W,B);return w(N,d,W.fontSize),w(N,b,n.Util.makeHexColor(...W.color)),w(N,g,W.value),N}serialize(){if(this.isEmpty())return null;const W=M._internalPadding*this.parent.scaleFactor,B=this.getRect(W,W),N=s.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:N,fontSize:f(this,d),value:f(this,g),pageIndex:this.parent.pageIndex,rect:B,rotation:this.rotation}}}e.FreeTextEditor=M;function V(H){const W=N=>{this.editorDiv.style.fontSize=`calc(${N}px * var(--scale-factor))`,this.translate(0,-(N-f(this,d))*this.parent.scaleFactor),w(this,d,N),m(this,L,X).call(this)},B=f(this,d);this.parent.addCommands({cmd:()=>{W(H)},undo:()=>{W(B)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function K(H){const W=f(this,b);this.parent.addCommands({cmd:()=>{w(this,b,H),this.editorDiv.style.color=H},undo:()=>{w(this,b,W),this.editorDiv.style.color=W},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Y(){const H=this.editorDiv.getElementsByTagName("div");if(H.length===0)return this.editorDiv.innerText;const W=[];for(let B=0,N=H.length;B<N;B++){const le=H[B].firstChild;(le==null?void 0:le.nodeName)==="#text"?W.push(le.data):W.push("")}return W.join(`
`)}function X(){const[H,W]=this.parent.viewportBaseDimensions,B=this.div.getBoundingClientRect();this.width=B.width/H,this.height=B.height/W}u(M,"_freeTextDefaultContent",""),u(M,"_l10nPromise",void 0),u(M,"_internalPadding",0),u(M,"_defaultColor",null),u(M,"_defaultFontSize",10),u(M,"_keyboardManager",new a.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],M.prototype.commitOrRemove]])),u(M,"_type","freetext")},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return s.fitCurve}});var n=t(1),a=t(131),s=t(150),o=t(132);function u(he,se){f(he,se),se.add(he)}function p(he,se,Se){return se in he?Object.defineProperty(he,se,{value:Se,enumerable:!0,configurable:!0,writable:!0}):he[se]=Se,he}function h(he,se,Se){f(he,se),se.set(he,Se)}function f(he,se){if(se.has(he))throw new TypeError("Cannot initialize the same private elements twice on an object")}function E(he,se,Se){return m(he,se),Se}function m(he,se){if(he!==se)throw new TypeError("Private static access of wrong provenance")}function w(he,se,Se){var Re=T(he,se,"set");return I(he,Re,Se),Se}function I(he,se,Se){if(se.set)se.set.call(he,Se);else{if(!se.writable)throw new TypeError("attempted to set read only private field");se.value=Se}}function S(he,se){var Se=T(he,se,"get");return F(he,Se)}function T(he,se,Se){if(!se.has(he))throw new TypeError("attempted to "+Se+" private field on non-instance");return se.get(he)}function F(he,se){return se.get?se.get.call(he):se.value}function y(he,se,Se){if(!se.has(he))throw new TypeError("attempted to get private field on non-instance");return Se}const b=16;var g=new WeakMap,l=new WeakMap,d=new WeakMap,_=new WeakMap,A=new WeakMap,C=new WeakMap,L=new WeakMap,M=new WeakMap,V=new WeakMap,K=new WeakMap,Y=new WeakMap,X=new WeakMap,H=new WeakMap,W=new WeakMap,B=new WeakSet,N=new WeakSet,J=new WeakSet,le=new WeakSet,ye=new WeakSet,Ce=new WeakSet,q=new WeakSet,R=new WeakSet,O=new WeakSet,z=new WeakSet,$=new WeakSet,v=new WeakSet,x=new WeakSet,k=new WeakSet,D=new WeakSet,j=new WeakSet,G=new WeakSet,Z=new WeakSet,re=new WeakSet,ie=new WeakSet,ce=new WeakSet,oe=new WeakSet;class ue extends a.AnnotationEditor{constructor(se){super({...se,name:"inkEditor"}),u(this,oe),u(this,ce),u(this,ie),u(this,re),u(this,Z),u(this,G),u(this,j),u(this,D),u(this,k),u(this,x),u(this,v),u(this,$),u(this,z),u(this,O),u(this,R),u(this,q),u(this,Ce),u(this,ye),u(this,le),u(this,J),u(this,N),u(this,B),h(this,g,{writable:!0,value:0}),h(this,l,{writable:!0,value:0}),h(this,d,{writable:!0,value:0}),h(this,_,{writable:!0,value:this.canvasPointermove.bind(this)}),h(this,A,{writable:!0,value:this.canvasPointerleave.bind(this)}),h(this,C,{writable:!0,value:this.canvasPointerup.bind(this)}),h(this,L,{writable:!0,value:this.canvasPointerdown.bind(this)}),h(this,M,{writable:!0,value:!1}),h(this,V,{writable:!0,value:!1}),h(this,K,{writable:!0,value:null}),h(this,Y,{writable:!0,value:null}),h(this,X,{writable:!0,value:0}),h(this,H,{writable:!0,value:0}),h(this,W,{writable:!0,value:null}),this.color=se.color||null,this.thickness=se.thickness||null,this.opacity=se.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(se){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(Se=>[Se,se.get(Se)]))}static updateDefaultParams(se,Se){switch(se){case n.AnnotationEditorParamsType.INK_THICKNESS:ue._defaultThickness=Se;break;case n.AnnotationEditorParamsType.INK_COLOR:ue._defaultColor=Se;break;case n.AnnotationEditorParamsType.INK_OPACITY:ue._defaultOpacity=Se/100;break}}updateParams(se,Se){switch(se){case n.AnnotationEditorParamsType.INK_THICKNESS:y(this,B,me).call(this,Se);break;case n.AnnotationEditorParamsType.INK_COLOR:y(this,N,be).call(this,Se);break;case n.AnnotationEditorParamsType.INK_OPACITY:y(this,J,Ae).call(this,Se);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ue._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ue._defaultColor||a.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ue._defaultOpacity*100)]]}get propertiesToUpdate(){var se;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ue._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ue._defaultColor||a.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((se=this.opacity)!==null&&se!==void 0?se:ue._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(y(this,$,ae).call(this),y(this,v,ve).call(this)),this.isAttachedToDOM||(this.parent.add(this),y(this,x,Me).call(this)),y(this,ce,Ie).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,S(this,Y).disconnect(),w(this,Y,null),super.remove())}enableEditMode(){S(this,M)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",S(this,L)),this.canvas.addEventListener("pointerup",S(this,C)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",S(this,L)),this.canvas.removeEventListener("pointerup",S(this,C)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){S(this,M)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),w(this,M,!0),this.div.classList.add("disabled"),y(this,ce,Ie).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(se){super.focusin(se),this.enableEditMode()}canvasPointerdown(se){se.button!==0||!this.isInEditMode()||S(this,M)||(this.setInForeground(),se.type!=="mouse"&&this.div.focus(),se.stopPropagation(),this.canvas.addEventListener("pointerleave",S(this,A)),this.canvas.addEventListener("pointermove",S(this,_)),y(this,Ce,_e).call(this,se.offsetX,se.offsetY))}canvasPointermove(se){se.stopPropagation(),y(this,q,Ye).call(this,se.offsetX,se.offsetY)}canvasPointerup(se){se.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(se.stopPropagation(),y(this,z,we).call(this,se),this.setInBackground())}canvasPointerleave(se){y(this,z,we).call(this,se),this.setInBackground()}render(){if(this.div)return this.div;let se,Se;this.width&&(se=this.x,Se=this.y),super.render(),ue._l10nPromise.get("editor_ink_aria_label").then(Ge=>{var De;return(De=this.div)===null||De===void 0?void 0:De.setAttribute("aria-label",Ge)});const[Re,je,ze,We]=y(this,le,Ee).call(this);if(this.setAt(Re,je,0,0),this.setDims(ze,We),y(this,$,ae).call(this),this.width){const[Ge,De]=this.parent.viewportBaseDimensions;this.setAt(se*Ge,Se*De,this.width*Ge,this.height*De),w(this,V,!0),y(this,x,Me).call(this),this.setDims(this.width*Ge,this.height*De),y(this,O,Oe).call(this),y(this,oe,Ne).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return y(this,v,ve).call(this),this.div}setDimensions(se,Se){const Re=Math.round(se),je=Math.round(Se);if(S(this,X)===Re&&S(this,H)===je)return;w(this,X,Re),w(this,H,je),this.canvas.style.visibility="hidden",S(this,g)&&Math.abs(S(this,g)-se/Se)>.01&&(Se=Math.ceil(se/S(this,g)),this.setDims(se,Se));const[ze,We]=this.parent.viewportBaseDimensions;this.width=se/ze,this.height=Se/We,S(this,M)&&y(this,k,Xe).call(this,se,Se),y(this,x,Me).call(this),y(this,O,Oe).call(this),this.canvas.style.visibility="visible"}static deserialize(se,Se){const Re=super.deserialize(se,Se);Re.thickness=se.thickness,Re.color=n.Util.makeHexColor(...se.color),Re.opacity=se.opacity;const[je,ze]=Se.pageDimensions,We=Re.width*je,Ge=Re.height*ze,De=Se.scaleFactor,Ve=se.thickness/2;w(Re,g,We/Ge),w(Re,M,!0),w(Re,X,Math.round(We)),w(Re,H,Math.round(Ge));for(const{bezier:Ke}of se.paths){const Ze=[];Re.paths.push(Ze);let it=De*(Ke[0]-Ve),et=De*(Ge-Ke[1]-Ve);for(let tt=2,gt=Ke.length;tt<gt;tt+=6){const Ct=De*(Ke[tt]-Ve),ut=De*(Ge-Ke[tt+1]-Ve),Dt=De*(Ke[tt+2]-Ve),$t=De*(Ge-Ke[tt+3]-Ve),Mt=De*(Ke[tt+4]-Ve),dt=De*(Ge-Ke[tt+5]-Ve);Ze.push([[it,et],[Ct,ut],[Dt,$t],[Mt,dt]]),it=Mt,et=dt}const ot=E(this,ue,Te).call(this,Ze);Re.bezierPath2D.push(ot)}const at=y(Re,re,ne).call(Re);return w(Re,d,Math.max(b,at[2]-at[0])),w(Re,l,Math.max(b,at[3]-at[1])),y(Re,k,Xe).call(Re,We,Ge),Re}serialize(){if(this.isEmpty())return null;const se=this.getRect(0,0),Se=this.rotation%180===0?se[3]-se[1]:se[2]-se[0],Re=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:Re,thickness:this.thickness,opacity:this.opacity,paths:y(this,j,Le).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Se),pageIndex:this.parent.pageIndex,rect:se,rotation:this.rotation}}}e.InkEditor=ue;function me(he){const se=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=he,y(this,ce,Ie).call(this)},undo:()=>{this.thickness=se,y(this,ce,Ie).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function be(he){const se=this.color;this.parent.addCommands({cmd:()=>{this.color=he,y(this,O,Oe).call(this)},undo:()=>{this.color=se,y(this,O,Oe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Ae(he){he/=100;const se=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=he,y(this,O,Oe).call(this)},undo:()=>{this.opacity=se,y(this,O,Oe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Ee(){const{width:he,height:se,rotation:Se}=this.parent.viewport;switch(Se){case 90:return[0,he,he,se];case 180:return[he,se,he,se];case 270:return[se,0,he,se];default:return[0,0,he,se]}}function Fe(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,o.opacityToHex)(this.opacity)}`}function _e(he,se){if(this.isEditing=!0,!S(this,V)){var Se;w(this,V,!0),y(this,x,Me).call(this),this.thickness||(this.thickness=ue._defaultThickness),this.color||(this.color=ue._defaultColor||a.AnnotationEditor._defaultLineColor),(Se=this.opacity)!==null&&Se!==void 0||(this.opacity=ue._defaultOpacity)}this.currentPath.push([he,se]),w(this,K,null),y(this,ye,Fe).call(this),this.ctx.beginPath(),this.ctx.moveTo(he,se),w(this,W,()=>{S(this,W)&&(S(this,K)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):y(this,O,Oe).call(this),this.ctx.lineTo(...S(this,K)),w(this,K,null),this.ctx.stroke()),window.requestAnimationFrame(S(this,W)))}),window.requestAnimationFrame(S(this,W))}function Ye(he,se){const[Se,Re]=this.currentPath.at(-1);he===Se&&se===Re||(this.currentPath.push([he,se]),w(this,K,[he,se]))}function Qe(he,se){this.ctx.closePath(),w(this,W,null),he=Math.min(Math.max(he,0),this.canvas.width),se=Math.min(Math.max(se,0),this.canvas.height);const[Se,Re]=this.currentPath.at(-1);(he!==Se||se!==Re)&&this.currentPath.push([he,se]);let je;if(this.currentPath.length!==1)je=(0,s.fitCurve)(this.currentPath,30,null);else{const De=[he,se];je=[[De,De.slice(),De.slice(),De]]}const ze=E(ue,ue,Te).call(ue,je);this.currentPath.length=0;const We=()=>{this.paths.push(je),this.bezierPath2D.push(ze),this.rebuild()},Ge=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(y(this,$,ae).call(this),y(this,v,ve).call(this)),y(this,ce,Ie).call(this))};this.parent.addCommands({cmd:We,undo:Ge,mustExec:!0})}function Oe(){if(this.isEmpty()){y(this,D,ge).call(this);return}y(this,ye,Fe).call(this);const{canvas:he,ctx:se}=this;se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,he.width,he.height),y(this,D,ge).call(this);for(const Se of this.bezierPath2D)se.stroke(Se)}function we(he){y(this,R,Qe).call(this,he.offsetX,he.offsetY),this.canvas.removeEventListener("pointerleave",S(this,A)),this.canvas.removeEventListener("pointermove",S(this,_)),this.parent.addToAnnotationStorage(this)}function ae(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ue._l10nPromise.get("editor_ink_canvas_aria_label").then(he=>{var se;return(se=this.canvas)===null||se===void 0?void 0:se.setAttribute("aria-label",he)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function ve(){w(this,Y,new ResizeObserver(he=>{const se=he[0].contentRect;se.width&&se.height&&this.setDimensions(se.width,se.height)})),S(this,Y).observe(this.div)}function Me(){if(!S(this,V))return;const[he,se]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*he),this.canvas.height=Math.ceil(this.height*se),y(this,D,ge).call(this)}function Xe(he,se){const Se=y(this,ie,pe).call(this),Re=(he-Se)/S(this,d),je=(se-Se)/S(this,l);this.scaleFactor=Math.min(Re,je)}function ge(){const he=y(this,ie,pe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+he,this.translationY*this.scaleFactor+he)}function Te(he){const se=new Path2D;for(let Se=0,Re=he.length;Se<Re;Se++){const[je,ze,We,Ge]=he[Se];Se===0&&se.moveTo(...je),se.bezierCurveTo(ze[0],ze[1],We[0],We[1],Ge[0],Ge[1])}return se}function Le(he,se,Se,Re){const ze=[],We=this.thickness/2;let Ge,De;for(const Ve of this.paths){Ge=[],De=[];for(let at=0,Ke=Ve.length;at<Ke;at++){const[Ze,it,et,ot]=Ve[at],tt=he*(Ze[0]+se)+We,gt=Re-he*(Ze[1]+Se)-We,Ct=he*(it[0]+se)+We,ut=Re-he*(it[1]+Se)-We,Dt=he*(et[0]+se)+We,$t=Re-he*(et[1]+Se)-We,Mt=he*(ot[0]+se)+We,dt=Re-he*(ot[1]+Se)-We;at===0&&(Ge.push(tt,gt),De.push(tt,gt)),Ge.push(Ct,ut,Dt,$t,Mt,dt),y(this,G,de).call(this,tt,gt,Ct,ut,Dt,$t,Mt,dt,4,De)}ze.push({bezier:Ge,points:De})}return ze}function de(he,se,Se,Re,je,ze,We,Ge,De,Ve){if(y(this,Z,ee).call(this,he,se,Se,Re,je,ze,We,Ge)){Ve.push(We,Ge);return}for(let at=1;at<De-1;at++){const Ke=at/De,Ze=1-Ke;let it=Ke*he+Ze*Se,et=Ke*se+Ze*Re,ot=Ke*Se+Ze*je,tt=Ke*Re+Ze*ze;const gt=Ke*je+Ze*We,Ct=Ke*ze+Ze*Ge;it=Ke*it+Ze*ot,et=Ke*et+Ze*tt,ot=Ke*ot+Ze*gt,tt=Ke*tt+Ze*Ct,it=Ke*it+Ze*ot,et=Ke*et+Ze*tt,Ve.push(it,et)}Ve.push(We,Ge)}function ee(he,se,Se,Re,je,ze,We,Ge){const Ve=(3*Se-2*he-We)**2,at=(3*Re-2*se-Ge)**2,Ke=(3*je-he-2*We)**2,Ze=(3*ze-se-2*Ge)**2;return Math.max(Ve,Ke)+Math.max(at,Ze)<=10}function ne(){let he=1/0,se=-1/0,Se=1/0,Re=-1/0;for(const je of this.paths)for(const[ze,We,Ge,De]of je){const Ve=n.Util.bezierBoundingBox(...ze,...We,...Ge,...De);he=Math.min(he,Ve[0]),Se=Math.min(Se,Ve[1]),se=Math.max(se,Ve[2]),Re=Math.max(Re,Ve[3])}return[he,Se,se,Re]}function pe(){return S(this,M)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function Ie(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!S(this,M)){y(this,O,Oe).call(this);return}const se=y(this,re,ne).call(this),Se=y(this,ie,pe).call(this);w(this,d,Math.max(b,se[2]-se[0])),w(this,l,Math.max(b,se[3]-se[1]));const Re=Math.ceil(Se+S(this,d)*this.scaleFactor),je=Math.ceil(Se+S(this,l)*this.scaleFactor),[ze,We]=this.parent.viewportBaseDimensions;this.width=Re/ze,this.height=je/We,w(this,g,Re/je),y(this,oe,Ne).call(this);const Ge=this.translationX,De=this.translationY;this.translationX=-se[0],this.translationY=-se[1],y(this,x,Me).call(this),y(this,O,Oe).call(this),w(this,X,Re),w(this,H,je),this.setDims(Re,je);const Ve=he?Se/this.scaleFactor/2:0;this.translate(Ge-this.translationX-Ve,De-this.translationY-Ve)}function Ne(){const{style:he}=this.div;S(this,g)>=1?(he.minHeight=`${b}px`,he.minWidth=`${Math.round(S(this,g)*b)}px`):(he.minWidth=`${b}px`,he.minHeight=`${Math.round(b/S(this,g))}px`)}p(ue,"_defaultColor",null),p(ue,"_defaultOpacity",1),p(ue,"_defaultThickness",1),p(ue,"_l10nPromise",void 0),p(ue,"_type","ink")},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const n=t(151);e.fitCurve=n},r=>{function e(I,S,T){if(!Array.isArray(I))throw new TypeError("First argument should be an array");if(I.forEach(g=>{if(!Array.isArray(g)||g.some(l=>typeof l!="number")||g.length!==I[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),I=I.filter((g,l)=>l===0||!g.every((d,_)=>d===I[l-1][_])),I.length<2)return[];const F=I.length,y=E(I[1],I[0]),b=E(I[F-2],I[F-1]);return t(I,y,b,S,T)}function t(I,S,T,F,y){var g,l,d,_,A,C,L,M,V,K,Y,X,H;if(I.length===2)return X=m.vectorLen(m.subtract(I[0],I[1]))/3,g=[I[0],m.addArrays(I[0],m.mulItems(S,X)),m.addArrays(I[1],m.mulItems(T,X)),I[1]],[g];if(l=u(I),[g,_,C]=n(I,l,l,S,T,y),_===0||_<F)return[g];if(_<F*F)for(d=l,A=_,L=C,H=0;H<20;H++){if(d=s(g,I,d),[g,_,C]=n(I,l,d,S,T,y),_<F)return[g];if(C===L){let W=_/A;if(W>.9999&&W<1.0001)break}A=_,L=C}return Y=[],M=m.subtract(I[C-1],I[C+1]),M.every(W=>W===0)&&(M=m.subtract(I[C-1],I[C]),[M[0],M[1]]=[-M[1],M[0]]),V=m.normalize(M),K=m.mulItems(V,-1),Y=Y.concat(t(I.slice(0,C+1),S,V,F,y)),Y=Y.concat(t(I.slice(C),K,T,F,y)),Y}function n(I,S,T,F,y,b){var g,l,d;return g=a(I,T,F,y),[l,d]=p(I,g,S),b&&b({bez:g,points:I,params:S,maxErr:l,maxPoint:d}),[g,l,d]}function a(I,S,T,F){var y,b,g,l,d,_,A,C,L,M,V,K,Y,X,H,W,B,N=I[0],J=I[I.length-1];for(y=[N,null,null,J],b=m.zeros_Xx2x2(S.length),Y=0,X=S.length;Y<X;Y++)W=S[Y],B=1-W,g=b[Y],g[0]=m.mulItems(T,3*W*(B*B)),g[1]=m.mulItems(F,3*B*(W*W));for(l=[[0,0],[0,0]],d=[0,0],Y=0,X=I.length;Y<X;Y++)W=S[Y],g=b[Y],l[0][0]+=m.dot(g[0],g[0]),l[0][1]+=m.dot(g[0],g[1]),l[1][0]+=m.dot(g[0],g[1]),l[1][1]+=m.dot(g[1],g[1]),H=m.subtract(I[Y],w.q([N,N,J,J],W)),d[0]+=m.dot(g[0],H),d[1]+=m.dot(g[1],H);return _=l[0][0]*l[1][1]-l[1][0]*l[0][1],A=l[0][0]*d[1]-l[1][0]*d[0],C=d[0]*l[1][1]-d[1]*l[0][1],L=_===0?0:C/_,M=_===0?0:A/_,K=m.vectorLen(m.subtract(N,J)),V=1e-6*K,L<V||M<V?(y[1]=m.addArrays(N,m.mulItems(T,K/3)),y[2]=m.addArrays(J,m.mulItems(F,K/3))):(y[1]=m.addArrays(N,m.mulItems(T,L)),y[2]=m.addArrays(J,m.mulItems(F,M))),y}function s(I,S,T){return T.map((F,y)=>o(I,S[y],F))}function o(I,S,T){var F=m.subtract(w.q(I,T),S),y=w.qprime(I,T),b=m.mulMatrix(F,y),g=m.sum(m.squareItems(y))+2*m.mulMatrix(F,w.qprimeprime(I,T));return g===0?T:T-b/g}function u(I){var S=[],T,F,y;return I.forEach((b,g)=>{T=g?F+m.vectorLen(m.subtract(b,y)):0,S.push(T),F=T,y=b}),S=S.map(b=>b/F),S}function p(I,S,T){var F,y,b,g,l,d,_,A;y=0,b=Math.floor(I.length/2);const C=h(S,10);for(l=0,d=I.length;l<d;l++)_=I[l],A=f(S,T[l],C,10),g=m.subtract(w.q(S,A),_),F=g[0]*g[0]+g[1]*g[1],F>y&&(y=F,b=l);return[y,b]}var h=function(I,S){for(var T,F=[0],y=I[0],b=0,g=1;g<=S;g++)T=w.q(I,g/S),b+=m.vectorLen(m.subtract(T,y)),F.push(b),y=T;return F=F.map(l=>l/b),F};function f(I,S,T,F){if(S<0)return 0;if(S>1)return 1;for(var y,b,g,l,d,_=1;_<=F;_++)if(S<=T[_]){l=(_-1)/F,g=_/F,b=T[_-1],y=T[_],d=(S-b)/(y-b)*(g-l)+l;break}return d}function E(I,S){return m.normalize(m.subtract(I,S))}class m{static zeros_Xx2x2(S){for(var T=[];S--;)T.push([0,0]);return T}static mulItems(S,T){return S.map(F=>F*T)}static mulMatrix(S,T){return S.reduce((F,y,b)=>F+y*T[b],0)}static subtract(S,T){return S.map((F,y)=>F-T[y])}static addArrays(S,T){return S.map((F,y)=>F+T[y])}static addItems(S,T){return S.map(F=>F+T)}static sum(S){return S.reduce((T,F)=>T+F)}static dot(S,T){return m.mulMatrix(S,T)}static vectorLen(S){return Math.hypot(...S)}static divItems(S,T){return S.map(F=>F/T)}static squareItems(S){return S.map(T=>T*T)}static normalize(S){return this.divItems(S,this.vectorLen(S))}}class w{static q(S,T){var F=1-T,y=m.mulItems(S[0],F*F*F),b=m.mulItems(S[1],3*F*F*T),g=m.mulItems(S[2],3*F*T*T),l=m.mulItems(S[3],T*T*T);return m.addArrays(m.addArrays(y,b),m.addArrays(g,l))}static qprime(S,T){var F=1-T,y=m.mulItems(m.subtract(S[1],S[0]),3*F*F),b=m.mulItems(m.subtract(S[2],S[1]),6*F*T),g=m.mulItems(m.subtract(S[3],S[2]),3*T*T);return m.addArrays(m.addArrays(y,b),g)}static qprimeprime(S,T){return m.addArrays(m.mulItems(m.addArrays(m.subtract(S[2],m.mulItems(S[1],2)),S[0]),6*(1-T)),m.mulItems(m.addArrays(m.subtract(S[3],m.mulItems(S[2],2)),S[1]),6*T))}}r.exports=e,r.exports.fitCubic=t,r.exports.createTangent=E},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=t(1),a=t(133),s=t(130),o=t(153),u=t(154);function p($,v,x){return h($,v),x}function h($,v){if($!==v)throw new TypeError("Private static access of wrong provenance")}const f=1e3,E=9,m=new WeakSet;function w($){return{width:$[2]-$[0],height:$[3]-$[1]}}class I{static create(v){switch(v.data.annotationType){case n.AnnotationType.LINK:return new T(v);case n.AnnotationType.TEXT:return new F(v);case n.AnnotationType.WIDGET:switch(v.data.fieldType){case"Tx":return new b(v);case"Btn":return v.data.radioButton?new l(v):v.data.checkBox?new g(v):new d(v);case"Ch":return new _(v)}return new y(v);case n.AnnotationType.POPUP:return new A(v);case n.AnnotationType.FREETEXT:return new L(v);case n.AnnotationType.LINE:return new M(v);case n.AnnotationType.SQUARE:return new V(v);case n.AnnotationType.CIRCLE:return new K(v);case n.AnnotationType.POLYLINE:return new Y(v);case n.AnnotationType.CARET:return new H(v);case n.AnnotationType.INK:return new W(v);case n.AnnotationType.POLYGON:return new X(v);case n.AnnotationType.HIGHLIGHT:return new B(v);case n.AnnotationType.UNDERLINE:return new N(v);case n.AnnotationType.SQUIGGLY:return new J(v);case n.AnnotationType.STRIKEOUT:return new le(v);case n.AnnotationType.STAMP:return new ye(v);case n.AnnotationType.FILEATTACHMENT:return new Ce(v);default:return new S(v)}}}class S{constructor(v){let{isRenderable:x=!1,ignoreBorder:k=!1,createQuadrilaterals:D=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=x,this.data=v.data,this.layer=v.layer,this.page=v.page,this.viewport=v.viewport,this.linkService=v.linkService,this.downloadManager=v.downloadManager,this.imageResourcesPath=v.imageResourcesPath,this.renderForms=v.renderForms,this.svgFactory=v.svgFactory,this.annotationStorage=v.annotationStorage,this.enableScripting=v.enableScripting,this.hasJSActions=v.hasJSActions,this._fieldObjects=v.fieldObjects,this._mouseState=v.mouseState,x&&(this.container=this._createContainer(k)),D&&(this.quadrilaterals=this._createQuadrilaterals(k))}_createContainer(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const x=this.data,k=this.page,D=this.viewport,j=document.createElement("section"),{width:G,height:Z}=w(x.rect),[re,ie,ce,oe]=D.viewBox,ue=ce-re,me=oe-ie;j.setAttribute("data-annotation-id",x.id);const be=n.Util.normalizeRect([x.rect[0],k.view[3]-x.rect[1]+k.view[1],x.rect[2],k.view[3]-x.rect[3]+k.view[1]]);if(!v&&x.borderStyle.width>0){j.style.borderWidth=`${x.borderStyle.width}px`;const Ee=x.borderStyle.horizontalCornerRadius,Fe=x.borderStyle.verticalCornerRadius;if(Ee>0||Fe>0){const Ye=`calc(${Ee}px * var(--scale-factor)) / calc(${Fe}px * var(--scale-factor))`;j.style.borderRadius=Ye}else if(this instanceof l){const Ye=`calc(${G}px * var(--scale-factor)) / calc(${Z}px * var(--scale-factor))`;j.style.borderRadius=Ye}switch(x.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:j.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:j.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:j.style.borderBottomStyle="solid";break}const _e=x.borderColor||null;_e?j.style.borderColor=n.Util.makeHexColor(_e[0]|0,_e[1]|0,_e[2]|0):j.style.borderWidth=0}j.style.left=`${100*(be[0]-re)/ue}%`,j.style.top=`${100*(be[1]-ie)/me}%`;const{rotation:Ae}=x;return x.hasOwnCanvas||Ae===0?(j.style.width=`${100*G/ue}%`,j.style.height=`${100*Z/me}%`):this.setRotation(Ae,j),j}setRotation(v){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const[k,D,j,G]=this.viewport.viewBox,Z=j-k,re=G-D,{width:ie,height:ce}=w(this.data.rect);let oe,ue;v%180===0?(oe=100*ie/Z,ue=100*ce/re):(oe=100*ce/Z,ue=100*ie/re),x.style.width=`${oe}%`,x.style.height=`${ue}%`,x.setAttribute("data-main-rotation",(360-v)%360)}get _commonActions(){const v=(x,k,D)=>{const j=D.detail[x];D.target.style[k]=o.ColorConverters[`${j[0]}_HTML`](j.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:x=>{const k=x.detail.display%2===1;this.container.style.visibility=k?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:k,print:x.detail.display===0||x.detail.display===3})},print:x=>{this.annotationStorage.setValue(this.data.id,{print:x.detail.print})},hidden:x=>{this.container.style.visibility=x.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:x.detail.hidden})},focus:x=>{setTimeout(()=>x.target.focus({preventScroll:!1}),0)},userName:x=>{x.target.title=x.detail.userName},readonly:x=>{x.detail.readonly?x.target.setAttribute("readonly",""):x.target.removeAttribute("readonly")},required:x=>{this._setRequired(x.target,x.detail.required)},bgColor:x=>{v("bgColor","backgroundColor",x)},fillColor:x=>{v("fillColor","backgroundColor",x)},fgColor:x=>{v("fgColor","color",x)},textColor:x=>{v("textColor","color",x)},borderColor:x=>{v("borderColor","borderColor",x)},strokeColor:x=>{v("strokeColor","borderColor",x)},rotation:x=>{const k=x.detail.rotation;this.setRotation(k),this.annotationStorage.setValue(this.data.id,{rotation:k})}})}_dispatchEventFromSandbox(v,x){const k=this._commonActions;for(const D of Object.keys(x.detail)){const j=v[D]||k[D];j&&j(x)}}_setDefaultPropertiesFromJS(v){if(!this.enableScripting)return;const x=this.annotationStorage.getRawValue(this.data.id);if(!x)return;const k=this._commonActions;for(const[D,j]of Object.entries(x)){const G=k[D];if(G){const Z={detail:{[D]:j},target:v};G(Z),delete x[D]}}}_createQuadrilaterals(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;const x=[],k=this.data.rect;for(const D of this.data.quadPoints)this.data.rect=[D[2].x,D[2].y,D[1].x,D[1].y],x.push(this._createContainer(v));return this.data.rect=k,x}_createPopup(v,x){let k=this.container;this.quadrilaterals&&(v=v||this.quadrilaterals,k=this.quadrilaterals[0]),v||(v=document.createElement("div"),v.className="popupTriggerArea",k.append(v));const j=new C({container:k,trigger:v,color:x.color,titleObj:x.titleObj,modificationDate:x.modificationDate,contentsObj:x.contentsObj,richText:x.richText,hideWrapper:!0}).render();j.style.left="100%",k.append(j)}_renderQuadrilaterals(v){for(const x of this.quadrilaterals)x.className=v;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(v){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const k=[];if(this._fieldObjects){const D=this._fieldObjects[v];if(D)for(const{page:j,id:G,exportValues:Z}of D){if(j===-1||G===x)continue;const re=typeof Z=="string"?Z:null,ie=document.querySelector(`[data-element-id="${G}"]`);if(ie&&!m.has(ie)){(0,n.warn)(`_getElementsByName - element not allowed: ${G}`);continue}k.push({id:G,exportValue:re,domElement:ie})}return k}for(const D of document.getElementsByName(v)){const{id:j,exportValue:G}=D;j!==x&&m.has(D)&&k.push({id:j,exportValue:G,domElement:D})}return k}static get platform(){const v=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:v.includes("Win"),isMac:v.includes("Mac")})}}class T extends S{constructor(v){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(v,{isRenderable:!0,ignoreBorder:!!(x!=null&&x.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=v.data.isTooltipOnly}render(){const{data:v,linkService:x}=this,k=document.createElement("a");k.setAttribute("data-element-id",v.id);let D=!1;return v.url?(x.addLinkAttributes(k,v.url,v.newWindow),D=!0):v.action?(this._bindNamedAction(k,v.action),D=!0):v.dest?(this._bindLink(k,v.dest),D=!0):(v.actions&&(v.actions.Action||v.actions["Mouse Up"]||v.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(k,v),D=!0),v.resetForm?(this._bindResetFormAction(k,v.resetForm),D=!0):this.isTooltipOnly&&!D&&(this._bindLink(k,""),D=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((j,G)=>{const Z=G===0?k:k.cloneNode();return j.append(Z),j}):(this.container.className="linkAnnotation",D&&this.container.append(k),this.container)}_bindLink(v,x){v.href=this.linkService.getDestinationHash(x),v.onclick=()=>(x&&this.linkService.goToDestination(x),!1),(x||x==="")&&(v.className="internalLink")}_bindNamedAction(v,x){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeNamedAction(x),!1),v.className="internalLink"}_bindJSAction(v,x){v.href=this.linkService.getAnchorUrl("");const k=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const D of Object.keys(x.actions)){const j=k.get(D);j&&(v[j]=()=>{var G;return(G=this.linkService.eventBus)===null||G===void 0||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x.id,name:D}}),!1})}v.onclick||(v.onclick=()=>!1),v.className="internalLink"}_bindResetFormAction(v,x){const k=v.onclick;if(k||(v.href=this.linkService.getAnchorUrl("")),v.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),k||(v.onclick=()=>!1);return}v.onclick=()=>{k&&k();const{fields:D,refs:j,include:G}=x,Z=[];if(D.length!==0||j.length!==0){const oe=new Set(j);for(const ue of D){const me=this._fieldObjects[ue]||[];for(const{id:be}of me)oe.add(be)}for(const ue of Object.values(this._fieldObjects))for(const me of ue)oe.has(me.id)===G&&Z.push(me)}else for(const oe of Object.values(this._fieldObjects))Z.push(...oe);const re=this.annotationStorage,ie=[];for(const oe of Z){const{id:ue}=oe;switch(ie.push(ue),oe.type){case"text":{const be=oe.defaultValue||"";re.setValue(ue,{value:be});break}case"checkbox":case"radiobutton":{const be=oe.defaultValue===oe.exportValues;re.setValue(ue,{value:be});break}case"combobox":case"listbox":{const be=oe.defaultValue||"";re.setValue(ue,{value:be});break}default:continue}const me=document.querySelector(`[data-element-id="${ue}"]`);if(me){if(!m.has(me)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${ue}`);continue}}else continue;me.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var ce;(ce=this.linkService.eventBus)===null||ce===void 0||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ie,name:"ResetForm"}})}return!1}}}class F extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j})}render(){this.container.className="textAnnotation";const v=document.createElement("img");return v.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",v.alt="[{{type}} Annotation]",v.dataset.l10nId="text_annotation_type",v.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(v,this.data),this.container.append(v),this.container}}class y extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(v){const{isWin:x,isMac:k}=S.platform;return x&&v.ctrlKey||k&&v.metaKey}_setEventListener(v,x,k,D){x.includes("mouse")?v.addEventListener(x,j=>{var G;(G=this.linkService.eventBus)===null||G===void 0||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:k,value:D(j),shift:j.shiftKey,modifier:this._getKeyModifier(j)}})}):v.addEventListener(x,j=>{var G;(G=this.linkService.eventBus)===null||G===void 0||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:k,value:D(j)}})})}_setEventListeners(v,x,k){for(const[j,G]of x){var D;(G==="Action"||(D=this.data.actions)!==null&&D!==void 0&&D[G])&&this._setEventListener(v,j,G,k)}}_setBackgroundColor(v){const x=this.data.backgroundColor||null;v.style.backgroundColor=x===null?"transparent":n.Util.makeHexColor(x[0],x[1],x[2])}_setTextStyle(v){const x=["left","center","right"],{fontColor:k}=this.data.defaultAppearanceData,D=this.data.defaultAppearanceData.fontSize||E,j=v.style;let G;if(this.data.multiLine){const Z=Math.abs(this.data.rect[3]-this.data.rect[1]),re=Math.round(Z/(n.LINE_FACTOR*D))||1,ie=Z/re;G=Math.min(D,Math.round(ie/n.LINE_FACTOR))}else{const Z=Math.abs(this.data.rect[3]-this.data.rect[1]);G=Math.min(D,Math.round(Z/n.LINE_FACTOR))}j.fontSize=`calc(${G}px * var(--scale-factor))`,j.color=n.Util.makeHexColor(k[0],k[1],k[2]),this.data.textAlignment!==null&&(j.textAlign=x[this.data.textAlignment])}_setRequired(v,x){x?v.setAttribute("required",!0):v.removeAttribute("required"),v.setAttribute("aria-required",x)}}class b extends y{constructor(v){const x=v.renderForms||!v.data.hasAppearance&&!!v.data.fieldValue;super(v,{isRenderable:x})}setPropertyOnSiblings(v,x,k,D){const j=this.annotationStorage;for(const G of this._getElementsByName(v.name,v.id))G.domElement&&(G.domElement[x]=k),j.setValue(G.id,{[D]:k})}render(){const v=this.annotationStorage,x=this.data.id;this.container.className="textWidgetAnnotation";let k=null;if(this.renderForms){const j=v.getValue(x,{value:this.data.fieldValue});let G=j.formattedValue||j.value||"";const Z=v.getValue(x,{charLimit:this.data.maxLen}).charLimit;Z&&G.length>Z&&(G=G.slice(0,Z));const re={userValue:G,formattedValue:null,valueOnFocus:""};this.data.multiLine?(k=document.createElement("textarea"),k.textContent=G,this.data.doNotScroll&&(k.style.overflowY="hidden")):(k=document.createElement("input"),k.type="text",k.setAttribute("value",G),this.data.doNotScroll&&(k.style.overflowX="hidden")),m.add(k),k.setAttribute("data-element-id",x),k.disabled=this.data.readOnly,k.name=this.data.fieldName,k.tabIndex=f,this._setRequired(k,this.data.required),Z&&(k.maxLength=Z),k.addEventListener("input",ce=>{v.setValue(x,{value:ce.target.value}),this.setPropertyOnSiblings(k,"value",ce.target.value,"value")}),k.addEventListener("resetform",ce=>{var oe;const ue=(oe=this.data.defaultFieldValue)!==null&&oe!==void 0?oe:"";k.value=re.userValue=ue,re.formattedValue=null});let ie=ce=>{const{formattedValue:oe}=re;oe!=null&&(ce.target.value=oe),ce.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var D;k.addEventListener("focus",oe=>{re.userValue&&(oe.target.value=re.userValue),re.valueOnFocus=oe.target.value}),k.addEventListener("updatefromsandbox",oe=>{const ue={value(me){var be;re.userValue=(be=me.detail.value)!==null&&be!==void 0?be:"",v.setValue(x,{value:re.userValue.toString()}),me.target.value=re.userValue},formattedValue(me){const{formattedValue:be}=me.detail;re.formattedValue=be,be!=null&&me.target!==document.activeElement&&(me.target.value=be),v.setValue(x,{formattedValue:be})},selRange(me){me.target.setSelectionRange(...me.detail.selRange)},charLimit:me=>{var be;const{charLimit:Ae}=me.detail,{target:Ee}=me;if(Ae===0){Ee.removeAttribute("maxLength");return}Ee.setAttribute("maxLength",Ae);let Fe=re.userValue;!Fe||Fe.length<=Ae||(Fe=Fe.slice(0,Ae),Ee.value=re.userValue=Fe,v.setValue(x,{value:Fe}),(be=this.linkService.eventBus)===null||be===void 0||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:Fe,willCommit:!0,commitKey:1,selStart:Ee.selectionStart,selEnd:Ee.selectionEnd}}))}};this._dispatchEventFromSandbox(ue,oe)}),k.addEventListener("keydown",oe=>{var ue;let me=-1;if(oe.key==="Escape"?me=0:oe.key==="Enter"?me=2:oe.key==="Tab"&&(me=3),me===-1)return;const{value:be}=oe.target;re.valueOnFocus!==be&&(re.userValue=be,(ue=this.linkService.eventBus)===null||ue===void 0||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:be,willCommit:!0,commitKey:me,selStart:oe.target.selectionStart,selEnd:oe.target.selectionEnd}}))});const ce=ie;ie=null,k.addEventListener("blur",oe=>{const{value:ue}=oe.target;if(re.userValue=ue,this._mouseState.isDown&&re.valueOnFocus!==ue){var me;(me=this.linkService.eventBus)===null||me===void 0||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:ue,willCommit:!0,commitKey:1,selStart:oe.target.selectionStart,selEnd:oe.target.selectionEnd}})}ce(oe)}),(D=this.data.actions)!==null&&D!==void 0&&D.Keystroke&&k.addEventListener("beforeinput",oe=>{var ue;const{data:me,target:be}=oe,{value:Ae,selectionStart:Ee,selectionEnd:Fe}=be;let _e=Ee,Ye=Fe;switch(oe.inputType){case"deleteWordBackward":{const Qe=Ae.substring(0,Ee).match(/\w*[^\w]*$/);Qe&&(_e-=Qe[0].length);break}case"deleteWordForward":{const Qe=Ae.substring(Ee).match(/^[^\w]*\w*/);Qe&&(Ye+=Qe[0].length);break}case"deleteContentBackward":Ee===Fe&&(_e-=1);break;case"deleteContentForward":Ee===Fe&&(Ye+=1);break}oe.preventDefault(),(ue=this.linkService.eventBus)===null||ue===void 0||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:Ae,change:me||"",willCommit:!1,selStart:_e,selEnd:Ye}})}),this._setEventListeners(k,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],oe=>oe.target.value)}if(ie&&k.addEventListener("blur",ie),this.data.comb){const oe=(this.data.rect[2]-this.data.rect[0])/Z;k.classList.add("comb"),k.style.letterSpacing=`calc(${oe}px * var(--scale-factor) - 1ch)`}}else k=document.createElement("div"),k.textContent=this.data.fieldValue,k.style.verticalAlign="middle",k.style.display="table-cell";return this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class g extends y{constructor(v){super(v,{isRenderable:v.renderForms})}render(){const v=this.annotationStorage,x=this.data,k=x.id;let D=v.getValue(k,{value:x.exportValue===x.fieldValue}).value;typeof D=="string"&&(D=D!=="Off",v.setValue(k,{value:D})),this.container.className="buttonWidgetAnnotation checkBox";const j=document.createElement("input");return m.add(j),j.setAttribute("data-element-id",k),j.disabled=x.readOnly,this._setRequired(j,this.data.required),j.type="checkbox",j.name=x.fieldName,D&&j.setAttribute("checked",!0),j.setAttribute("exportValue",x.exportValue),j.tabIndex=f,j.addEventListener("change",G=>{const{name:Z,checked:re}=G.target;for(const ie of this._getElementsByName(Z,k)){const ce=re&&ie.exportValue===x.exportValue;ie.domElement&&(ie.domElement.checked=ce),v.setValue(ie.id,{value:ce})}v.setValue(k,{value:re})}),j.addEventListener("resetform",G=>{const Z=x.defaultFieldValue||"Off";G.target.checked=Z===x.exportValue}),this.enableScripting&&this.hasJSActions&&(j.addEventListener("updatefromsandbox",G=>{const Z={value(re){re.target.checked=re.detail.value!=="Off",v.setValue(k,{value:re.target.checked})}};this._dispatchEventFromSandbox(Z,G)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],G=>G.target.checked)),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class l extends y{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const v=this.annotationStorage,x=this.data,k=x.id;let D=v.getValue(k,{value:x.fieldValue===x.buttonValue}).value;typeof D=="string"&&(D=D!==x.buttonValue,v.setValue(k,{value:D}));const j=document.createElement("input");if(m.add(j),j.setAttribute("data-element-id",k),j.disabled=x.readOnly,this._setRequired(j,this.data.required),j.type="radio",j.name=x.fieldName,D&&j.setAttribute("checked",!0),j.tabIndex=f,j.addEventListener("change",G=>{const{name:Z,checked:re}=G.target;for(const ie of this._getElementsByName(Z,k))v.setValue(ie.id,{value:!1});v.setValue(k,{value:re})}),j.addEventListener("resetform",G=>{const Z=x.defaultFieldValue;G.target.checked=Z!=null&&Z===x.buttonValue}),this.enableScripting&&this.hasJSActions){const G=x.buttonValue;j.addEventListener("updatefromsandbox",Z=>{const re={value:ie=>{const ce=G===ie.detail.value;for(const oe of this._getElementsByName(ie.target.name)){const ue=ce&&oe.id===k;oe.domElement&&(oe.domElement.checked=ue),v.setValue(oe.id,{value:ue})}}};this._dispatchEventFromSandbox(re,Z)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Z=>Z.target.checked)}return this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class d extends T{constructor(v){super(v,{ignoreBorder:v.data.hasAppearance})}render(){const v=super.render();v.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(v.title=this.data.alternativeText);const x=v.lastChild;return this.enableScripting&&this.hasJSActions&&x&&(this._setDefaultPropertiesFromJS(x),x.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({},k)})),v}}class _ extends y{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const v=this.annotationStorage,x=this.data.id,k=v.getValue(x,{value:this.data.fieldValue}),D=document.createElement("select");m.add(D),D.setAttribute("data-element-id",x),D.disabled=this.data.readOnly,this._setRequired(D,this.data.required),D.name=this.data.fieldName,D.tabIndex=f;let j=this.data.combo&&this.data.options.length>0;this.data.combo||(D.size=this.data.options.length,this.data.multiSelect&&(D.multiple=!0)),D.addEventListener("resetform",ie=>{const ce=this.data.defaultFieldValue;for(const oe of D.options)oe.selected=oe.value===ce});for(const ie of this.data.options){const ce=document.createElement("option");ce.textContent=ie.displayValue,ce.value=ie.exportValue,k.value.includes(ie.exportValue)&&(ce.setAttribute("selected",!0),j=!1),D.append(ce)}let G=null;if(j){const ie=document.createElement("option");ie.value=" ",ie.setAttribute("hidden",!0),ie.setAttribute("selected",!0),D.prepend(ie),G=()=>{ie.remove(),D.removeEventListener("input",G),G=null},D.addEventListener("input",G)}const Z=(ie,ce)=>{const oe=ce?"value":"textContent",ue=ie.target.options;return ie.target.multiple?Array.prototype.filter.call(ue,me=>me.selected).map(me=>me[oe]):ue.selectedIndex===-1?null:ue[ue.selectedIndex][oe]},re=ie=>{const ce=ie.target.options;return Array.prototype.map.call(ce,oe=>({displayValue:oe.textContent,exportValue:oe.value}))};return this.enableScripting&&this.hasJSActions?(D.addEventListener("updatefromsandbox",ie=>{const ce={value(oe){var ue;(ue=G)===null||ue===void 0||ue();const me=oe.detail.value,be=new Set(Array.isArray(me)?me:[me]);for(const Ae of D.options)Ae.selected=be.has(Ae.value);v.setValue(x,{value:Z(oe,!0)})},multipleSelection(oe){D.multiple=!0},remove(oe){const ue=D.options,me=oe.detail.remove;ue[me].selected=!1,D.remove(me),ue.length>0&&Array.prototype.findIndex.call(ue,Ae=>Ae.selected)===-1&&(ue[0].selected=!0),v.setValue(x,{value:Z(oe,!0),items:re(oe)})},clear(oe){for(;D.length!==0;)D.remove(0);v.setValue(x,{value:null,items:[]})},insert(oe){const{index:ue,displayValue:me,exportValue:be}=oe.detail.insert,Ae=D.children[ue],Ee=document.createElement("option");Ee.textContent=me,Ee.value=be,Ae?Ae.before(Ee):D.append(Ee),v.setValue(x,{value:Z(oe,!0),items:re(oe)})},items(oe){const{items:ue}=oe.detail;for(;D.length!==0;)D.remove(0);for(const me of ue){const{displayValue:be,exportValue:Ae}=me,Ee=document.createElement("option");Ee.textContent=be,Ee.value=Ae,D.append(Ee)}D.options.length>0&&(D.options[0].selected=!0),v.setValue(x,{value:Z(oe,!0),items:re(oe)})},indices(oe){const ue=new Set(oe.detail.indices);for(const me of oe.target.options)me.selected=ue.has(me.index);v.setValue(x,{value:Z(oe,!0)})},editable(oe){oe.target.disabled=!oe.detail.editable}};this._dispatchEventFromSandbox(ce,ie)}),D.addEventListener("input",ie=>{var ce;const oe=Z(ie,!0),ue=Z(ie,!1);v.setValue(x,{value:oe}),(ce=this.linkService.eventBus)===null||ce===void 0||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:ue,changeEx:oe,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(D,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ie=>ie.target.checked)):D.addEventListener("input",function(ie){v.setValue(x,{value:Z(ie,!0)})}),this.data.combo&&this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class A extends S{constructor(v){var x,k,D;const j=!!((x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j})}render(){const v=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",v.includes(this.data.parentType))return this.container;const x=`[data-annotation-id="${this.data.parentId}"]`,k=this.layer.querySelectorAll(x);if(k.length===0)return this.container;const D=new C({container:this.container,trigger:Array.from(k),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),j=this.page,G=n.Util.normalizeRect([this.data.parentRect[0],j.view[3]-this.data.parentRect[1]+j.view[1],this.data.parentRect[2],j.view[3]-this.data.parentRect[3]+j.view[1]]),Z=G[0]+this.data.parentRect[2]-this.data.parentRect[0],re=G[1],[ie,ce,oe,ue]=this.viewport.viewBox,me=oe-ie,be=ue-ce;return this.container.style.left=`${100*(Z-ie)/me}%`,this.container.style.top=`${100*(re-ce)/be}%`,this.container.append(D.render()),this.container}}class C{constructor(v){this.container=v.container,this.trigger=v.trigger,this.color=v.color,this.titleObj=v.titleObj,this.modificationDate=v.modificationDate,this.contentsObj=v.contentsObj,this.richText=v.richText,this.hideWrapper=v.hideWrapper||!1,this.pinned=!1}render(){var v,x;const D=document.createElement("div");D.className="popupWrapper",this.hideElement=this.hideWrapper?D:this.container,this.hideElement.hidden=!0;const j=document.createElement("div");j.className="popup";const G=this.color;if(G){const ie=.7*(255-G[0])+G[0],ce=.7*(255-G[1])+G[1],oe=.7*(255-G[2])+G[2];j.style.backgroundColor=n.Util.makeHexColor(ie|0,ce|0,oe|0)}const Z=document.createElement("h1");Z.dir=this.titleObj.dir,Z.textContent=this.titleObj.str,j.append(Z);const re=a.PDFDateString.toDateObject(this.modificationDate);if(re){const ie=document.createElement("span");ie.className="popupDate",ie.textContent="{{date}}, {{time}}",ie.dataset.l10nId="annotation_date_string",ie.dataset.l10nArgs=JSON.stringify({date:re.toLocaleDateString(),time:re.toLocaleTimeString()}),j.append(ie)}if((v=this.richText)!==null&&v!==void 0&&v.str&&(!((x=this.contentsObj)!==null&&x!==void 0&&x.str)||this.contentsObj.str===this.richText.str))u.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:j}),j.lastChild.className="richText popupContent";else{const ie=this._formatContents(this.contentsObj);j.append(ie)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ie of this.trigger)ie.addEventListener("click",this._toggle.bind(this)),ie.addEventListener("mouseover",this._show.bind(this,!1)),ie.addEventListener("mouseout",this._hide.bind(this,!1));return j.addEventListener("click",this._hide.bind(this,!0)),D.append(j),D}_formatContents(v){let{str:x,dir:k}=v;const D=document.createElement("p");D.className="popupContent",D.dir=k;const j=x.split(/(?:\r\n?|\n)/);for(let G=0,Z=j.length;G<Z;++G){const re=j[G];D.append(document.createTextNode(re)),G<Z-1&&D.append(document.createElement("br"))}return D}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class L extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0}),this.textContent=v.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const v=document.createElement("div");v.className="annotationTextContent",v.setAttribute("role","comment");for(const x of this.textContent){const k=document.createElement("span");k.textContent=x,v.append(k)}this.container.append(v)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const v=this.data,{width:x,height:k}=w(v.rect),D=this.svgFactory.create(x,k,!0),j=this.svgFactory.createElement("svg:line");return j.setAttribute("x1",v.rect[2]-v.lineCoordinates[0]),j.setAttribute("y1",v.rect[3]-v.lineCoordinates[1]),j.setAttribute("x2",v.rect[2]-v.lineCoordinates[2]),j.setAttribute("y2",v.rect[3]-v.lineCoordinates[3]),j.setAttribute("stroke-width",v.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),D.append(j),this.container.append(D),this._createPopup(j,v),this.container}}class V extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const v=this.data,{width:x,height:k}=w(v.rect),D=this.svgFactory.create(x,k,!0),j=v.borderStyle.width,G=this.svgFactory.createElement("svg:rect");return G.setAttribute("x",j/2),G.setAttribute("y",j/2),G.setAttribute("width",x-j),G.setAttribute("height",k-j),G.setAttribute("stroke-width",j||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),D.append(G),this.container.append(D),this._createPopup(G,v),this.container}}class K extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const v=this.data,{width:x,height:k}=w(v.rect),D=this.svgFactory.create(x,k,!0),j=v.borderStyle.width,G=this.svgFactory.createElement("svg:ellipse");return G.setAttribute("cx",x/2),G.setAttribute("cy",k/2),G.setAttribute("rx",x/2-j/2),G.setAttribute("ry",k/2-j/2),G.setAttribute("stroke-width",j||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),D.append(G),this.container.append(D),this._createPopup(G,v),this.container}}class Y extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const v=this.data,{width:x,height:k}=w(v.rect),D=this.svgFactory.create(x,k,!0);let j=[];for(const Z of v.vertices){const re=Z.x-v.rect[0],ie=v.rect[3]-Z.y;j.push(re+","+ie)}j=j.join(" ");const G=this.svgFactory.createElement(this.svgElementName);return G.setAttribute("points",j),G.setAttribute("stroke-width",v.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),D.append(G),this.container.append(D),this._createPopup(G,v),this.container}}class X extends Y{constructor(v){super(v),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class H extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class W extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const v=this.data,{width:x,height:k}=w(v.rect),D=this.svgFactory.create(x,k,!0);for(const j of v.inkLists){let G=[];for(const re of j){const ie=re.x-v.rect[0],ce=v.rect[3]-re.y;G.push(`${ie},${ce}`)}G=G.join(" ");const Z=this.svgFactory.createElement(this.svgElementName);Z.setAttribute("points",G),Z.setAttribute("stroke-width",v.borderStyle.width||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),this._createPopup(Z,v),D.append(Z)}return this.container.append(D),this.container}}class B extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class N extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class J extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class le extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ye extends S{constructor(v){var x,k,D;const j=!!(v.data.hasPopup||(x=v.data.titleObj)!==null&&x!==void 0&&x.str||(k=v.data.contentsObj)!==null&&k!==void 0&&k.str||(D=v.data.richText)!==null&&D!==void 0&&D.str);super(v,{isRenderable:j,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ce extends S{constructor(v){var x;super(v,{isRenderable:!0});const{filename:k,content:D}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(k),this.content=D,(x=this.linkService.eventBus)===null||x===void 0||x.dispatch("fileattachmentannotation",{source:this,filename:k,content:D})}render(){var v,x;this.container.className="fileAttachmentAnnotation";const k=document.createElement("div");return k.className="popupTriggerArea",k.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((v=this.data.titleObj)!==null&&v!==void 0&&v.str||(x=this.data.contentsObj)!==null&&x!==void 0&&x.str||this.data.richText)&&this._createPopup(k,this.data),this.container.append(k),this.container}_download(){var v;(v=this.downloadManager)===null||v===void 0||v.openOrDownloadData(this.container,this.content,this.filename)}}class q{static render(v){const{annotations:x,div:k,viewport:D,accessibilityManager:j}=v;p(this,q,O).call(this,k,D);let G=0;for(const Z of x){if(Z.annotationType!==n.AnnotationType.POPUP){const{width:ie,height:ce}=w(Z.rect);if(ie<=0||ce<=0)continue}const re=I.create({data:Z,layer:k,page:v.page,viewport:D,linkService:v.linkService,downloadManager:v.downloadManager,imageResourcesPath:v.imageResourcesPath||"",renderForms:v.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:v.annotationStorage||new s.AnnotationStorage,enableScripting:v.enableScripting,hasJSActions:v.hasJSActions,fieldObjects:v.fieldObjects,mouseState:v.mouseState||{isDown:!1}});if(re.isRenderable){const ie=re.render();if(Z.hidden&&(ie.style.visibility="hidden"),Array.isArray(ie))for(const ce of ie)ce.style.zIndex=G++,p(q,q,R).call(q,ce,Z.id,k,j);else ie.style.zIndex=G++,re instanceof A?k.prepend(ie):p(q,q,R).call(q,ie,Z.id,k,j)}}p(this,q,z).call(this,k,v.annotationCanvasMap)}static update(v){const{annotationCanvasMap:x,div:k,viewport:D}=v;p(this,q,O).call(this,k,D),p(this,q,z).call(this,k,x),k.hidden=!1}}e.AnnotationLayer=q;function R($,v,x,k){const D=$.firstChild||$;D.id=`${a.AnnotationPrefix}${v}`,x.append($),k==null||k.moveElementInDOM(x,$,D,!1)}function O($,v){let{width:x,height:k,rotation:D}=v;const{style:j}=$,G=D%180!==0,Z=Math.floor(x)+"px",re=Math.floor(k)+"px";j.width=G?re:Z,j.height=G?Z:re,$.setAttribute("data-main-rotation",D)}function z($,v){if(v){for(const[x,k]of v){const D=$.querySelector(`[data-annotation-id="${x}"]`);if(!D)continue;const{firstChild:j}=D;j?j.nodeName==="CANVAS"?j.replaceWith(k):j.before(k):D.append(k)}v.clear()}}},(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function t(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}class n{static CMYK_G(s){let[o,u,p,h]=s;return["G",1-Math.min(1,.3*o+.59*p+.11*u+h)]}static G_CMYK(s){let[o]=s;return["CMYK",0,0,0,1-o]}static G_RGB(s){let[o]=s;return["RGB",o,o,o]}static G_HTML(s){let[o]=s;const u=t(o);return`#${u}${u}${u}`}static RGB_G(s){let[o,u,p]=s;return["G",.3*o+.59*u+.11*p]}static RGB_HTML(s){let[o,u,p]=s;const h=t(o),f=t(u),E=t(p);return`#${h}${f}${E}`}static T_HTML(){return"#00000000"}static CMYK_RGB(s){let[o,u,p,h]=s;return["RGB",1-Math.min(1,o+h),1-Math.min(1,p+h),1-Math.min(1,u+h)]}static CMYK_HTML(s){const o=this.CMYK_RGB(s).slice(1);return this.RGB_HTML(o)}static RGB_CMYK(s){let[o,u,p]=s;const h=1-o,f=1-u,E=1-p,m=Math.min(h,f,E);return["CMYK",h,f,E,m]}}e.ColorConverters=n},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=t(145);class a{static setupStorage(o,u,p,h,f){const E=h.getValue(u,{value:null});switch(p.name){case"textarea":if(E.value!==null&&(o.textContent=E.value),f==="print")break;o.addEventListener("input",m=>{h.setValue(u,{value:m.target.value})});break;case"input":if(p.attributes.type==="radio"||p.attributes.type==="checkbox"){if(E.value===p.attributes.xfaOn?o.setAttribute("checked",!0):E.value===p.attributes.xfaOff&&o.removeAttribute("checked"),f==="print")break;o.addEventListener("change",m=>{h.setValue(u,{value:m.target.checked?m.target.getAttribute("xfaOn"):m.target.getAttribute("xfaOff")})})}else{if(E.value!==null&&o.setAttribute("value",E.value),f==="print")break;o.addEventListener("input",m=>{h.setValue(u,{value:m.target.value})})}break;case"select":if(E.value!==null)for(const m of p.children)m.attributes.value===E.value&&(m.attributes.selected=!0);o.addEventListener("input",m=>{const w=m.target.options,I=w.selectedIndex===-1?"":w[w.selectedIndex].value;h.setValue(u,{value:I})});break}}static setAttributes(o){let{html:u,element:p,storage:h=null,intent:f,linkService:E}=o;const{attributes:m}=p,w=u instanceof HTMLAnchorElement;m.type==="radio"&&(m.name=`${m.name}-${f}`);for(const[I,S]of Object.entries(m))if(S!=null)switch(I){case"class":S.length&&u.setAttribute(I,S.join(" "));break;case"dataId":break;case"id":u.setAttribute("data-element-id",S);break;case"style":Object.assign(u.style,S);break;case"textContent":u.textContent=S;break;default:(!w||I!=="href"&&I!=="newWindow")&&u.setAttribute(I,S)}w&&E.addLinkAttributes(u,m.href,m.newWindow),h&&m.dataId&&this.setupStorage(u,m.dataId,p,h)}static render(o){const u=o.annotationStorage,p=o.linkService,h=o.xfaHtml,f=o.intent||"display",E=document.createElement(h.name);h.attributes&&this.setAttributes({html:E,element:h,intent:f,linkService:p});const m=[[h,-1,E]],w=o.div;if(w.append(E),o.viewport){const T=`matrix(${o.viewport.transform.join(",")})`;w.style.transform=T}f!=="richText"&&w.setAttribute("class","xfaLayer xfaFont");const I=[];for(;m.length>0;){var S;const[T,F,y]=m.at(-1);if(F+1===T.children.length){m.pop();continue}const b=T.children[++m.at(-1)[1]];if(b===null)continue;const{name:g}=b;if(g==="#text"){const d=document.createTextNode(b.value);I.push(d),y.append(d);continue}let l;if(b!=null&&(S=b.attributes)!==null&&S!==void 0&&S.xmlns?l=document.createElementNS(b.attributes.xmlns,g):l=document.createElement(g),y.append(l),b.attributes&&this.setAttributes({html:l,element:b,storage:u,intent:f,linkService:p}),b.children&&b.children.length>0)m.push([b,-1,l]);else if(b.value){const d=document.createTextNode(b.value);n.XfaText.shouldBuildText(g)&&I.push(d),l.append(d)}}for(const T of w.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))T.setAttribute("readOnly",!0);return{textDivs:I}}static update(o){const u=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=u,o.div.hidden=!1}}e.XfaLayer=a},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=y;var n=t(1),a=t(133);const s=1e5,o=30,u=.8,p=new Map,h=/^\s+$/g;function f(b,g){const l=p.get(b);if(l)return l;g.save(),g.font=`${o}px ${b}`;const d=g.measureText("");let _=d.fontBoundingBoxAscent,A=Math.abs(d.fontBoundingBoxDescent);if(_){g.restore();const L=_/(_+A);return p.set(b,L),L}g.strokeStyle="red",g.clearRect(0,0,o,o),g.strokeText("g",0,0);let C=g.getImageData(0,0,o,o).data;A=0;for(let L=C.length-1-3;L>=0;L-=4)if(C[L]>0){A=Math.ceil(L/4/o);break}g.clearRect(0,0,o,o),g.strokeText("A",0,o),C=g.getImageData(0,0,o,o).data,_=0;for(let L=0,M=C.length;L<M;L+=4)if(C[L]>0){_=o-Math.floor(L/4/o);break}if(g.restore(),_){const L=_/(_+A);return p.set(b,L),L}return p.set(b,u),u}function E(b,g,l,d){const _=document.createElement("span"),A=b._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:g.str!=="",hasEOL:g.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:g.str!=="",hasEOL:g.hasEOL,fontSize:0};b._textDivs.push(_);const C=n.Util.transform(b._viewport.transform,g.transform);let L=Math.atan2(C[1],C[0]);const M=l[g.fontName];M.vertical&&(L+=Math.PI/2);const V=Math.hypot(C[2],C[3]),K=V*f(M.fontFamily,d);let Y,X;L===0?(Y=C[4],X=C[5]-K):(Y=C[4]+K*Math.sin(L),X=C[5]-K*Math.cos(L)),_.style.left=`${Y}px`,_.style.top=`${X}px`,_.style.fontSize=`${V}px`,_.style.fontFamily=M.fontFamily,A.fontSize=V,_.setAttribute("role","presentation"),_.textContent=g.str,_.dir=g.dir,b._fontInspectorEnabled&&(_.dataset.fontName=g.fontName),L!==0&&(A.angle=L*(180/Math.PI));let H=!1;if(g.str.length>1||b._enhanceTextSelection&&h.test(g.str))H=!0;else if(g.str!==" "&&g.transform[0]!==g.transform[3]){const W=Math.abs(g.transform[0]),B=Math.abs(g.transform[3]);W!==B&&Math.max(W,B)/Math.min(W,B)>1.5&&(H=!0)}if(H&&(M.vertical?A.canvasWidth=g.height*b._viewport.scale:A.canvasWidth=g.width*b._viewport.scale),b._textDivProperties.set(_,A),b._textContentStream&&b._layoutText(_),b._enhanceTextSelection&&A.hasText){let W=1,B=0;L!==0&&(W=Math.cos(L),B=Math.sin(L));const N=(M.vertical?g.height:g.width)*b._viewport.scale,J=V;let le,ye;L!==0?(le=[W,B,-B,W,Y,X],ye=n.Util.getAxialAlignedBoundingBox([0,0,N,J],le)):ye=[Y,X,Y+N,X+J],b._bounds.push({left:ye[0],top:ye[1],right:ye[2],bottom:ye[3],div:_,size:[N,J],m:le})}}function m(b){if(b._canceled)return;const g=b._textDivs,l=b._capability,d=g.length;if(d>s){b._renderingDone=!0,l.resolve();return}if(!b._textContentStream)for(let _=0;_<d;_++)b._layoutText(g[_]);b._renderingDone=!0,l.resolve()}function w(b,g,l){let d=0;for(let _=0;_<l;_++){const A=b[g++];A>0&&(d=d?Math.min(A,d):A)}return d}function I(b){const g=b._bounds,l=b._viewport,d=S(l.width,l.height,g);for(let _=0;_<d.length;_++){const A=g[_].div,C=b._textDivProperties.get(A);if(C.angle===0){C.paddingLeft=g[_].left-d[_].left,C.paddingTop=g[_].top-d[_].top,C.paddingRight=d[_].right-g[_].right,C.paddingBottom=d[_].bottom-g[_].bottom,b._textDivProperties.set(A,C);continue}const L=d[_],M=g[_],V=M.m,K=V[0],Y=V[1],X=[[0,0],[0,M.size[1]],[M.size[0],0],M.size],H=new Float64Array(64);for(let B=0,N=X.length;B<N;B++){const J=n.Util.applyTransform(X[B],V);H[B+0]=K&&(L.left-J[0])/K,H[B+4]=Y&&(L.top-J[1])/Y,H[B+8]=K&&(L.right-J[0])/K,H[B+12]=Y&&(L.bottom-J[1])/Y,H[B+16]=Y&&(L.left-J[0])/-Y,H[B+20]=K&&(L.top-J[1])/K,H[B+24]=Y&&(L.right-J[0])/-Y,H[B+28]=K&&(L.bottom-J[1])/K,H[B+32]=K&&(L.left-J[0])/-K,H[B+36]=Y&&(L.top-J[1])/-Y,H[B+40]=K&&(L.right-J[0])/-K,H[B+44]=Y&&(L.bottom-J[1])/-Y,H[B+48]=Y&&(L.left-J[0])/Y,H[B+52]=K&&(L.top-J[1])/-K,H[B+56]=Y&&(L.right-J[0])/Y,H[B+60]=K&&(L.bottom-J[1])/-K}const W=1+Math.min(Math.abs(K),Math.abs(Y));C.paddingLeft=w(H,32,16)/W,C.paddingTop=w(H,48,16)/W,C.paddingRight=w(H,0,16)/W,C.paddingBottom=w(H,16,16)/W,b._textDivProperties.set(A,C)}}function S(b,g,l){const d=l.map(function(A,C){return{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom,index:C,x1New:void 0,x2New:void 0}});T(b,d);const _=new Array(l.length);for(const A of d){const C=A.index;_[C]={left:A.x1New,top:0,right:A.x2New,bottom:0}}l.map(function(A,C){const L=_[C],M=d[C];M.x1=A.top,M.y1=b-L.right,M.x2=A.bottom,M.y2=b-L.left,M.index=C,M.x1New=void 0,M.x2New=void 0}),T(g,d);for(const A of d){const C=A.index;_[C].top=A.x1New,_[C].bottom=A.x2New}return _}function T(b,g){g.sort(function(_,A){return _.x1-A.x1||_.index-A.index});const d=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const _ of g){let A=0;for(;A<d.length&&d[A].end<=_.y1;)A++;let C=d.length-1;for(;C>=0&&d[C].start>=_.y2;)C--;let L,M,V,K,Y=-1/0;for(V=A;V<=C;V++){L=d[V],M=L.boundary;let W;M.x2>_.x1?W=M.index>_.index?M.x1New:_.x1:M.x2New===void 0?W=(M.x2+_.x1)/2:W=M.x2New,W>Y&&(Y=W)}for(_.x1New=Y,V=A;V<=C;V++)L=d[V],M=L.boundary,M.x2New===void 0?M.x2>_.x1?M.index>_.index&&(M.x2New=M.x2):M.x2New=Y:M.x2New>Y&&(M.x2New=Math.max(Y,M.x2));const X=[];let H=null;for(V=A;V<=C;V++){L=d[V],M=L.boundary;const W=M.x2>_.x2?M:_;H===W?X.at(-1).end=L.end:(X.push({start:L.start,end:L.end,boundary:W}),H=W)}for(d[A].start<_.y1&&(X[0].start=_.y1,X.unshift({start:d[A].start,end:_.y1,boundary:d[A].boundary})),_.y2<d[C].end&&(X.at(-1).end=_.y2,X.push({start:_.y2,end:d[C].end,boundary:d[C].boundary})),V=A;V<=C;V++){if(L=d[V],M=L.boundary,M.x2New!==void 0)continue;let W=!1;for(K=A-1;!W&&K>=0&&d[K].start>=M.y1;K--)W=d[K].boundary===M;for(K=C+1;!W&&K<d.length&&d[K].end<=M.y2;K++)W=d[K].boundary===M;for(K=0;!W&&K<X.length;K++)W=X[K].boundary===M;W||(M.x2New=Y)}Array.prototype.splice.apply(d,[A,C-A+1,...X])}for(const _ of d){const A=_.boundary;A.x2New===void 0&&(A.x2New=Math.max(b,A.x2))}}class F{constructor(g){var l;let{textContent:d,textContentStream:_,container:A,viewport:C,textDivs:L,textContentItemsStr:M,enhanceTextSelection:V}=g;V&&(0,a.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=d,this._textContentStream=_,this._container=A,this._document=A.ownerDocument,this._viewport=C,this._textDivs=L||[],this._textContentItemsStr=M||[],this._enhanceTextSelection=!!V,this._fontInspectorEnabled=!!((l=globalThis.FontInspector)!==null&&l!==void 0&&l.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(g,l){for(let d=0,_=g.length;d<_;d++){if(g[d].str===void 0){if(g[d].type==="beginMarkedContentProps"||g[d].type==="beginMarkedContent"){const A=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),g[d].id!==null&&this._container.setAttribute("id",`${g[d].id}`),A.append(this._container)}else g[d].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(g[d].str),E(this,g[d],l,this._layoutTextCtx)}}_layoutText(g){const l=this._textDivProperties.get(g);let d="";if(l.canvasWidth!==0&&l.hasText){const{fontFamily:_}=g.style,{fontSize:A}=l;(A!==this._layoutTextLastFontSize||_!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${A*this._devicePixelRatio}px ${_}`,this._layoutTextLastFontSize=A,this._layoutTextLastFontFamily=_);const{width:C}=this._layoutTextCtx.measureText(g.textContent);if(C>0){const L=this._devicePixelRatio*l.canvasWidth/C;this._enhanceTextSelection&&(l.scale=L),d=`scaleX(${L})`}}if(l.angle!==0&&(d=`rotate(${l.angle}deg) ${d}`),d.length>0&&(this._enhanceTextSelection&&(l.originalTransform=d),g.style.transform=d),l.hasText&&this._container.append(g),l.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this._container.append(_)}}_render(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const l=(0,n.createPromiseCapability)();let d=Object.create(null);const _=this._document.createElement("canvas");if(_.height=_.width=o,this._layoutTextCtx=_.getContext("2d",{alpha:!1}),this._textContent){const A=this._textContent.items,C=this._textContent.styles;this._processItems(A,C),l.resolve()}else if(this._textContentStream){const A=()=>{this._reader.read().then(C=>{let{value:L,done:M}=C;if(M){l.resolve();return}Object.assign(d,L.styles),this._processItems(L.items,d),A()},l.reject)};this._reader=this._textContentStream.getReader(),A()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');l.promise.then(()=>{d=null,g?this._renderTimer=setTimeout(()=>{m(this),this._renderTimer=null},g):m(this)},this._capability.reject)}expandTextDivs(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(I(this),this._bounds=null);const l=[],d=[];for(let _=0,A=this._textDivs.length;_<A;_++){const C=this._textDivs[_],L=this._textDivProperties.get(C);L.hasText&&(g?(l.length=0,d.length=0,L.originalTransform&&l.push(L.originalTransform),L.paddingTop>0?(d.push(`${L.paddingTop}px`),l.push(`translateY(${-L.paddingTop}px)`)):d.push(0),L.paddingRight>0?d.push(`${L.paddingRight/L.scale}px`):d.push(0),L.paddingBottom>0?d.push(`${L.paddingBottom}px`):d.push(0),L.paddingLeft>0?(d.push(`${L.paddingLeft/L.scale}px`),l.push(`translateX(${-L.paddingLeft/L.scale}px)`)):d.push(0),C.style.padding=d.join(" "),l.length&&(C.style.transform=l.join(" "))):(C.style.padding=null,C.style.transform=L.originalTransform))}}}e.TextLayerRenderTask=F;function y(b){const g=new F({textContent:b.textContent,textContentStream:b.textContentStream,container:b.container,viewport:b.viewport,textDivs:b.textDivs,textContentItemsStr:b.textContentItemsStr,enhanceTextSelection:b.enhanceTextSelection});return g._render(b.timeout),g}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=t(133),a=t(1),s=t(3);let o=class{constructor(){(0,a.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=o;{let S=function(l){let d=[];const _=[];for(const A of l){if(A.fn==="save"){d.push({fnId:92,fn:"group",items:[]}),_.push(d),d=d.at(-1).items;continue}A.fn==="restore"?d=_.pop():d.push(A)}return d},T=function(l){if(Number.isInteger(l))return l.toString();const d=l.toFixed(10);let _=d.length-1;if(d[_]!=="0")return d;do _--;while(d[_]==="0");return d.substring(0,d[_]==="."?_:_+1)},F=function(l){if(l[4]===0&&l[5]===0){if(l[1]===0&&l[2]===0)return l[0]===1&&l[3]===1?"":`scale(${T(l[0])} ${T(l[3])})`;if(l[0]===l[3]&&l[1]===-l[2]){const d=Math.acos(l[0])*180/Math.PI;return`rotate(${T(d)})`}}else if(l[0]===1&&l[1]===0&&l[2]===0&&l[3]===1)return`translate(${T(l[4])} ${T(l[5])})`;return`matrix(${T(l[0])} ${T(l[1])} ${T(l[2])} ${T(l[3])} ${T(l[4])} ${T(l[5])})`};const u={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/1999/xlink",f=["butt","round","square"],E=["miter","round","bevel"],m=function(l){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!_)return URL.createObjectURL(new Blob([l],{type:d}));const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${d};base64,`;for(let L=0,M=l.length;L<M;L+=3){const V=l[L]&255,K=l[L+1]&255,Y=l[L+2]&255,X=V>>2,H=(V&3)<<4|K>>4,W=L+1<M?(K&15)<<2|Y>>6:64,B=L+2<M?Y&63:64;C+=A[X]+A[H]+A[W]+A[B]}return C},w=function(){const l=new Uint8Array([137,80,78,71,13,10,26,10]),d=12,_=new Int32Array(256);for(let Y=0;Y<256;Y++){let X=Y;for(let H=0;H<8;H++)X&1?X=3988292384^X>>1&2147483647:X=X>>1&2147483647;_[Y]=X}function A(Y,X,H){let W=-1;for(let B=X;B<H;B++){const N=(W^Y[B])&255,J=_[N];W=W>>>8^J}return W^-1}function C(Y,X,H,W){let B=W;const N=X.length;H[B]=N>>24&255,H[B+1]=N>>16&255,H[B+2]=N>>8&255,H[B+3]=N&255,B+=4,H[B]=Y.charCodeAt(0)&255,H[B+1]=Y.charCodeAt(1)&255,H[B+2]=Y.charCodeAt(2)&255,H[B+3]=Y.charCodeAt(3)&255,B+=4,H.set(X,B),B+=X.length;const J=A(H,W+4,B);H[B]=J>>24&255,H[B+1]=J>>16&255,H[B+2]=J>>8&255,H[B+3]=J&255}function L(Y,X,H){let W=1,B=0;for(let N=X;N<H;++N)W=(W+(Y[N]&255))%65521,B=(B+W)%65521;return B<<16|W}function M(Y){if(!s.isNodeJS)return V(Y);try{let X;parseInt(process.versions.node)>=8?X=Y:X=Buffer.from(Y);const H=require$$7.deflateSync(X,{level:9});return H instanceof Uint8Array?H:new Uint8Array(H)}catch(X){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return V(Y)}function V(Y){let X=Y.length;const H=65535,W=Math.ceil(X/H),B=new Uint8Array(2+X+W*5+4);let N=0;B[N++]=120,B[N++]=156;let J=0;for(;X>H;)B[N++]=0,B[N++]=255,B[N++]=255,B[N++]=0,B[N++]=0,B.set(Y.subarray(J,J+H),N),N+=H,J+=H,X-=H;B[N++]=1,B[N++]=X&255,B[N++]=X>>8&255,B[N++]=~X&65535&255,B[N++]=(~X&65535)>>8&255,B.set(Y.subarray(J),N),N+=Y.length-J;const le=L(Y,0,Y.length);return B[N++]=le>>24&255,B[N++]=le>>16&255,B[N++]=le>>8&255,B[N++]=le&255,B}function K(Y,X,H,W){const B=Y.width,N=Y.height;let J,le,ye;const Ce=Y.data;switch(X){case a.ImageKind.GRAYSCALE_1BPP:le=0,J=1,ye=B+7>>3;break;case a.ImageKind.RGB_24BPP:le=2,J=8,ye=B*3;break;case a.ImageKind.RGBA_32BPP:le=6,J=8,ye=B*4;break;default:throw new Error("invalid format")}const q=new Uint8Array((1+ye)*N);let R=0,O=0;for(let D=0;D<N;++D)q[R++]=0,q.set(Ce.subarray(O,O+ye),R),O+=ye,R+=ye;if(X===a.ImageKind.GRAYSCALE_1BPP&&W){R=0;for(let D=0;D<N;D++){R++;for(let j=0;j<ye;j++)q[R++]^=255}}const z=new Uint8Array([B>>24&255,B>>16&255,B>>8&255,B&255,N>>24&255,N>>16&255,N>>8&255,N&255,J,le,0,0,0]),$=M(q),v=l.length+d*3+z.length+$.length,x=new Uint8Array(v);let k=0;return x.set(l,k),k+=l.length,C("IHDR",z,x,k),k+=d+z.length,C("IDATA",$,x,k),k+=d+$.length,C("IEND",new Uint8Array(0),x,k),m(x,"image/png",H)}return function(X,H,W){const B=X.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:X.kind;return K(X,B,H,W)}}();class I{constructor(){this.fontSizeScale=1,this.fontWeight=u.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=u.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(d,_){this.x=d,this.y=_}}let y=0,b=0,g=0;e.SVGGraphics=o=class{constructor(l,d){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new I,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=l,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(const A in a.OPS)this._operatorIdMapping[a.OPS[A]]=A}save(){this.transformStack.push(this.transformMatrix);const l=this.current;this.extraStack.push(l),this.current=l.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(l){this.save(),this.executeOpTree(l),this.restore()}loadDependencies(l){const d=l.fnArray,_=l.argsArray;for(let A=0,C=d.length;A<C;A++)if(d[A]===a.OPS.dependency)for(const L of _[A]){const M=L.startsWith("g_")?this.commonObjs:this.objs,V=new Promise(K=>{M.get(L,K)});this.current.dependencies.push(V)}return Promise.all(this.current.dependencies)}transform(l,d,_,A,C,L){const M=[l,d,_,A,C,L];this.transformMatrix=a.Util.transform(this.transformMatrix,M),this.tgrp=null}getSVG(l,d){this.viewport=d;const _=this._initialize(d);return this.loadDependencies(l).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(l)),_))}convertOpList(l){const d=this._operatorIdMapping,_=l.argsArray,A=l.fnArray,C=[];for(let L=0,M=A.length;L<M;L++){const V=A[L];C.push({fnId:V,fn:d[V],args:_[L]})}return S(C)}executeOpTree(l){for(const d of l){const _=d.fn,A=d.fnId,C=d.args;switch(A|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(C);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case a.OPS.setFont:this.setFont(C);break;case a.OPS.showText:this.showText(C[0]);break;case a.OPS.showSpacedText:this.showText(C[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(C[0],C[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case a.OPS.setHScale:this.setHScale(C[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case a.OPS.setTextRise:this.setTextRise(C[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case a.OPS.setLineWidth:this.setLineWidth(C[0]);break;case a.OPS.setLineJoin:this.setLineJoin(C[0]);break;case a.OPS.setLineCap:this.setLineCap(C[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case a.OPS.setFillColorN:this.setFillColorN(C);break;case a.OPS.shadingFill:this.shadingFill(C[0]);break;case a.OPS.setDash:this.setDash(C[0],C[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case a.OPS.setFlatness:this.setFlatness(C[0]);break;case a.OPS.setGState:this.setGState(C[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case a.OPS.constructPath:this.constructPath(C[0],C[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,a.warn)(`Unimplemented operator ${_}`);break}}}setWordSpacing(l){this.current.wordSpacing=l}setCharSpacing(l){this.current.charSpacing=l}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(l,d,_,A,C,L){const M=this.current;M.textMatrix=M.lineMatrix=[l,d,_,A,C,L],M.textMatrixScale=Math.hypot(l,d),M.x=M.lineX=0,M.y=M.lineY=0,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${T(M.fontSize)}px`),M.tspan.setAttributeNS(null,"y",T(-M.y)),M.txtElement=this.svgFactory.createElement("svg:text"),M.txtElement.append(M.tspan)}beginText(){const l=this.current;l.x=l.lineX=0,l.y=l.lineY=0,l.textMatrix=a.IDENTITY_MATRIX,l.lineMatrix=a.IDENTITY_MATRIX,l.textMatrixScale=1,l.tspan=this.svgFactory.createElement("svg:tspan"),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtgrp=this.svgFactory.createElement("svg:g"),l.xcoords=[],l.ycoords=[]}moveText(l,d){const _=this.current;_.x=_.lineX+=l,_.y=_.lineY+=d,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${T(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",T(-_.y))}showText(l){const d=this.current,_=d.font,A=d.fontSize;if(A===0)return;const C=d.fontSizeScale,L=d.charSpacing,M=d.wordSpacing,V=d.fontDirection,K=d.textHScale*V,Y=_.vertical,X=Y?1:-1,H=_.defaultVMetrics,W=A*d.fontMatrix[0];let B=0;for(const le of l){if(le===null){B+=V*M;continue}else if(typeof le=="number"){B+=X*le*A/1e3;continue}const ye=(le.isSpace?M:0)+L,Ce=le.fontChar;let q,R,O=le.width;if(Y){let $;const v=le.vmetric||H;$=le.vmetric?v[1]:O*.5,$=-$*W;const x=v[2]*W;O=v?-v[0]:O,q=$/C,R=(B+x)/C}else q=B/C,R=0;(le.isInFont||_.missingFile)&&(d.xcoords.push(d.x+q),Y&&d.ycoords.push(-d.y+R),d.tspan.textContent+=Ce);let z;Y?z=O*W-ye*V:z=O*W+ye*V,B+=z}d.tspan.setAttributeNS(null,"x",d.xcoords.map(T).join(" ")),Y?d.tspan.setAttributeNS(null,"y",d.ycoords.map(T).join(" ")):d.tspan.setAttributeNS(null,"y",T(-d.y)),Y?d.y-=B:d.x+=B*K,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${T(d.fontSize)}px`),d.fontStyle!==u.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==u.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const N=d.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(N===a.TextRenderingMode.FILL||N===a.TextRenderingMode.FILL_STROKE?(d.fillColor!==u.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),N===a.TextRenderingMode.STROKE||N===a.TextRenderingMode.FILL_STROKE){const le=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,le)}let J=d.textMatrix;d.textRise!==0&&(J=J.slice(),J[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${F(J)} scale(${T(K)}, -1)`),d.txtElement.setAttributeNS(p,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(l,d){this.setLeading(-d),this.moveText(l,d)}addFontStyle(l){if(!l.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=m(l.data,l.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${l.loadedName}"; src: url(${d}); }
`}setFont(l){const d=this.current,_=this.commonObjs.get(l[0]);let A=l[1];d.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),d.fontMatrix=_.fontMatrix||a.FONT_IDENTITY_MATRIX;let C="normal";_.black?C="900":_.bold&&(C="bold");const L=_.italic?"italic":"normal";A<0?(A=-A,d.fontDirection=-1):d.fontDirection=1,d.fontSize=A,d.fontFamily=_.loadedName,d.fontWeight=C,d.fontStyle=L,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",T(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var l;const d=this.current;d.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&(l=d.txtElement)!==null&&l!==void 0&&l.hasChildNodes()&&(d.element=d.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(l){l>0&&(this.current.lineWidth=l)}setLineCap(l){this.current.lineCap=f[l]}setLineJoin(l){this.current.lineJoin=E[l]}setMiterLimit(l){this.current.miterLimit=l}setStrokeAlpha(l){this.current.strokeAlpha=l}setStrokeRGBColor(l,d,_){this.current.strokeColor=a.Util.makeHexColor(l,d,_)}setFillAlpha(l){this.current.fillAlpha=l}setFillRGBColor(l,d,_){this.current.fillColor=a.Util.makeHexColor(l,d,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(l){this.current.strokeColor=this._makeColorN_Pattern(l)}setFillColorN(l){this.current.fillColor=this._makeColorN_Pattern(l)}shadingFill(l){const d=this.viewport.width,_=this.viewport.height,A=a.Util.inverseTransform(this.transformMatrix),C=a.Util.applyTransform([0,0],A),L=a.Util.applyTransform([0,_],A),M=a.Util.applyTransform([d,0],A),V=a.Util.applyTransform([d,_],A),K=Math.min(C[0],L[0],M[0],V[0]),Y=Math.min(C[1],L[1],M[1],V[1]),X=Math.max(C[0],L[0],M[0],V[0]),H=Math.max(C[1],L[1],M[1],V[1]),W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x",K),W.setAttributeNS(null,"y",Y),W.setAttributeNS(null,"width",X-K),W.setAttributeNS(null,"height",H-Y),W.setAttributeNS(null,"fill",this._makeShadingPattern(l)),this.current.fillAlpha<1&&W.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(W)}_makeColorN_Pattern(l){return l[0]==="TilingPattern"?this._makeTilingPattern(l):this._makeShadingPattern(l)}_makeTilingPattern(l){const d=l[1],_=l[2],A=l[3]||a.IDENTITY_MATRIX,[C,L,M,V]=l[4],K=l[5],Y=l[6],X=l[7],H=`shading${g++}`,[W,B,N,J]=a.Util.normalizeRect([...a.Util.applyTransform([C,L],A),...a.Util.applyTransform([M,V],A)]),[le,ye]=a.Util.singularValueDecompose2dScale(A),Ce=K*le,q=Y*ye,R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",H),R.setAttributeNS(null,"patternUnits","userSpaceOnUse"),R.setAttributeNS(null,"width",Ce),R.setAttributeNS(null,"height",q),R.setAttributeNS(null,"x",`${W}`),R.setAttributeNS(null,"y",`${B}`);const O=this.svg,z=this.transformMatrix,$=this.current.fillColor,v=this.current.strokeColor,x=this.svgFactory.create(N-W,J-B);if(this.svg=x,this.transformMatrix=A,X===2){const k=a.Util.makeHexColor(...d);this.current.fillColor=k,this.current.strokeColor=k}return this.executeOpTree(this.convertOpList(_)),this.svg=O,this.transformMatrix=z,this.current.fillColor=$,this.current.strokeColor=v,R.append(x.childNodes[0]),this.defs.append(R),`url(#${H})`}_makeShadingPattern(l){switch(typeof l=="string"&&(l=this.objs.get(l)),l[0]){case"RadialAxial":const d=`shading${g++}`,_=l[3];let A;switch(l[1]){case"axial":const C=l[4],L=l[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",d),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",C[0]),A.setAttributeNS(null,"y1",C[1]),A.setAttributeNS(null,"x2",L[0]),A.setAttributeNS(null,"y2",L[1]);break;case"radial":const M=l[4],V=l[5],K=l[6],Y=l[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",d),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",V[0]),A.setAttributeNS(null,"cy",V[1]),A.setAttributeNS(null,"r",Y),A.setAttributeNS(null,"fx",M[0]),A.setAttributeNS(null,"fy",M[1]),A.setAttributeNS(null,"fr",K);break;default:throw new Error(`Unknown RadialAxial type: ${l[1]}`)}for(const C of _){const L=this.svgFactory.createElement("svg:stop");L.setAttributeNS(null,"offset",C[0]),L.setAttributeNS(null,"stop-color",C[1]),A.append(L)}return this.defs.append(A),`url(#${d})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${l[0]}`)}}setDash(l,d){this.current.dashArray=l,this.current.dashPhase=d}constructPath(l,d){const _=this.current;let A=_.x,C=_.y,L=[],M=0;for(const V of l)switch(V|0){case a.OPS.rectangle:A=d[M++],C=d[M++];const K=d[M++],Y=d[M++],X=A+K,H=C+Y;L.push("M",T(A),T(C),"L",T(X),T(C),"L",T(X),T(H),"L",T(A),T(H),"Z");break;case a.OPS.moveTo:A=d[M++],C=d[M++],L.push("M",T(A),T(C));break;case a.OPS.lineTo:A=d[M++],C=d[M++],L.push("L",T(A),T(C));break;case a.OPS.curveTo:A=d[M+4],C=d[M+5],L.push("C",T(d[M]),T(d[M+1]),T(d[M+2]),T(d[M+3]),T(A),T(C)),M+=6;break;case a.OPS.curveTo2:L.push("C",T(A),T(C),T(d[M]),T(d[M+1]),T(d[M+2]),T(d[M+3])),A=d[M+2],C=d[M+3],M+=4;break;case a.OPS.curveTo3:A=d[M+2],C=d[M+3],L.push("C",T(d[M]),T(d[M+1]),T(A),T(C),T(A),T(C)),M+=4;break;case a.OPS.closePath:L.push("Z");break}L=L.join(" "),_.path&&l.length>0&&l[0]!==a.OPS.rectangle&&l[0]!==a.OPS.moveTo?L=_.path.getAttributeNS(null,"d")+L:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(_.path)),_.path.setAttributeNS(null,"d",L),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(A,C)}endPath(){const l=this.current;if(l.path=null,!this.pendingClip)return;if(!l.element){this.pendingClip=null;return}const d=`clippath${y++}`,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",d),_.setAttributeNS(null,"transform",F(this.transformMatrix));const A=l.element.cloneNode(!0);if(this.pendingClip==="evenodd"?A.setAttributeNS(null,"clip-rule","evenodd"):A.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,_.append(A),this.defs.append(_),l.activeClipUrl){l.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;_.setAttributeNS(null,"clip-path",l.activeClipUrl)}l.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(l){this.pendingClip=l}closePath(){const l=this.current;if(l.path){const d=`${l.path.getAttributeNS(null,"d")}Z`;l.path.setAttributeNS(null,"d",d)}}setLeading(l){this.current.leading=-l}setTextRise(l){this.current.textRise=l}setTextRenderingMode(l){this.current.textRenderingMode=l}setHScale(l){this.current.textHScale=l/100}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[d,_]of l)switch(d){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,a.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const l=this.current;l.element&&(l.element.setAttributeNS(null,"fill",l.fillColor),l.element.setAttributeNS(null,"fill-opacity",l.fillAlpha),this.endPath())}stroke(){const l=this.current;l.element&&(this._setStrokeAttributes(l.element),l.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(l){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const _=this.current;let A=_.dashArray;d!==1&&A.length>0&&(A=A.map(function(C){return d*C})),l.setAttributeNS(null,"stroke",_.strokeColor),l.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),l.setAttributeNS(null,"stroke-miterlimit",T(_.miterLimit)),l.setAttributeNS(null,"stroke-linecap",_.lineCap),l.setAttributeNS(null,"stroke-linejoin",_.lineJoin),l.setAttributeNS(null,"stroke-width",T(d*_.lineWidth)+"px"),l.setAttributeNS(null,"stroke-dasharray",A.map(T).join(" ")),l.setAttributeNS(null,"stroke-dashoffset",T(d*_.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width","1px"),l.setAttributeNS(null,"height","1px"),l.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(l)}paintImageXObject(l){const d=l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l);if(!d){(0,a.warn)(`Dependent image with object ID ${l} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(l,d){const _=l.width,A=l.height,C=w(l,this.forceDataSchema,!!d),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",T(_)),L.setAttributeNS(null,"height",T(A)),this.current.element=L,this.clip("nonzero");const M=this.svgFactory.createElement("svg:image");M.setAttributeNS(h,"xlink:href",C),M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y",T(-A)),M.setAttributeNS(null,"width",T(_)+"px"),M.setAttributeNS(null,"height",T(A)+"px"),M.setAttributeNS(null,"transform",`scale(${T(1/_)} ${T(-1/A)})`),d?d.append(M):this._ensureTransformGroup().append(M)}paintImageMaskXObject(l){const d=this.current,_=l.width,A=l.height,C=d.fillColor;d.maskId=`mask${b++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",d.maskId);const M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",T(_)),M.setAttributeNS(null,"height",T(A)),M.setAttributeNS(null,"fill",C),M.setAttributeNS(null,"mask",`url(#${d.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(M),this.paintInlineImageXObject(l,L)}paintFormXObjectBegin(l,d){if(Array.isArray(l)&&l.length===6&&this.transform(l[0],l[1],l[2],l[3],l[4],l[5]),d){const _=d[2]-d[0],A=d[3]-d[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",d[0]),C.setAttributeNS(null,"y",d[1]),C.setAttributeNS(null,"width",T(_)),C.setAttributeNS(null,"height",T(A)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(l){const d=this.svgFactory.create(l.width,l.height),_=this.svgFactory.createElement("svg:defs");d.append(_),this.defs=_;const A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",F(l.transform)),d.append(A),this.svg=A,d}_ensureClipGroup(){if(!this.current.clipGroup){const l=this.svgFactory.createElement("svg:g");l.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(l),this.current.clipGroup=l}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",F(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=t(1),a=t(158);const s=require$$7,o=require$$7,u=require$$7,p=require$$7,h=/^file:\/\/\/[a-zA-Z]:\//;function f(b){const g=p.parse(b);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(b)?p.parse(`file:///${b}`):(g.host||(g.protocol="file:"),g)}class E{constructor(g){this.source=g,this.url=f(g.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g,l;return(g=(l=this._fullRequestReader)===null||l===void 0?void 0:l._loaded)!==null&&g!==void 0?g:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new F(this):new S(this),this._fullRequestReader}getRangeReader(g,l){if(l<=this._progressiveDataLength)return null;const d=this.isFsUrl?new y(this,g,l):new T(this,g,l);return this._rangeRequestReaders.push(d),d}cancelAllRequests(g){this._fullRequestReader&&this._fullRequestReader.cancel(g);for(const l of this._rangeRequestReaders.slice(0))l.cancel(g)}}e.PDFNodeStream=E;class m{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const l=g.source;this._contentLength=l.length,this._loaded=0,this._filename=null,this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=g.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",l=>{this._error(l)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const l=g.source;this._isStreamingSupported=!l.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=g.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",l=>{this._error(l)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function I(b,g){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:g}}class S extends m{constructor(g){super(g);const l=d=>{if(d.statusCode===404){const L=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(d);const _=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:A,suggestedLength:C}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=C||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(_)};this._request=null,this._url.protocol==="http:"?this._request=o.request(I(this._url,g.httpHeaders),l):this._request=u.request(I(this._url,g.httpHeaders),l),this._request.on("error",d=>{this._storedError=d,this._headersCapability.reject(d)}),this._request.end()}}class T extends w{constructor(g,l,d){super(g),this._httpHeaders={};for(const A in g.httpHeaders){const C=g.httpHeaders[A];typeof C>"u"||(this._httpHeaders[A]=C)}this._httpHeaders.Range=`bytes=${l}-${d-1}`;const _=A=>{if(A.statusCode===404){const C=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(A)};this._request=null,this._url.protocol==="http:"?this._request=o.request(I(this._url,this._httpHeaders),_):this._request=u.request(I(this._url,this._httpHeaders),_),this._request.on("error",A=>{this._storedError=A}),this._request.end()}}class F extends m{constructor(g){super(g);let l=decodeURIComponent(this._url.path);h.test(this._url.href)&&(l=l.replace(/^\//,"")),s.lstat(l,(d,_)=>{if(d){d.code==="ENOENT"&&(d=new n.MissingPDFException(`Missing PDF "${l}".`)),this._storedError=d,this._headersCapability.reject(d);return}this._contentLength=_.size,this._setReadableStream(s.createReadStream(l)),this._headersCapability.resolve()})}}class y extends w{constructor(g,l,d){super(g);let _=decodeURIComponent(this._url.path);h.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(s.createReadStream(_,{start:l,end:d-1}))}}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=p,e.extractFilenameFromHeader=u,e.validateRangeRequestCapabilities=o,e.validateResponseStatus=h;var n=t(1),a=t(159),s=t(133);function o(f){let{getResponseHeader:E,isHttp:m,rangeChunkSize:w,disableRange:I}=f;const S={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(E("Content-Length"),10);return!Number.isInteger(T)||(S.suggestedLength=T,T<=2*w)||I||!m||E("Accept-Ranges")!=="bytes"||(E("Content-Encoding")||"identity")!=="identity"||(S.allowRangeRequests=!0),S}function u(f){const E=f("Content-Disposition");if(E){let m=(0,a.getFilenameFromContentDispositionHeader)(E);if(m.includes("%"))try{m=decodeURIComponent(m)}catch{}if((0,s.isPdfFile)(m))return m}return null}function p(f,E){return f===404||f===0&&E.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+E+'".'):new n.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${E}".`,f)}function h(f){return f===200||f===206}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=a;var n=t(1);function a(s){let o=!0,u=p("filename\\*","i").exec(s);if(u){u=u[1];let S=m(u);return S=unescape(S),S=w(S),S=I(S),f(S)}if(u=E(s),u){const S=I(u);return f(S)}if(u=p("filename","i").exec(s),u){u=u[1];let S=m(u);return S=I(S),f(S)}function p(S,T){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',T)}function h(S,T){if(S){if(!/^[\x00-\xFF]+$/.test(T))return T;try{const F=new TextDecoder(S,{fatal:!0}),y=(0,n.stringToBytes)(T);T=F.decode(y),o=!1}catch{}}return T}function f(S){return o&&/[\x80-\xff]/.test(S)&&(S=h("utf-8",S),o&&(S=h("iso-8859-1",S))),S}function E(S){const T=[];let F;const y=p("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(F=y.exec(S))!==null;){let[,g,l,d]=F;if(g=parseInt(g,10),g in T){if(g===0)break;continue}T[g]=[l,d]}const b=[];for(let g=0;g<T.length&&g in T;++g){let[l,d]=T[g];d=m(d),l&&(d=unescape(d),g===0&&(d=w(d))),b.push(d)}return b.join("")}function m(S){if(S.startsWith('"')){const T=S.slice(1).split('\\"');for(let F=0;F<T.length;++F){const y=T[F].indexOf('"');y!==-1&&(T[F]=T[F].slice(0,y),T.length=F+1),T[F]=T[F].replace(/\\(.)/g,"$1")}S=T.join('"')}return S}function w(S){const T=S.indexOf("'");if(T===-1)return S;const F=S.slice(0,T),b=S.slice(T+1).replace(/^[^']*'/,"");return h(F,b)}function I(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(T,F,y,b){if(y==="q"||y==="Q")return b=b.replace(/_/g," "),b=b.replace(/=([0-9a-fA-F]{2})/g,function(g,l){return String.fromCharCode(parseInt(l,16))}),h(F,b);try{b=atob(b)}catch{}return h(F,b)})}return""}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=t(1),a=t(158);const s=200,o=206;function u(m){const w=m.response;return typeof w!="string"?w:(0,n.stringToBytes)(w).buffer}class p{constructor(w){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=w,this.isHttp=/^https?:/i.test(w),this.httpHeaders=this.isHttp&&I.httpHeaders||Object.create(null),this.withCredentials=I.withCredentials||!1,this.getXhr=I.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(w,I,S){const T={begin:w,end:I};for(const F in S)T[F]=S[F];return this.request(T)}requestFull(w){return this.request(w)}request(w){const I=this.getXhr(),S=this.currXhrId++,T=this.pendingRequests[S]={xhr:I};I.open("GET",this.url),I.withCredentials=this.withCredentials;for(const F in this.httpHeaders){const y=this.httpHeaders[F];typeof y>"u"||I.setRequestHeader(F,y)}return this.isHttp&&"begin"in w&&"end"in w?(I.setRequestHeader("Range",`bytes=${w.begin}-${w.end-1}`),T.expectedStatus=o):T.expectedStatus=s,I.responseType="arraybuffer",w.onError&&(I.onerror=function(F){w.onError(I.status)}),I.onreadystatechange=this.onStateChange.bind(this,S),I.onprogress=this.onProgress.bind(this,S),T.onHeadersReceived=w.onHeadersReceived,T.onDone=w.onDone,T.onError=w.onError,T.onProgress=w.onProgress,I.send(null),S}onProgress(w,I){var S;const T=this.pendingRequests[w];T&&((S=T.onProgress)===null||S===void 0||S.call(T,I))}onStateChange(w,I){const S=this.pendingRequests[w];if(!S)return;const T=S.xhr;if(T.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),T.readyState!==4||!(w in this.pendingRequests))return;if(delete this.pendingRequests[w],T.status===0&&this.isHttp){var F;(F=S.onError)===null||F===void 0||F.call(S,T.status);return}const y=T.status||s;if(!(y===s&&S.expectedStatus===o)&&y!==S.expectedStatus){var g;(g=S.onError)===null||g===void 0||g.call(S,T.status);return}const l=u(T);if(y===o){const _=T.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(_);S.onDone({begin:parseInt(A[1],10),chunk:l})}else if(l)S.onDone({begin:0,chunk:l});else{var d;(d=S.onError)===null||d===void 0||d.call(S,T.status)}}getRequestXhr(w){return this.pendingRequests[w].xhr}isPendingRequest(w){return w in this.pendingRequests}abortRequest(w){const I=this.pendingRequests[w].xhr;delete this.pendingRequests[w],I.abort()}}class h{constructor(w){this._source=w,this._manager=new p(w.url,{httpHeaders:w.httpHeaders,withCredentials:w.withCredentials}),this._rangeChunkSize=w.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(w){const I=this._rangeRequestReaders.indexOf(w);I>=0&&this._rangeRequestReaders.splice(I,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(w,I){const S=new E(this._manager,w,I);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(w){var I;(I=this._fullRequestReader)===null||I===void 0||I.cancel(w);for(const S of this._rangeRequestReaders.slice(0))S.cancel(w)}}e.PDFNetworkStream=h;class f{constructor(w,I){this._manager=w;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=I.url,this._fullRequestId=w.requestFull(S),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=I.disableRange||!1,this._contentLength=I.length,this._rangeChunkSize=I.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const w=this._fullRequestId,I=this._manager.getRequestXhr(w),S=y=>I.getResponseHeader(y),{allowRangeRequests:T,suggestedLength:F}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});T&&(this._isRangeSupported=!0),this._contentLength=F||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(w),this._headersReceivedCapability.resolve()}_onDone(w){if(w&&(this._requests.length>0?this._requests.shift().resolve({value:w.chunk,done:!1}):this._cachedChunks.push(w.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(w){this._storedError=(0,a.createResponseStatusError)(w,this._url),this._headersReceivedCapability.reject(this._storedError);for(const I of this._requests)I.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(w){var I;(I=this.onProgress)===null||I===void 0||I.call(this,{loaded:w.loaded,total:w.lengthComputable?w.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=(0,n.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0,this._headersReceivedCapability.reject(w);for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E{constructor(w,I,S){this._manager=w;const T={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._requestId=w.requestRange(I,S,T),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var w;(w=this.onClosed)===null||w===void 0||w.call(this,this)}_onDone(w){const I=w.chunk;this._requests.length>0?this._requests.shift().resolve({value:I,done:!1}):this._queuedChunk=I,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(w){this._storedError=(0,a.createResponseStatusError)(w,this._url);for(const I of this._requests)I.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(w){if(!this.isStreamingSupported){var I;(I=this.onProgress)===null||I===void 0||I.call(this,{loaded:w.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const I=this._queuedChunk;return this._queuedChunk=null,{value:I,done:!1}}if(this._done)return{value:void 0,done:!0};const w=(0,n.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=t(1),a=t(158);function s(f,E,m){return{method:"GET",headers:f,signal:m.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function o(f){const E=new Headers;for(const m in f){const w=f[m];typeof w>"u"||E.append(m,w)}return E}class u{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E,m;return(E=(m=this._fullRequestReader)===null||m===void 0?void 0:m._loaded)!==null&&E!==void 0?E:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new p(this),this._fullRequestReader}getRangeReader(E,m){if(m<=this._progressiveDataLength)return null;const w=new h(this,E,m);return this._rangeRequestReaders.push(w),w}cancelAllRequests(E){this._fullRequestReader&&this._fullRequestReader.cancel(E);for(const m of this._rangeRequestReaders.slice(0))m.cancel(E)}}e.PDFFetchStream=u;class p{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const m=E.source;this._withCredentials=m.withCredentials||!1,this._contentLength=m.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._headers=o(this._stream.httpHeaders);const w=m.url;fetch(w,s(this._headers,this._withCredentials,this._abortController)).then(I=>{if(!(0,a.validateResponseStatus)(I.status))throw(0,a.createResponseStatusError)(I.status,w);this._reader=I.body.getReader(),this._headersCapability.resolve();const S=y=>I.headers.get(y),{allowRangeRequests:T,suggestedLength:F}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=F||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(S),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:E,done:m}=await this._reader.read();return m?{value:E,done:m}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController.abort()}}class h{constructor(E,m,w){this._stream=E,this._reader=null,this._loaded=0;const I=E.source;this._withCredentials=I.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!I.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${m}-${w-1}`);const S=I.url;fetch(S,s(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,a.validateResponseStatus)(T.status))throw(0,a.createResponseStatusError)(T.status,S);this._readCapability.resolve(),this._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:E,done:m}=await this._reader.read();return m?{value:E,done:m}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(r){var e=__webpack_module_cache__[r];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var r=__webpack_exports__;Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(r,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(r,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(r,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(r,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(r,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(r,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(r,"GlobalWorkerOptions",{enumerable:!0,get:function(){return u.GlobalWorkerOptions}}),Object.defineProperty(r,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(r,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(r,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(r,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(r,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(r,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(r,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(r,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(r,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(r,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(r,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(r,"SVGGraphics",{enumerable:!0,get:function(){return f.SVGGraphics}}),Object.defineProperty(r,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(r,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(r,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(r,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(r,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(r,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(r,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(r,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(r,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(r,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(r,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(r,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(r,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(r,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(r,"renderTextLayer",{enumerable:!0,get:function(){return h.renderTextLayer}}),Object.defineProperty(r,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return t.version}});var e=__w_pdfjs_require__(1),t=__w_pdfjs_require__(129),n=__w_pdfjs_require__(133),a=__w_pdfjs_require__(147),s=__w_pdfjs_require__(132),o=__w_pdfjs_require__(152),u=__w_pdfjs_require__(140),p=__w_pdfjs_require__(3),h=__w_pdfjs_require__(155),f=__w_pdfjs_require__(156),E=__w_pdfjs_require__(154);if(p.isNodeJS){const{PDFNodeStream:m}=__w_pdfjs_require__(157);(0,t.setPDFNetworkStreamFactory)(w=>new m(w))}else{const{PDFNetworkStream:m}=__w_pdfjs_require__(160),{PDFFetchStream:w}=__w_pdfjs_require__(161);(0,t.setPDFNetworkStreamFactory)(I=>(0,n.isValidFetchUrl)(I.url)?new w(I):new m(I))}})(),__webpack_exports__})())}(pdf)),pdf.exports}var pdfExports=requirePdf();const defaultSortConfig={primarySort:"category",secondarySort:"sku",sortOrder:"asc",groupByCategory:!0,prioritizeActiveCategories:!0,sortCategoriesAlphabetically:!1};function sortProductsByCategory(r,e,t=defaultSortConfig){var p;if(!(r!=null&&r.length))return[];const n=new Map;e.forEach(h=>{h.id&&n.set(h.id,h)});const a=r.map(h=>{const f=h.categoryId?n.get(h.categoryId):void 0;return{...h,categoryName:(f==null?void 0:f.name)||"Uncategorized",categoryTag:(f==null?void 0:f.tag)||""}});if(!t.groupByCategory)return sortProductsByField(a,t.primarySort,t.sortOrder);const s={};a.forEach(h=>{const f=h.categoryName||"Uncategorized";s[f]||(s[f]=[]),s[f].push(h)});const o=Object.keys(s);if((p=t.categoryOrder)!=null&&p.length){const h=new Map(t.categoryOrder.map((f,E)=>[f,E]));o.sort((f,E)=>{const m=h.has(f)?h.get(f):1/0,w=h.has(E)?h.get(E):1/0;return m!==w?m-w:f.localeCompare(E)})}else o.sort((h,f)=>h==="Uncategorized"?1:f==="Uncategorized"?-1:t.sortOrder==="asc"?h.localeCompare(f):f.localeCompare(h));const u=[];return o.forEach(h=>{const f=s[h];t.secondarySort&&sortProductsByField(f,t.secondarySort,t.sortOrder),u.push(...f)}),u}function sortProductsByField(r,e,t){return r.sort((n,a)=>{let s,o;switch(e){case"category":s=n.categoryName||"Uncategorized",o=a.categoryName||"Uncategorized";break;case"name":s=n.name||"",o=a.name||"";break;case"price":return s=n.sellingPrice||0,o=a.sellingPrice||0,t==="asc"?s-o:o-s;case"sku":s=n.sku||"",o=a.sku||"";break;default:s="",o=""}return typeof s=="string"&&typeof o=="string"?t==="asc"?s.localeCompare(o):o.localeCompare(s):0})}class BaseTransformer{constructor(e,t,n,a){$e(this,"filePath");$e(this,"pdfDoc");$e(this,"outputPdf");$e(this,"summaryText",[]);$e(this,"sortConfig");this.products=t,this.categories=n,this.filePath=e,this.products=t,this.categories=n,this.sortConfig={...defaultSortConfig,primarySort:"category",secondarySort:"sku",groupByCategory:!0,...a}}async initialize(){}async transform(){return await this.initialize(),this.outputPdf}get summary(){return this.summaryText}sortTextItems(e){return e.sort((t,n)=>{const a=n.transform[5]-t.transform[5];return Math.abs(a)<5?t.transform[4]-n.transform[4]:a})}combineTextIntoLines(e){var s;let t=(s=e[0])==null?void 0:s.transform[5],n="";const a=[];return e.forEach(o=>{Math.abs(o.transform[5]-t)>5?(n&&a.push(n.trim()),n=o.str,t=o.transform[5]):n+=" "+o.str}),n&&a.push(n.trim()),a}sortProducts(e){if(e.length<=1)return e;const t=e.map(o=>{const u=this.products.find(f=>f.sku===o.SKU),p=(u==null?void 0:u.categoryId)||"",h=this.categories.find(f=>f.id===p);return{...o,categoryId:p,category:(h==null?void 0:h.name)||"Uncategorized"}}),n={};t.forEach(o=>{const u=o.category||"Uncategorized";n[u]||(n[u]=[]),n[u].push(o)});const a=Object.keys(n);a.sort((o,u)=>o==="Uncategorized"?1:u==="Uncategorized"?-1:o.localeCompare(u));const s=[];return a.forEach(o=>{const u=n[o];this.sortByField(u,"sku"),s.push(...u)}),s}sortByField(e,t,n="asc"){e.sort((a,s)=>{let o,u;switch(t){case"name":o=a.name||"",u=s.name||"";break;case"sku":o=a.SKU||"",u=s.SKU||"";break;default:o="",u=""}return typeof o=="string"&&typeof u=="string"?n==="asc"?o.localeCompare(u):u.localeCompare(o):0})}}class AmazonPDFTransformer extends BaseTransformer{constructor(t,n,a,s){super(t,n,a,s);$e(this,"filePath");$e(this,"pdf");this.filePath=t}async initialize(){const{PDFDocument:t}=await __vitePreload(async()=>{const{PDFDocument:a}=await import("./pdf-vendor-BVWGQTu2.js").then(s=>s.i);return{PDFDocument:a}},__vite__mapDeps([0,1]));this.pdfDoc=await t.load(this.filePath),this.outputPdf=await t.create();const n=pdfExports.getDocument({data:this.filePath});this.pdf=await n.promise}recurseQuantity(t,n=-1){for(let s=n>-1?n:0;s<t.length;s++){const o=t[s];if(o.includes("₹"))return this.recurseQuantity(t,s+1);if(n>-1&&!o.includes("₹"))return s}return-1}extractProductInfo(t){var h,f;const n=t.findIndex(E=>E.startsWith("1 "));if(n===-1)return{name:"",quantity:"",type:"amazon"};const a=t.slice(n,n+4).join(" ");let[s,...o]=a.split("|");s.indexOf("₹")!==-1&&(s=s.substring(0,s.indexOf("₹")-1));let u;if(/[A-Za-z0-9]{2}-[A-Za-z0-9]{4}-[A-Z|a-z|0-9]{4}/gi.test(a)){const E=new RegExp(/[A-Za-z0-9]{2}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}/,"ig");u=(h=a.match(E))==null?void 0:h[0]}if(/SS[a-z0-9]{2}.*/gi.test(a)){const E=new RegExp(/SS[a-zA-Z]{2,4}[0-9]{6,7}/,"ig");u=(f=a.match(E))==null?void 0:f[0]}let p="1";if(o.length>0){const E=o.join(" ").split(" ").filter(w=>!!w&&/[()]/.test(w)===!1),m=this.recurseQuantity(E);m>-1&&(p=E[m]||"1")}return{name:s.replace(/1 /,"").trim(),quantity:p,SKU:u||"",type:"amazon"}}async addFooterText(t,n){const{rgb:a,StandardFonts:s}=await __vitePreload(async()=>{const{rgb:w,StandardFonts:I}=await import("./pdf-vendor-BVWGQTu2.js").then(S=>S.i);return{rgb:w,StandardFonts:I}},__vite__mapDeps([0,1])),o=t.getWidth(),u=12;let p=`${n.quantity} X [${n==null?void 0:n.name}]`;const h=this.products.find(w=>w.sku===n.SKU),f=this.categories.find(w=>w.id===(h==null?void 0:h.categoryId)),E={name:(h==null?void 0:h.name)||n.name,quantity:n.quantity,type:"amazon",SKU:n.SKU,categoryId:h==null?void 0:h.categoryId,category:f==null?void 0:f.name};f&&(p=`${n.quantity} X [${f.name}] ${h==null?void 0:h.name.substring(0,80)}`),this.summaryText.push(E);const m=await this.outputPdf.embedFont(s.Helvetica);t.drawText(p,{y:t.getHeight()-20,x:10,size:u,color:a(0,0,0),lineHeight:u+2,font:m,maxWidth:o})}async transform(){var s;await this.initialize();const t=this.pdfDoc.getPages();let n=0;const a=[];for(let o=0;o<t.length;o++)if(o%2===1){const h=(await(await this.pdf.getPage(o+1)).getTextContent()).items,f=this.sortTextItems(h),E=this.combineTextIntoLines(f),m=this.extractProductInfo(E);a.push({page:o-1,product:m,pageIndex:n}),n++}if((s=this.sortConfig)!=null&&s.groupByCategory){const o=a.map(h=>{const f=this.products.find(E=>E.sku===h.product.SKU);return f||{sku:h.product.SKU||"",name:h.product.name,description:"",platform:"amazon",visibility:"visible",sellingPrice:0,customCostPrice:null,metadata:{},categoryId:h.product.categoryId}}),u=sortProductsByCategory(o,this.categories,this.sortConfig),p=[];for(const h of u){const f=a.find(E=>E.product.SKU===h.sku&&E.product.name===h.name);f&&p.push(f)}p.length===a.length&&(a.length=0,a.push(...p))}else a.sort((o,u)=>{const p=o.product.SKU||"",h=u.product.SKU||"";return p.localeCompare(h)});for(const o of a){const[u]=await this.outputPdf.copyPages(this.pdfDoc,[o.page]);await this.addFooterText(u,o.product),this.outputPdf.addPage(u)}return this.outputPdf}}pdfExports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;class FlipkartPageTransformer extends BaseTransformer{constructor(t,n,a,s){super(t,n,a,s);$e(this,"pdf")}async initialize(){const{PDFDocument:t}=await __vitePreload(async()=>{const{PDFDocument:a}=await import("./pdf-vendor-BVWGQTu2.js").then(s=>s.i);return{PDFDocument:a}},__vite__mapDeps([0,1]));this.pdfDoc=await t.load(this.filePath),this.outputPdf=await t.create();const n=pdfExports.getDocument({data:this.filePath});this.pdf=await n.promise}async transformPages(){var a,s;if(await this.initialize(),!this.pdfDoc||!this.outputPdf)throw new Error("PDF document is not loaded. Call initialize() first.");const t=this.pdfDoc.getPages(),n=[];for(let o=0;o<t.length;o++){const p=t[o].getMediaBox(),h=p.width,f=p.height,E=180,m=f/2+38,w=h,I=f-10,F=(await(await this.pdf.getPage(o+1)).getTextContent()).items,y=this.sortTextItems(F),b=this.combineTextIntoLines(y);let g=1;const l={name:"",quantity:"0",type:"flipkart"};for(let A=0;A<b.length;)if(b[A].startsWith("SKU")&&/^\d {3}/.test(b[A+g])){const C=b[A+g],[L,...M]=C.split("|"),V=M.join(" ").split(" "),K=V.at(V.length-1)||"",Y=L.split(" ").filter(W=>!!W),X=Y.length?Y[Y.length-1].trim():"";/^\d/.test(K)&&(l.quantity=(parseInt(V.at(V.length-1)||"0",10)+parseInt(l.quantity,10)).toString());const H=V.filter(W=>!!W).reduce((W,B)=>W.trim()+" "+B.trim(),"");l.SKU!==X&&l.SKU?(l.name+=" && "+H,l.SKU+=" && "+X):(l.name=H,l.SKU=X),g++}else A++;const d=this.products.find(A=>A.sku===l.SKU),_=this.categories.find(A=>A.id===(d==null?void 0:d.categoryId));l.categoryId=d==null?void 0:d.categoryId,l.category=_==null?void 0:_.name,n.push({page:o,pageData:{width:h,height:f,lowerLeftX:E,lowerLeftY:m,upperRightX:w,upperRightY:I},summary:{...l}}),this.summaryText.push({...l})}(a=this.sortConfig)!=null&&a.groupByCategory&&n.length>0?n.sort((o,u)=>{var m;const p=this.categories.find(w=>w.id===o.summary.categoryId),h=this.categories.find(w=>w.id===u.summary.categoryId);if(o.summary.categoryId&&!u.summary.categoryId)return-1;if(!o.summary.categoryId&&u.summary.categoryId)return 1;if(p&&h&&(m=this.sortConfig)!=null&&m.sortCategoriesAlphabetically)return p.name.localeCompare(h.name);const f=o.summary.SKU||"",E=u.summary.SKU||"";return f.localeCompare(E)}):n.length>0&&n.sort((o,u)=>{const p=o.summary.SKU||"",h=u.summary.SKU||"";return p.localeCompare(h)});for(const o of n){const u=t[o.page],{width:p,lowerLeftX:h,lowerLeftY:f,upperRightX:E,upperRightY:m}=o.pageData;u.setWidth(p-180),u.setHeight(m),u.setCropBox(h,f,E,m);const[w]=await this.outputPdf.copyPages(this.pdfDoc,[o.page]);this.outputPdf.addPage(w);const{rgb:I,StandardFonts:S}=await __vitePreload(async()=>{const{rgb:d,StandardFonts:_}=await import("./pdf-vendor-BVWGQTu2.js").then(A=>A.i);return{rgb:d,StandardFonts:_}},__vite__mapDeps([0,1])),T=u.getWidth(),F=5,y=this.products.find(d=>d.sku===o.summary.SKU),b=this.categories.find(d=>d.id===(y==null?void 0:y.categoryId));let g=`${o.summary.quantity} X [${(s=o.summary)==null?void 0:s.name}]`;b&&(g=`${o.summary.quantity} X [${b.name}] ${y==null?void 0:y.name.substring(0,80)}`);const l=await this.outputPdf.embedFont(S.Helvetica);w.drawText(g,{y:w.getHeight()-10,x:190,size:F,color:I(0,0,0),lineHeight:F+2,font:l,maxWidth:T-180})}return this.outputPdf}}class PDFMergerService{constructor(e,t){$e(this,"outpdf");$e(this,"summaryText",[]);this.products=e,this.categories=t,this.products=e,this.categories=t}async initialize(){const{PDFDocument:e}=await __vitePreload(async()=>{const{PDFDocument:t}=await import("./pdf-vendor-BVWGQTu2.js").then(n=>n.i);return{PDFDocument:t}},__vite__mapDeps([0,1]));return this.outpdf=await e.create()}async mergePdfs({amzon:e,flp:t,sortConfig:n}){if(await this.initialize(),!!this.outpdf){for(const a of e)await this.processAmazonFile(a,n);for(const a of t)await this.processFlipkartFile(a,n);return await new TodaysOrder().updateTodaysOrder({orders:this.summaryText,date:format(new Date,"yyyy-MM-dd"),id:format(new Date,"yyyy-MM-dd")}),this.outpdf}}async processAmazonFile(e,t){if(!e||!this.outpdf)return;const n=new AmazonPDFTransformer(e,this.products,this.categories,t),a=await n.transform();for(let s=0;s<a.getPageIndices().length;s++){const[o]=await this.outpdf.copyPages(a,[s]);this.outpdf.addPage(o)}this.summaryText.push(...n.summary)}async processFlipkartFile(e,t){if(!e||!this.outpdf)return;const n=new FlipkartPageTransformer(e,this.products,this.categories,t),a=await n.transformPages();for(let s=0;s<a.getPageIndices().length;s++){const[o]=await this.outpdf.copyPages(a,[s]);this.outpdf.addPage(o)}this.summaryText.push(...n.summary)}get summary(){return this.summaryText}}const initialState$6={amazonFiles:[],flipkartFiles:[],finalPdf:null,summary:[],loading:!1,error:null},readFileFromInput=r=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{n.result instanceof ArrayBuffer?e(new Uint8Array(n.result)):t(new Error("Failed to read file"))},n.onerror=t,n.readAsArrayBuffer(r)}),mergePDFs=createAsyncThunk("pdfMerger/mergePDFs",async r=>{const{amazonFiles:e,flipkartFiles:t,sortConfig:n}=r;if(e.length===0&&t.length===0)throw new Error("No files provided");const a=store.getState().products.items,s=store.getState().products.categories,o=new PDFMergerService(a,s),u=await Promise.all(e.map(w=>readFileFromInput(w))),p=await Promise.all(t.map(w=>readFileFromInput(w))),h=await o.mergePdfs({amzon:u,flp:p,sortConfig:n});if(!h)throw new Error("Failed to merge PDFs");const f=await h.save(),E=new Blob([f],{type:"application/pdf"});return{pdfUrl:URL.createObjectURL(E),summary:o.summary}}),pdfMergerSlice=createSlice({name:"pdfMerger",initialState:initialState$6,reducers:{addAmazonFile:(r,e)=>{r.amazonFiles.push(e.payload)},addFlipkartFile:(r,e)=>{r.flipkartFiles.push(e.payload)},removeAmazonFile:(r,e)=>{r.amazonFiles.splice(e.payload,1)},removeFlipkartFile:(r,e)=>{r.flipkartFiles.splice(e.payload,1)},clearAmazonFiles:r=>{r.amazonFiles=[]},clearFlipkartFiles:r=>{r.flipkartFiles=[]},clearFiles:r=>{r.amazonFiles=[],r.flipkartFiles=[],r.finalPdf=null,r.summary=[]}},extraReducers:r=>{r.addCase(mergePDFs.pending,e=>{e.loading=!0,e.error=null}).addCase(mergePDFs.fulfilled,(e,t)=>{e.loading=!1,e.finalPdf=t.payload.pdfUrl,e.summary=t.payload.summary}).addCase(mergePDFs.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to merge PDFs"})}}),{addAmazonFile,addFlipkartFile,removeAmazonFile,removeFlipkartFile,clearAmazonFiles,clearFlipkartFiles,clearFiles}=pdfMergerSlice.actions,pdfMergerReducer=pdfMergerSlice.reducer,CACHE_DURATIONS={orders:5*60*1e3,products:5*60*1e3},shouldFetchData=(r,e,t,n=!0)=>n?!r||e.length===0?!0:Date.now()-r>t:!1,initialState$5={dailyOrders:[],loading:!1,error:null,lastFetched:null},orderService=new TodaysOrder,fetchOrderHistory=createAsyncThunk("orderHistory/fetchOrderHistory",async(r,{getState:e})=>{const t=e(),{lastFetched:n,dailyOrders:a}=t.orderHistory,{isAuthenticated:s}=t.auth;return shouldFetchData(n,a,CACHE_DURATIONS.orders,s)?await orderService.getLastThirtyDaysOrders():a}),orderHistorySlice=createSlice({name:"orderHistory",initialState:initialState$5,reducers:{},extraReducers:r=>{r.addCase(fetchOrderHistory.pending,e=>{e.loading=!0,e.error=null}).addCase(fetchOrderHistory.fulfilled,(e,t)=>{e.loading=!1,e.dailyOrders=t.payload,e.lastFetched=Date.now()}).addCase(fetchOrderHistory.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch order history"})}}),orderHistoryReducer=orderHistorySlice.reducer,initialState$4={items:[],lowStockItems:[],loading:!1,error:null,lastFetchTime:null,lastLowStockFetchTime:null},productService=new ProductService,fetchInventory=createAsyncThunk("inventory/fetchInventory",async(r,{getState:e})=>{const t=e(),{lastFetchTime:n,items:a}=t.inventory,{isAuthenticated:s}=t.auth;return shouldFetchData(n,a,CACHE_DURATIONS.products,s)?await productService.getProducts():a}),fetchLowStockItems=createAsyncThunk("inventory/fetchLowStockItems",async()=>await productService.getLowInventoryProducts()),updateProductInventory=createAsyncThunk("inventory/updateProductInventory",async({sku:r,quantity:e})=>await productService.updateInventory(r,e)),reduceInventoryForOrder=createAsyncThunk("inventory/reduceInventoryForOrder",async({sku:r,quantity:e})=>{if(!await productService.hasSufficientInventory(r,e))throw new Error(`Insufficient inventory for product with SKU ${r}`);return await productService.reduceInventoryForOrder(r,e)}),inventorySlice=createSlice({name:"inventory",initialState:initialState$4,reducers:{},extraReducers:r=>{r.addCase(fetchInventory.pending,e=>{e.loading=!0,e.error=null}).addCase(fetchInventory.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload,e.lastFetchTime=Date.now()}).addCase(fetchInventory.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch inventory"}).addCase(fetchLowStockItems.fulfilled,(e,t)=>{e.lowStockItems=t.payload,e.lastLowStockFetchTime=Date.now()}).addCase(updateProductInventory.fulfilled,(e,t)=>{const n=t.payload,a=e.items.findIndex(s=>s.sku===n.sku);if(a!==-1&&(e.items[a]=n),n.inventory&&n.inventory.quantity<=n.inventory.lowStockThreshold){const s=e.lowStockItems.findIndex(o=>o.sku===n.sku);s!==-1?e.lowStockItems[s]=n:e.lowStockItems.push(n)}else e.lowStockItems=e.lowStockItems.filter(s=>s.sku!==n.sku)}).addCase(reduceInventoryForOrder.fulfilled,(e,t)=>{const n=t.payload,a=e.items.findIndex(s=>s.sku===n.sku);if(a!==-1&&(e.items[a]=n),n.inventory&&n.inventory.quantity<=n.inventory.lowStockThreshold){const s=e.lowStockItems.findIndex(o=>o.sku===n.sku);s!==-1?e.lowStockItems[s]=n:e.lowStockItems.push(n)}}).addCase(reduceInventoryForOrder.rejected,(e,t)=>{e.error=t.error.message||"Failed to reduce inventory"})}}),inventoryReducer=inventorySlice.reducer,initialState$3={items:[],loading:!1,error:null,selectedCategory:null},categoryService=new CategoryService,fetchCategories=createAsyncThunk("categories/fetchCategories",async()=>await categoryService.getCategories()),createCategory=createAsyncThunk("categories/create",async(r,{rejectWithValue:e})=>{try{return{id:await categoryService.createCategory(r),...r}}catch(t){return e(t.message||"Failed to create category")}}),updateCategory=createAsyncThunk("categories/update",async({id:r,...e},{rejectWithValue:t})=>{try{return await categoryService.updateCategory(r,e),{id:r,...e}}catch(n){return t(n.message||"Failed to update category")}}),deleteCategory=createAsyncThunk("categories/delete",async(r,{rejectWithValue:e})=>{try{return await categoryService.deleteCategory(r),r}catch(t){return e(t.message||"Failed to delete category")}}),categoriesSlice=createSlice({name:"categories",initialState:initialState$3,reducers:{selectCategory:(r,e)=>{r.selectedCategory=e.payload},clearCategoriesError:r=>{r.error=null}},extraReducers:r=>{r.addCase(fetchCategories.pending,e=>{e.loading=!0,e.error=null}),r.addCase(fetchCategories.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload}),r.addCase(fetchCategories.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch categories"}),r.addCase(createCategory.fulfilled,(e,t)=>{e.items.push(t.payload)}),r.addCase(createCategory.rejected,(e,t)=>{e.error=t.payload}),r.addCase(updateCategory.fulfilled,(e,t)=>{const n=e.items.findIndex(a=>a.id===t.payload.id);n!==-1&&(e.items[n]={...e.items[n],...t.payload})}),r.addCase(updateCategory.rejected,(e,t)=>{e.error=t.payload}),r.addCase(deleteCategory.fulfilled,(e,t)=>{e.items=e.items.filter(n=>n.id!==t.payload),e.selectedCategory===t.payload&&(e.selectedCategory=null)}),r.addCase(deleteCategory.rejected,(e,t)=>{e.error=t.payload})}}),{selectCategory,clearCategoriesError}=categoriesSlice.actions,categoriesReducer=categoriesSlice.reducer,initialState$2={metrics:null,categoryData:[],skuData:[],topProducts:[],loading:!1,error:null},orderAnalyticsSlice=createSlice({name:"orderAnalytics",initialState:initialState$2,reducers:{}}),orderAnalyticsReducer=orderAnalyticsSlice.reducer;class AllOrdersForAnalyticsService extends FirebaseService{constructor(){super(...arguments);$e(this,"COLLECTION_NAME","active-orders")}async fetchAllDailyOrderDocuments(){return this.getDocuments(this.COLLECTION_NAME,[orderBy("date","asc")])}}const initialState$1={items:[],loading:!1,error:null},allOrdersService=new AllOrdersForAnalyticsService,fetchAllOrdersForAnalytics=createAsyncThunk("allOrdersForAnalytics/fetchAll",async(r,{rejectWithValue:e})=>{try{return(await allOrdersService.fetchAllDailyOrderDocuments()).reduce((a,s)=>{const o=s.orders.map(u=>({...u,date:s.date}));return[...a,...o]},[])}catch(t){const n=t instanceof Error?t.message:"An unknown error occurred";return e(n)}}),allOrdersForAnalyticsSlice=createSlice({name:"allOrdersForAnalytics",initialState:initialState$1,reducers:{},extraReducers:r=>{r.addCase(fetchAllOrdersForAnalytics.pending,e=>{e.loading=!0,e.error=null}).addCase(fetchAllOrdersForAnalytics.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload}).addCase(fetchAllOrdersForAnalytics.rejected,(e,t)=>{var n;e.loading=!1,e.error=t.payload||((n=t.error)==null?void 0:n.message)||"Failed to fetch all orders for analytics"})}}),allOrdersForAnalyticsReducer=allOrdersForAnalyticsSlice.reducer,initialState={categories:[],lowStockCategories:[],operations:[],loading:!1,error:null,migrationStatus:"pending",lastUpdated:null},fetchCategoriesWithInventory=createAsyncThunk("categoryInventory/fetchCategoriesWithInventory",async(r,{rejectWithValue:e})=>{try{return await categoryInventoryService.getAllCategoriesWithInventory()}catch(t){return e(t instanceof Error?t.message:"Failed to fetch categories")}}),updateCategoryInventory=createAsyncThunk("categoryInventory/updateCategoryInventory",async({categoryId:r,quantity:e,reason:t,performedBy:n},{rejectWithValue:a})=>{try{await categoryInventoryService.updateCategoryInventory(r,e,t,n);const s=await categoryInventoryService.getCategoryInventory(r);if(!s)throw new Error("Category not found after update");return s}catch(s){return a(s instanceof Error?s.message:"Failed to update inventory")}}),updateCategoryThreshold=createAsyncThunk("categoryInventory/updateCategoryThreshold",async({categoryId:r,threshold:e},{rejectWithValue:t})=>{try{await categoryInventoryService.updateCategoryThreshold(r,e);const n=await categoryInventoryService.getCategoryInventory(r);if(!n)throw new Error("Category not found after update");return n}catch(n){return t(n instanceof Error?n.message:"Failed to update threshold")}}),fetchLowStockCategories=createAsyncThunk("categoryInventory/fetchLowStockCategories",async(r,{rejectWithValue:e})=>{try{return await categoryInventoryService.getLowStockCategories()}catch(t){return e(t instanceof Error?t.message:"Failed to fetch low stock categories")}}),fetchCategoryInventoryHistory=createAsyncThunk("categoryInventory/fetchCategoryInventoryHistory",async({categoryId:r,limit:e},{rejectWithValue:t})=>{try{return await categoryInventoryService.getCategoryInventoryHistory(r,e)}catch(n){return t(n instanceof Error?n.message:"Failed to fetch inventory history")}}),categoryInventorySlice=createSlice({name:"categoryInventory",initialState,reducers:{setMigrationStatus:(r,e)=>{r.migrationStatus=e.payload},clearError:r=>{r.error=null},resetState:()=>initialState},extraReducers:r=>{r.addCase(fetchCategoriesWithInventory.pending,e=>{e.loading=!0,e.error=null}).addCase(fetchCategoriesWithInventory.fulfilled,(e,t)=>{e.loading=!1,e.categories=t.payload,e.error=null,e.lastUpdated=new Date().toISOString()}).addCase(fetchCategoriesWithInventory.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch categories",e.categories=[]}).addCase(updateCategoryInventory.pending,e=>{e.loading=!0,e.error=null}).addCase(updateCategoryInventory.fulfilled,(e,t)=>{e.loading=!1,e.error=null;const n=e.categories.findIndex(a=>a.id===t.payload.id);n!==-1?e.categories[n]=t.payload:e.categories.push(t.payload),e.lastUpdated=new Date().toISOString()}).addCase(updateCategoryInventory.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to update inventory"}).addCase(updateCategoryThreshold.pending,e=>{e.loading=!0,e.error=null}).addCase(updateCategoryThreshold.fulfilled,(e,t)=>{e.loading=!1,e.error=null;const n=e.categories.findIndex(a=>a.id===t.payload.id);n!==-1?e.categories[n]=t.payload:e.categories.push(t.payload),e.lastUpdated=new Date().toISOString()}).addCase(updateCategoryThreshold.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to update threshold"}).addCase(fetchLowStockCategories.pending,e=>{e.loading=!0,e.error=null}).addCase(fetchLowStockCategories.fulfilled,(e,t)=>{e.loading=!1,e.lowStockCategories=t.payload,e.error=null}).addCase(fetchLowStockCategories.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch low stock categories",e.lowStockCategories=[]}).addCase(fetchCategoryInventoryHistory.pending,e=>{e.loading=!0,e.error=null}).addCase(fetchCategoryInventoryHistory.fulfilled,(e,t)=>{e.loading=!1,e.operations=t.payload,e.error=null}).addCase(fetchCategoryInventoryHistory.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch inventory history",e.operations=[]})}}),selectCategoryInventory=r=>r.categoryInventory,selectCategoriesWithInventory=createSelector([selectCategoryInventory],r=>r.categories);createSelector([selectCategoryInventory],r=>r.lowStockCategories);const selectCategoryInventoryLoading=createSelector([selectCategoryInventory],r=>r.loading);createSelector([selectCategoryInventory],r=>r.error);createSelector([selectCategoryInventory],r=>r.migrationStatus);createSelector([selectCategoriesWithInventory,(r,e)=>e],(r,e)=>r.find(t=>t.id===e));createSelector([selectCategoriesWithInventory],r=>r.reduce((e,t)=>e+t.inventory.totalQuantity,0));createSelector([selectCategoriesWithInventory],r=>r.filter(e=>e.inventory.totalQuantity===0).length);const{setMigrationStatus,clearError,resetState}=categoryInventorySlice.actions,categoryInventoryReducer=categoryInventorySlice.reducer,useAppDispatch=()=>useDispatch(),useAppSelector=useSelector,persistConfig={key:"root",version:1,storage:storage$1,whitelist:[],blacklist:["auth","pdfMerger","products","orders","transactions","orderHistory","inventory","orderAnalytics","allOrdersForAnalytics"]},rootReducer=combineReducers({products:productsReducer,orders:ordersReducer,transactions:transactionsReducer,auth:authReducer,pdfMerger:pdfMergerReducer,orderHistory:orderHistoryReducer,inventory:inventoryReducer,categories:categoriesReducer,orderAnalytics:orderAnalyticsReducer,allOrdersForAnalytics:allOrdersForAnalyticsReducer,categoryInventory:categoryInventoryReducer}),persistedReducer=persistReducer(persistConfig,rootReducer),store=configureStore({reducer:persistedReducer,middleware:r=>r({serializableCheck:{ignoredActions:[FLUSH,REHYDRATE,PAUSE,PERSIST,PURGE,REGISTER,"auth/setUser"],ignoredActionPaths:["payload.user","payload.customTheme"],ignoredPaths:["auth.user","theme.customTheme"]}})}),persistor=persistStore(store),getDesignTokens=r=>({palette:{mode:r,primary:{main:r==="light"?"#1565c0":"#90caf9",light:r==="light"?"#64b5f6":"#bbdefb",dark:r==="light"?"#0d47a1":"#42a5f5"},secondary:{main:r==="light"?"#2e7d32":"#81c784",light:r==="light"?"#4caf50":"#a5d6a7",dark:r==="light"?"#1b5e20":"#66bb6a"},error:{main:r==="light"?"#d32f2f":"#f44336",light:r==="light"?"#ef5350":"#e57373",dark:r==="light"?"#b71c1c":"#d32f2f"},warning:{main:r==="light"?"#ed6c02":"#ffa726",light:r==="light"?"#ff9800":"#ffb74d",dark:r==="light"?"#e65100":"#f57c00"},info:{main:r==="light"?"#0288d1":"#29b6f6",light:r==="light"?"#03a9f4":"#4fc3f7",dark:r==="light"?"#01579b":"#0288d1"},success:{main:r==="light"?"#2e7d32":"#66bb6a",light:r==="light"?"#4caf50":"#81c784",dark:r==="light"?"#1b5e20":"#388e3c"},background:{default:r==="light"?"#f8f9fa":"#121212",paper:r==="light"?"#ffffff":"#1e1e1e"},text:{primary:r==="light"?"#2c3e50":"#ecf0f1",secondary:r==="light"?"rgba(44, 62, 80, 0.7)":"rgba(236, 240, 241, 0.7)"}},shape:{borderRadius:8},typography:{fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",h6:{fontWeight:500},subtitle1:{fontWeight:400,letterSpacing:.5}},components:{MuiAppBar:{styleOverrides:{root:{backgroundColor:r==="dark"?"#1e1e1e":"#1565c0",boxShadow:r==="dark"?"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)":"0 2px 4px rgba(21,101,192,0.2)"}}},MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8,padding:"8px 16px",fontWeight:500},containedPrimary:{"&:hover":{boxShadow:"0 4px 8px rgba(21,101,192,0.2)"}},containedSecondary:{"&:hover":{boxShadow:"0 4px 8px rgba(46,125,50,0.2)"}},containedError:{"&:hover":{boxShadow:"0 4px 8px rgba(211,47,47,0.2)"}},containedWarning:{"&:hover":{boxShadow:"0 4px 8px rgba(237,108,2,0.2)"}}}},MuiPaper:{styleOverrides:{root:{borderRadius:8,boxShadow:r==="dark"?"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)":"0 2px 4px rgba(0,0,0,0.05)",transition:"box-shadow 0.2s ease-in-out","&:hover":{boxShadow:r==="dark"?"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)":"0 3px 6px rgba(0,0,0,0.1)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:8,transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:r==="dark"?"0 4px 6px rgba(0,0,0,0.15)":"0 4px 6px rgba(0,0,0,0.08)"}}}},MuiChip:{styleOverrides:{root:{fontWeight:500},colorError:{backgroundColor:r==="dark"?"rgba(211,47,47,0.2)":"rgba(211,47,47,0.1)",color:r==="dark"?"#f44336":"#d32f2f",fontWeight:600},colorWarning:{backgroundColor:r==="dark"?"rgba(237,108,2,0.2)":"rgba(237,108,2,0.1)",color:r==="dark"?"#ffa726":"#ed6c02",fontWeight:600},colorSuccess:{backgroundColor:r==="dark"?"rgba(46,125,50,0.2)":"rgba(46,125,50,0.1)",color:r==="dark"?"#66bb6a":"#2e7d32",fontWeight:600}}},MuiContainer:{styleOverrides:{root:{paddingTop:"24px",paddingBottom:"24px"}}},MuiAccordion:{styleOverrides:{root:{"&:before":{display:"none"},borderRadius:8,marginBottom:16,boxShadow:r==="dark"?"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)":"0 2px 4px rgba(0,0,0,0.05)"}}},MuiTable:{styleOverrides:{root:{"& .MuiTableRow-root:hover":{backgroundColor:r==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)"}}}},MuiTableCell:{styleOverrides:{head:{fontWeight:600,backgroundColor:r==="dark"?"rgba(255,255,255,0.05)":"rgba(21,101,192,0.05)"}}},MuiAlert:{styleOverrides:{root:{borderRadius:8},standardWarning:{backgroundColor:r==="dark"?"rgba(237,108,2,0.2)":"#fff3e0",color:r==="dark"?"#ffa726":"#9a0007",border:`1px solid ${r==="dark"?"rgba(237,108,2,0.5)":"#ed6c02"}`},standardError:{backgroundColor:r==="dark"?"rgba(211,47,47,0.2)":"#ffebee",color:r==="dark"?"#f44336":"#b71c1c",border:`1px solid ${r==="dark"?"rgba(211,47,47,0.5)":"#f44336"}`},standardInfo:{backgroundColor:r==="dark"?"rgba(2,136,209,0.2)":"#e3f2fd",color:r==="dark"?"#29b6f6":"#0d47a1",border:`1px solid ${r==="dark"?"rgba(2,136,209,0.5)":"#2196f3"}`},standardSuccess:{backgroundColor:r==="dark"?"rgba(46,125,50,0.2)":"#e8f5e9",color:r==="dark"?"#66bb6a":"#1b5e20",border:`1px solid ${r==="dark"?"rgba(46,125,50,0.5)":"#2e7d32"}`}}}}}),ProtectedRoute=({children:r})=>{const e=useAppSelector(selectIsAuthenticated),t=useAppSelector(selectAuthStateLoaded),n=useLocation();return t?e?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r}):jsxRuntimeExports.jsx(Navigate,{to:"/flipkart-amazon-tools/login",state:{from:n},replace:!0}):jsxRuntimeExports.jsx(Box,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:jsxRuntimeExports.jsx(CircularProgress,{})})},DRAWER_WIDTH$1=250,StyledAppBar=styled(AppBar$1,{shouldForwardProp:r=>r!=="open"})(({theme:r,open:e})=>({transition:r.transitions.create(["margin","width"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),...e&&{width:`calc(100% - ${DRAWER_WIDTH$1}px)`,marginLeft:`${DRAWER_WIDTH$1}px`,transition:r.transitions.create(["margin","width"],{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.enteringScreen})}})),getRouteTitle=r=>{switch(r){case"/flipkart-amazon-tools/":return"Dashboard";case"/flipkart-amazon-tools/transactions/":return"Transaction Analytics";case"/flipkart-amazon-tools/activeOrders/":return"Active Orders";case"/flipkart-amazon-tools/products/":return"Products";case"/flipkart-amazon-tools/hidden-products/":return"Hidden Products";case"/flipkart-amazon-tools/order-analytics/":return"Order Analytics";case"/flipkart-amazon-tools/storage-management/":return"Storage Management";default:return"Label Merger"}},AppBar=({toggleDrawer:r,toggleTheme:e,mode:t,open:n})=>{const a=useLocation(),s=useNavigate(),o=getRouteTitle(a.pathname),[u,p]=reactExports.useState(!1),h=new AuthService;reactExports.useEffect(()=>{const E=h.onAuthStateChanged(m=>{p(!!m)});return()=>E()},[]);const f=async()=>{try{await h.signOut(),s("/flipkart-amazon-tools/login")}catch{}};return jsxRuntimeExports.jsx(StyledAppBar,{position:"fixed",open:n,children:jsxRuntimeExports.jsxs(Toolbar,{children:[jsxRuntimeExports.jsx(IconButton,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:r(!n),"data-testid":"menu-button",sx:{mr:2,...n&&{display:"none"}},children:jsxRuntimeExports.jsx(MenuIcon,{})}),jsxRuntimeExports.jsx(IconButton,{color:"inherit","aria-label":"close drawer",onClick:r(!1),sx:{mr:2,...!n&&{display:"none"}},children:jsxRuntimeExports.jsx(ChevronLeftIcon,{})}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",sx:{flexGrow:1},children:o}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[jsxRuntimeExports.jsx(Switch,{checked:t==="dark",onChange:e,inputProps:{"aria-label":"dark mode toggle"},"data-testid":"theme-toggle"}),u&&jsxRuntimeExports.jsx(Button,{color:"inherit",onClick:f,startIcon:jsxRuntimeExports.jsx(LogoutIcon,{}),children:"Logout"})]})]})})},DRAWER_WIDTH={xs:240,sm:240,md:250},DrawerHeader=styled("div")(({theme:r})=>({display:"flex",alignItems:"center",padding:r.spacing(2,2),...r.mixins.toolbar,justifyContent:"space-between",backgroundColor:r.palette.primary.main,color:r.palette.primary.contrastText})),StyledListItemButton=styled(ListItemButton)(({theme:r})=>({margin:r.spacing(.5,0),borderRadius:r.shape.borderRadius,padding:r.spacing(1,1.5),"&:hover":{backgroundColor:alpha(r.palette.primary.main,.08)},"&.Mui-selected":{backgroundColor:alpha(r.palette.primary.main,.12),"&:hover":{backgroundColor:alpha(r.palette.primary.main,.16)}}})),StyledListItemIcon=styled(ListItemIcon)(({theme:r})=>({minWidth:36,color:r.palette.primary.main,marginRight:r.spacing(1)})),StyledListItemText=styled(ListItemText)({"& .MuiTypography-root":{fontWeight:500}}),Main=styled("main",{shouldForwardProp:r=>r!=="open"})(({theme:r,open:e})=>({flexGrow:1,transition:r.transitions.create(["margin","width"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),marginLeft:0,width:"100%",...e&&{[r.breakpoints.up("sm")]:{transition:r.transitions.create(["margin","width"],{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.enteringScreen})}}})),DefaultContainer=({children:r,toggleTheme:e,mode:t})=>{const n=useTheme(),a=useMediaQuery(n.breakpoints.down("sm")),s=useLocation(),[o,u]=React.useState(!a),[p,h]=React.useState(!1),[f,E]=React.useState(!1),[m,w]=React.useState(!1);React.useEffect(()=>{u(!a)},[a]),React.useEffect(()=>{const y=s.pathname;h(y.includes("/home/")||y.includes("/activeOrders/")),E(y.includes("/products/")||y.includes("/hidden-products/")||y.includes("/uncategorized-products/")),w(y.includes("/categories/")||y.includes("/inventory/")||y.includes("/storage-management/"))},[s.pathname]);const I=y=>()=>{u(y)},S=()=>{a&&u(!1)},T=y=>s.pathname===y,F=jsxRuntimeExports.jsxs(Box,{sx:{width:{xs:DRAWER_WIDTH.xs,sm:DRAWER_WIDTH.sm,md:DRAWER_WIDTH.md}},role:"presentation",children:[jsxRuntimeExports.jsxs(DrawerHeader,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.25rem"}},children:"Sacred Sutra"}),jsxRuntimeExports.jsx(IconButton,{onClick:I(!1),sx:{color:"inherit","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:jsxRuntimeExports.jsx(ChevronLeftIcon,{})})]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsxs(List,{sx:{px:.5,py:2},children:[jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/","data-testid":"dashboard",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(DashboardIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Dashboard"})]})},"Dashboard")}),jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(ListItemButton,{onClick:()=>h(!p),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(ShoppingCartIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Orders"}),p?jsxRuntimeExports.jsx(ExpandLess,{}):jsxRuntimeExports.jsx(ExpandMore,{})]})}),jsxRuntimeExports.jsx(Collapse,{in:p,timeout:"auto",unmountOnExit:!0,children:jsxRuntimeExports.jsxs(List,{component:"div",disablePadding:!0,sx:{pl:1},children:[jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/home/","data-testid":"merge-labels",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/home/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(LabelIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Merge Labels"})]})},"Merge Labels")}),jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/activeOrders/","data-testid":"active-orders",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/activeOrders/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(ShoppingCartIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Active Orders"})]})},"Active Orders")})]})}),jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(ListItemButton,{onClick:()=>E(!f),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(InventoryIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Products"}),f?jsxRuntimeExports.jsx(ExpandLess,{}):jsxRuntimeExports.jsx(ExpandMore,{})]})}),jsxRuntimeExports.jsx(Collapse,{in:f,timeout:"auto",unmountOnExit:!0,children:jsxRuntimeExports.jsxs(List,{component:"div",disablePadding:!0,sx:{pl:1},children:[jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/products/","data-testid":"products",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/products/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(InventoryIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"All Products"})]})},"All Products")}),jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/hidden-products/","data-testid":"hidden-products",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/hidden-products/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(VisibilityOffIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Hidden Products"})]})},"Hidden Products")}),jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/uncategorized-products/","data-testid":"uncategorized-products",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/uncategorized-products/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(Warning,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Uncategorized Products"})]})},"Uncategorized Products")})]})}),jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(ListItemButton,{onClick:()=>w(!m),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(InventoryManagementIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Management"}),m?jsxRuntimeExports.jsx(ExpandLess,{}):jsxRuntimeExports.jsx(ExpandMore,{})]})}),jsxRuntimeExports.jsx(Collapse,{in:m,timeout:"auto",unmountOnExit:!0,children:jsxRuntimeExports.jsxs(List,{component:"div",disablePadding:!0,sx:{pl:1},children:[jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/categories/","data-testid":"categories",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/categories/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(CategoryIcon,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Categories & Inventory"})]})},"Categories & Inventory")}),jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/storage-management/","data-testid":"storage-management",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/storage-management/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(Storage,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Storage Management"})]})},"Storage Management")})]})}),jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/transactions/","data-testid":"transactions",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/transactions/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(Analytics,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Transaction Analytics"})]})},"Transaction Analytics")}),jsxRuntimeExports.jsx(Link,{component:Link$1,to:"/flipkart-amazon-tools/order-analytics/","data-testid":"order-analytics",style:{textDecoration:"none",color:"inherit"},onClick:S,children:jsxRuntimeExports.jsx(ListItem,{disablePadding:!0,children:jsxRuntimeExports.jsxs(StyledListItemButton,{selected:T("/flipkart-amazon-tools/order-analytics/"),children:[jsxRuntimeExports.jsx(StyledListItemIcon,{children:jsxRuntimeExports.jsx(Analytics,{})}),jsxRuntimeExports.jsx(StyledListItemText,{primary:"Order Analytics"})]})},"Order Analytics")})]})]});return jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",width:"100%"},children:[jsxRuntimeExports.jsx(AppBar,{toggleDrawer:I,toggleTheme:e,mode:t,open:o}),jsxRuntimeExports.jsx(Drawer,{sx:{width:o?{xs:DRAWER_WIDTH.xs,sm:DRAWER_WIDTH.sm,md:DRAWER_WIDTH.md}:0,flexShrink:0,"& .MuiDrawer-paper":{width:o?{xs:DRAWER_WIDTH.xs,sm:DRAWER_WIDTH.sm,md:DRAWER_WIDTH.md}:0,boxSizing:"border-box",borderRight:"none",boxShadow:"0 0 35px 0 rgba(154,161,171,.15)"},transition:"width 0.3s ease-in-out"},variant:"persistent",anchor:"left",open:o,children:F}),jsxRuntimeExports.jsx(Main,{open:o,children:jsxRuntimeExports.jsx(Container,{maxWidth:!1,sx:{maxWidth:"100%",mt:8,px:{xs:2,sm:3},transition:"padding 0.3s ease-in-out"},children:r})})]})},NotFound=()=>{const r=useNavigate();return jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",textAlign:"center",p:2},children:[jsxRuntimeExports.jsx(ErrorOutline,{sx:{fontSize:80,color:"error.main",mb:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h1",component:"h1",gutterBottom:!0,children:"404 - Not Found"}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"p",sx:{mb:4},children:"The page you are looking for does not exist."}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2},children:[jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:()=>r(-1),children:"Go Back"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",component:Link$1,to:"/flipkart-amazon-tools/",children:"Go Home"})]})]})},DashboardPage=React.lazy(()=>__vitePreload(()=>import("./dashboard.page-CYDD-Bvi.js"),__vite__mapDeps([2,3,1,4,5,6,7,8,0])).then(r=>({default:r.DashboardPage}))),HomePage=React.lazy(()=>__vitePreload(()=>import("./home.page-CXcHpjHv.js"),__vite__mapDeps([9,3,1,10,7,6,8,0])).then(r=>({default:r.HomePage}))),TransactionAnalytics=React.lazy(()=>__vitePreload(()=>import("./transactionAnalytics.page-gj6uv7X1.js"),__vite__mapDeps([11,3,1,7,12,4,8,6,0])).then(r=>({default:r.TransactionAnalytics}))),ProductsPage=React.lazy(()=>__vitePreload(()=>import("./products.page-B3GoPx47.js"),__vite__mapDeps([13,3,1,14,12,4,15,6,7,8,0])).then(r=>({default:r.default}))),ActiveOrders=React.lazy(()=>__vitePreload(()=>import("./todaysOrder.page-5zWL0q7q.js"),__vite__mapDeps([16,3,1,12,15,4,0,10,7,6,8])).then(r=>({default:r.TodaysOrderPage}))),HiddenProductsPage=React.lazy(()=>__vitePreload(()=>import("./hidden-products.page-BaXvTSCV.js"),__vite__mapDeps([17,3,1,12,4,15,6,7,8,0])).then(r=>({default:r.HiddenProductsPage}))),CategoriesPage=React.lazy(()=>__vitePreload(()=>import("./categories.page-DhLIySax.js"),__vite__mapDeps([18,3,1,12,6,7,8,0])).then(r=>({default:r.CategoriesPage}))),OrderAnalytics=React.lazy(()=>__vitePreload(()=>import("./index-BuGQ78U8.js"),__vite__mapDeps([19,3,1,6,12,4,5,20,7,8,0])).then(r=>({default:r.default}))),UncategorizedProductsPage=React.lazy(()=>__vitePreload(()=>import("./uncategorized-products.page-COqJCxg1.js"),__vite__mapDeps([21,3,1,14,12,4,15,6,7,8,0])).then(r=>({default:r.default}))),StorageManagementPage=React.lazy(()=>__vitePreload(()=>import("./storage-management.page-DuBNvfMR.js"),__vite__mapDeps([22,3,1,10,7,6,8,0])).then(r=>({default:r.StorageManagementPage}))),HealthPage=React.lazy(()=>__vitePreload(()=>import("./health.page-h7klUjhq.js"),__vite__mapDeps([23,3,1])).then(r=>({default:r.default}))),MonitoringDashboard=React.lazy(()=>__vitePreload(()=>import("./monitoring-dashboard.page-CPPT-Xmy.js"),__vite__mapDeps([24,3,1,20,6,7,8,0])).then(r=>({default:r.default}))),DeploymentStatusPage=React.lazy(()=>__vitePreload(()=>import("./deployment-status.page-Deebhqf3.js"),__vite__mapDeps([25,3,1])).then(r=>({default:r.default}))),ProtectedRoutes=({toggleTheme:r,mode:e})=>jsxRuntimeExports.jsx(DefaultContainer,{toggleTheme:r,mode:e,children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(DashboardPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/home/",element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/products/",element:jsxRuntimeExports.jsx(ProductsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/transactions/",element:jsxRuntimeExports.jsx(TransactionAnalytics,{})}),jsxRuntimeExports.jsx(Route,{path:"/activeOrders/",element:jsxRuntimeExports.jsx(ActiveOrders,{})}),jsxRuntimeExports.jsx(Route,{path:"/hidden-products/",element:jsxRuntimeExports.jsx(HiddenProductsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/categories/",element:jsxRuntimeExports.jsx(CategoriesPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/order-analytics/",element:jsxRuntimeExports.jsx(OrderAnalytics,{})}),jsxRuntimeExports.jsx(Route,{path:"/uncategorized-products/",element:jsxRuntimeExports.jsx(UncategorizedProductsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/storage-management/",element:jsxRuntimeExports.jsx(StorageManagementPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/health/",element:jsxRuntimeExports.jsx(HealthPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/monitoring/",element:jsxRuntimeExports.jsx(MonitoringDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/deployment-status/",element:jsxRuntimeExports.jsx(DeploymentStatusPage,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})}),LoginPage=()=>{const[r,e]=reactExports.useState(""),[t,n]=reactExports.useState(""),[a,s]=reactExports.useState(!1),[o,u]=reactExports.useState(!1),[p,h]=reactExports.useState(!1),f=useNavigate(),E=useAppDispatch(),{loading:m,error:w}=useAppSelector(S=>S.auth),I=async S=>{S.preventDefault();try{o?(await E(resetPassword(r)).unwrap(),u(!1)):(await E(login({email:r,password:t,rememberMe:a})).unwrap(),f("/flipkart-amazon-tools/"))}catch{}};return jsxRuntimeExports.jsx(Box,{sx:{minHeight:{xs:"calc(100vh - 60px)",sm:"100vh"},display:"flex",width:"100%",alignItems:"center",justifyContent:"center",py:{xs:4,sm:0},bgcolor:S=>S.palette.mode==="dark"?"background.paper":"primary.light",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))"},children:jsxRuntimeExports.jsxs(Card,{elevation:5,sx:{p:{xs:3,sm:4},width:"100%",maxWidth:{xs:350,sm:450},mx:{xs:2,sm:0},display:"flex",flexDirection:"column",gap:2,borderRadius:2,boxShadow:S=>S.palette.mode==="dark"?"0 8px 24px rgba(0,0,0,0.4)":"0 8px 24px rgba(21,101,192,0.2)"},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[jsxRuntimeExports.jsx(Box,{sx:{bgcolor:"primary.main",color:"white",width:56,height:56,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:jsxRuntimeExports.jsx(LockOutlinedIcon,{fontSize:"large"})}),jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",align:"center",sx:{fontWeight:"bold",color:"primary.dark"},children:o?"Reset Password":"Sign In"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:1},children:o?"Enter your email to receive a password reset link":"Sign in to access your account"})]}),jsxRuntimeExports.jsx(Divider,{sx:{mb:2}}),jsxRuntimeExports.jsxs("form",{onSubmit:I,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Email",type:"email",value:r,onChange:S=>e(S.target.value),margin:"normal",required:!0,autoFocus:!0,InputProps:{startAdornment:jsxRuntimeExports.jsx(InputAdornment,{position:"start",children:jsxRuntimeExports.jsx(EmailOutlinedIcon,{color:"primary"})})},sx:{mb:2}}),!o&&jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Password",type:p?"text":"password",value:t,onChange:S=>n(S.target.value),margin:"normal",required:!0,InputProps:{startAdornment:jsxRuntimeExports.jsx(InputAdornment,{position:"start",children:jsxRuntimeExports.jsx(LockOutlinedIcon,{color:"primary"})}),endAdornment:jsxRuntimeExports.jsx(InputAdornment,{position:"end",children:jsxRuntimeExports.jsx(IconButton,{"aria-label":"toggle password visibility",onClick:()=>h(!p),edge:"end",children:p?jsxRuntimeExports.jsx(VisibilityOffOutlinedIcon,{}):jsxRuntimeExports.jsx(VisibilityOutlined,{})})})},sx:{mb:1}}),!o&&jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Checkbox,{checked:a,onChange:S=>s(S.target.checked),color:"primary"}),label:"Remember me"}),w&&jsxRuntimeExports.jsx(Alert,{severity:w.includes("sent")?"success":"error",sx:{mt:2},children:w}),jsxRuntimeExports.jsx(Button,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5,fontWeight:"bold",fontSize:"1rem",boxShadow:S=>S.palette.mode==="dark"?"0 4px 12px rgba(0,0,0,0.2)":"0 4px 12px rgba(21,101,192,0.2)"},disabled:m,children:m?jsxRuntimeExports.jsx(CircularProgress,{size:24}):o?"Send Reset Link":"Sign In"})]}),jsxRuntimeExports.jsx(Divider,{sx:{my:2},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:o?"Remember your password?":"Having trouble?"})}),jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Button,{variant:"text",color:"primary",onClick:()=>u(!o),sx:{fontWeight:"medium"},children:o?"Back to Sign In":"Forgot Password?"})})]})})};class MonitoringService{constructor(){$e(this,"sessionId");$e(this,"userId");$e(this,"isEnabled");$e(this,"errorQueue",[]);$e(this,"performanceQueue",[]);$e(this,"analyticsQueue",[]);$e(this,"flushInterval",3e4);$e(this,"maxQueueSize",100);this.sessionId=this.generateSessionId(),this.isEnabled=this.shouldEnableMonitoring(),this.isEnabled&&this.initializeMonitoring()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}shouldEnableMonitoring(){const e=window.location.hostname;return e.includes("github.io")||e.includes("netlify.app")||e.includes("vercel.app")||!0}initializeMonitoring(){window.addEventListener("error",e=>{var t;this.captureError({message:e.message,stack:(t=e.error)==null?void 0:t.stack,url:e.filename||window.location.href,line:e.lineno,column:e.colno})}),window.addEventListener("unhandledrejection",e=>{var t;this.captureError({message:`Unhandled Promise Rejection: ${e.reason}`,stack:(t=e.reason)==null?void 0:t.stack,url:window.location.href})}),this.initializePerformanceMonitoring(),setInterval(()=>{this.flushData()},this.flushInterval),window.addEventListener("beforeunload",()=>{this.flushData()})}initializePerformanceMonitoring(){performance.timing&&setTimeout(()=>{this.capturePerformanceMetrics()},2e3),this.observeWebVitals()}observeWebVitals(){if("PerformanceObserver"in window)try{new PerformanceObserver(a=>{a.getEntries().forEach(o=>{o.name==="first-contentful-paint"&&this.trackCustomMetric("first_contentful_paint",o.startTime)})}).observe({entryTypes:["paint"]}),new PerformanceObserver(a=>{const s=a.getEntries(),o=s[s.length-1];this.trackCustomMetric("largest_contentful_paint",o.startTime)}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(a=>{a.getEntries().forEach(o=>{const u=o;this.trackCustomMetric("first_input_delay",u.processingStart-o.startTime)})}).observe({entryTypes:["first-input"]})}catch(e){console.warn("Performance Observer not fully supported:",e)}}setUserId(e){this.userId=e}captureError(e){var n,a;if(!this.isEnabled)return;const t={id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),message:e.message,stack:e.stack,url:e.url||window.location.href,userAgent:navigator.userAgent,userId:this.userId,sessionId:this.sessionId,severity:e.severity||"medium",tags:{...e.tags,line:((n=e.line)==null?void 0:n.toString())||"",column:((a=e.column)==null?void 0:a.toString())||""},context:{...e.context,timestamp:Date.now(),viewport:{width:window.innerWidth,height:window.innerHeight}}};this.errorQueue.push(t),e.severity==="critical"&&this.flushErrors(),this.errorQueue.length>this.maxQueueSize&&(this.errorQueue=this.errorQueue.slice(-this.maxQueueSize))}capturePerformanceMetrics(){if(!this.isEnabled||!performance.timing)return;const e=performance.timing,t={id:`perf_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,metrics:{pageLoadTime:e.loadEventEnd-e.navigationStart,domContentLoadedTime:e.domContentLoadedEventEnd-e.navigationStart,resourceLoadTime:e.loadEventEnd-e.domContentLoadedEventEnd,apiResponseTime:0},userAgent:navigator.userAgent,url:window.location.href};this.performanceQueue.push(t),this.performanceQueue.length>this.maxQueueSize&&(this.performanceQueue=this.performanceQueue.slice(-this.maxQueueSize))}trackEvent(e,t){if(!this.isEnabled)return;const n={sessionId:this.sessionId,userId:this.userId,timestamp:new Date().toISOString(),event:e,properties:t||{},page:window.location.pathname,userAgent:navigator.userAgent};this.analyticsQueue.push(n),this.analyticsQueue.length>this.maxQueueSize&&(this.analyticsQueue=this.analyticsQueue.slice(-this.maxQueueSize))}trackCustomMetric(e,t,n){this.trackEvent("custom_metric",{metric_name:e,metric_value:t,tags:n||{}})}async flushData(){await Promise.all([this.flushErrors(),this.flushPerformanceMetrics(),this.flushAnalytics()])}async flushErrors(){if(this.errorQueue.length===0)return;const e=[...this.errorQueue];this.errorQueue=[];try{console.warn("Monitoring: Flushing errors:",e);const n=[...JSON.parse(localStorage.getItem("monitoring_errors")||"[]"),...e].slice(-1e3);localStorage.setItem("monitoring_errors",JSON.stringify(n))}catch(t){console.error("Failed to flush errors:",t),this.errorQueue.unshift(...e)}}async flushPerformanceMetrics(){if(this.performanceQueue.length===0)return;const e=[...this.performanceQueue];this.performanceQueue=[];try{console.info("Monitoring: Flushing performance metrics:",e);const n=[...JSON.parse(localStorage.getItem("monitoring_performance")||"[]"),...e].slice(-500);localStorage.setItem("monitoring_performance",JSON.stringify(n))}catch(t){console.error("Failed to flush performance metrics:",t),this.performanceQueue.unshift(...e)}}async flushAnalytics(){if(this.analyticsQueue.length===0)return;const e=[...this.analyticsQueue];this.analyticsQueue=[];try{console.info("Monitoring: Flushing analytics:",e);const n=[...JSON.parse(localStorage.getItem("monitoring_analytics")||"[]"),...e].slice(-1e3);localStorage.setItem("monitoring_analytics",JSON.stringify(n))}catch(t){console.error("Failed to flush analytics:",t),this.analyticsQueue.unshift(...e)}}getStoredErrors(){try{return JSON.parse(localStorage.getItem("monitoring_errors")||"[]")}catch{return[]}}getStoredPerformanceMetrics(){try{return JSON.parse(localStorage.getItem("monitoring_performance")||"[]")}catch{return[]}}getStoredAnalytics(){try{return JSON.parse(localStorage.getItem("monitoring_analytics")||"[]")}catch{return[]}}clearStoredData(){localStorage.removeItem("monitoring_errors"),localStorage.removeItem("monitoring_performance"),localStorage.removeItem("monitoring_analytics")}}const monitoringService=new MonitoringService;class ErrorBoundary extends reactExports.Component{constructor(t){super(t);$e(this,"handleReload",()=>{window.location.reload()});$e(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,errorId:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){const a=this.generateErrorId();monitoringService.captureError({message:t.message,stack:t.stack,severity:"high",tags:{errorBoundary:"true",componentStack:"true"},context:{errorId:a,componentStack:n.componentStack,errorBoundary:!0,props:this.props,state:this.state}}),this.setState({error:t,errorInfo:n,errorId:a}),monitoringService.trackEvent("error_boundary_triggered",{errorId:a,errorMessage:t.message,componentStack:n.componentStack})}generateErrorId(){return`error_boundary_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}render(){return this.state.hasError?this.props.fallback?this.props.fallback:jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",padding:3},children:jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{padding:4,maxWidth:600,textAlign:"center",borderRadius:2},children:[jsxRuntimeExports.jsx(BugReportOutlined,{sx:{fontSize:64,color:"error.main",marginBottom:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h4",gutterBottom:!0,color:"error",children:"Oops! Something went wrong"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,color:"text.secondary",children:"We've encountered an unexpected error. Our team has been notified and is working on a fix."}),this.state.errorId&&jsxRuntimeExports.jsxs(Alert,{severity:"info",sx:{marginBottom:3,textAlign:"left"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:[jsxRuntimeExports.jsx("strong",{children:"Error ID:"})," ",this.state.errorId]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{marginTop:1},children:"Please include this ID when reporting the issue to our support team."})]}),!1,jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:this.handleRetry,startIcon:jsxRuntimeExports.jsx(RefreshOutlined,{}),children:"Try Again"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",onClick:this.handleReload,children:"Reload Page"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{marginTop:3,color:"text.secondary"},children:"If the problem persists, please contact our support team."})]})}):this.props.children}}function App({toggleTheme:r,mode:e}){return reactExports.useEffect(()=>{monitoringService.trackEvent("app_loaded",{timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href}),setTimeout(()=>{monitoringService.capturePerformanceMetrics()},2e3)},[]),jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(Box,{sx:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(CircularProgress,{"data-testid":"loading-progress",color:"success"}),children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/flipkart-amazon-tools/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/flipkart-amazon-tools/health",element:React.createElement(React.lazy(()=>__vitePreload(()=>import("./health.page-h7klUjhq.js"),__vite__mapDeps([23,3,1])).then(t=>({default:t.default}))))}),jsxRuntimeExports.jsx(Route,{path:"/flipkart-amazon-tools/*",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(ProtectedRoutes,{toggleTheme:r,mode:e})})})]})})})})}const AppWrapper=()=>{const[r,e]=reactExports.useState(localStorage.getItem("theme")==="dark"?"dark":"light"),t=reactExports.useMemo(()=>createTheme(getDesignTokens(r)),[r]),n=()=>{const a=r==="light"?"dark":"light";e(a),localStorage.setItem("theme",a)};return reactExports.useEffect(()=>{store.dispatch(initializeAuthState())},[]),jsxRuntimeExports.jsx(Provider_default,{store,children:jsxRuntimeExports.jsx(PersistGate,{loading:null,persistor,children:jsxRuntimeExports.jsxs(ThemeProvider,{theme:t,children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Paper,{sx:{minHeight:"100vh"},children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{toggleTheme:n,mode:r})})})]})})})};clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(AppWrapper,{})}));export{enUS as $,selectCategoryProductsError as A,clearCategoryProducts as B,CostPriceResolutionService as C,fetchProductsByCategory as D,selectCategoryInventoryLoading as E,fetchCategoriesWithInventory as F,CategoryInventoryService as G,updateCategory as H,createCategory as I,deleteCategory as J,updateCategoryInventory as K,updateCategoryThreshold as L,toDate as M,constructFrom as N,millisecondsInHour as O,Papa as P,millisecondsInMinute as Q,normalizeDates as R,startOfDay as S,getDefaultOptions as T,millisecondsInSecond as U,getWeekYear as V,startOfWeek as W,startOfISOWeek as X,getWeek as Y,getISOWeek as Z,getTimezoneOffsetInMilliseconds as _,useAppSelector as a,longFormatters as a0,isProtectedWeekYearToken as a1,warnOrThrowProtectedError as a2,isProtectedDayOfYearToken as a3,isValid as a4,startOfYear as a5,fetchAllOrdersForAnalytics as a6,fetchCategories as a7,addCategory as a8,ref as a9,storage as aa,uploadBytesResumable as ab,getDownloadURL as ac,deleteObject as ad,listAll as ae,getMetadata as af,updateMetadata as ag,minutesInDay as ah,minutesInMonth as ai,monitoringService as aj,fetchOrders as b,fetchOrderHistory as c,fetchLowStockCategories as d,fetchCategories$1 as e,fetchProducts as f,defaultSortConfig as g,clearFlipkartFiles as h,clearAmazonFiles as i,removeAmazonFile as j,addFlipkartFile as k,addAmazonFile as l,mergePDFs as m,fetchTransactions as n,saveTransactions as o,selectCategories as p,importProducts as q,removeFlipkartFile as r,selectIsAuthenticated as s,bulkUpdateProducts as t,useAppDispatch as u,setFilters as v,updateProduct as w,format as x,selectCategoryProducts as y,selectCategoryProductsLoading as z};
